import "./chunk-HTHO73CC.js";
import "./chunk-JZROTDFY.js";
import "./chunk-HOKDB4J3.js";
import "./chunk-F7PWDCN7.js";
import "./chunk-BN5DFUEB.js";
import "./chunk-Q5NFSXVG.js";
import "./chunk-63PUKETD.js";
import "./chunk-YRG7TGUV.js";
import "./chunk-MIDVKVRO.js";
import "./chunk-QPJDA74U.js";
import "./chunk-LUJQRK44.js";
import "./chunk-UFJH45Z2.js";
import {
  state
} from "./chunk-LZTFULMJ.js";
import {
  ExchangeController,
  customElement
} from "./chunk-B3ZV4KHH.js";
import "./chunk-E5GIEKQV.js";
import "./chunk-G6TMTT7J.js";
import {
  AssetUtil,
  ChainController,
  RouterController,
  SnackController
} from "./chunk-LI2VV255.js";
import "./chunk-MNZ2R5XO.js";
import "./chunk-5ITTDC3H.js";
import "./chunk-P462YRXK.js";
import "./chunk-7F5D6BMV.js";
import "./chunk-CIFUO6GN.js";
import {
  LitElement,
  css,
  html
} from "./chunk-OBSIY7QV.js";
import "./chunk-YXPKUK4B.js";
import "./chunk-OAUNBI7H.js";
import "./chunk-3IIR2JB6.js";
import "./chunk-MUG7H3QV.js";
import "./chunk-KCM3CGOE.js";
import "./chunk-UILIC4UQ.js";
import "./chunk-256EKJAK.js";

// ../node_modules/@reown/appkit-scaffold-ui/dist/esm/src/views/w3m-deposit-from-exchange-view/styles.js
var styles_default = css`
  .amount-input-container {
    border-radius: var(--wui-border-radius-m);
    border-top-right-radius: 0;
    border-top-left-radius: 0;
    border-bottom: 1px solid var(--wui-color-gray-glass-010);
    background-color: var(--wui-color-bg-100);
  }

  .container {
    background-color: var(--wui-color-bg-125);
  }
`;

// ../node_modules/@reown/appkit-scaffold-ui/dist/esm/src/views/w3m-deposit-from-exchange-view/index.js
var __decorate = function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var PRESET_AMOUNTS = [10, 50, 100];
var W3mDepositFromExchangeView = class W3mDepositFromExchangeView2 extends LitElement {
  constructor() {
    super();
    this.unsubscribe = [];
    this.network = ChainController.state.activeCaipNetwork;
    this.exchanges = ExchangeController.state.exchanges;
    this.isLoading = ExchangeController.state.isLoading;
    this.amount = ExchangeController.state.amount;
    this.tokenAmount = ExchangeController.state.tokenAmount;
    this.priceLoading = ExchangeController.state.priceLoading;
    this.isPaymentInProgress = ExchangeController.state.isPaymentInProgress;
    this.currentPayment = ExchangeController.state.currentPayment;
    this.paymentId = ExchangeController.state.paymentId;
    this.unsubscribe.push(ExchangeController.subscribe((exchangeState) => {
      var _a, _b;
      this.exchanges = exchangeState.exchanges;
      this.isLoading = exchangeState.isLoading;
      this.amount = exchangeState.amount;
      this.tokenAmount = exchangeState.tokenAmount;
      this.priceLoading = exchangeState.priceLoading;
      this.paymentId = exchangeState.paymentId;
      this.isPaymentInProgress = exchangeState.isPaymentInProgress;
      this.currentPayment = exchangeState.currentPayment;
      const shouldHandlePaymentInProgress = exchangeState.isPaymentInProgress && ((_a = exchangeState.currentPayment) == null ? void 0 : _a.exchangeId) && ((_b = exchangeState.currentPayment) == null ? void 0 : _b.sessionId) && exchangeState.paymentId;
      if (shouldHandlePaymentInProgress) {
        this.handlePaymentInProgress();
      }
    }));
  }
  disconnectedCallback() {
    this.unsubscribe.forEach((unsubscribe) => unsubscribe());
    ExchangeController.reset();
  }
  firstUpdated() {
    ExchangeController.fetchExchanges();
    ExchangeController.fetchTokenPrice();
  }
  render() {
    return html`
      <wui-flex flexDirection="column" gap="xs" class="container">
        ${this.amountInputTemplate()} ${this.exchangesTemplate()}
      </wui-flex>
    `;
  }
  exchangesTemplate() {
    return html`
      <wui-flex
        flexDirection="column"
        gap="xs"
        .padding=${["xs", "s", "s", "s"]}
        class="exchanges-container"
      >
        ${this.exchanges.map((exchange) => html`<wui-list-item
              @click=${() => this.onExchangeClick(exchange)}
              chevron
              variant="image"
              imageSrc=${exchange.imageUrl}
              ?loading=${this.isLoading}
              ?disabled=${!this.amount}
            >
              <wui-text variant="paragraph-500" color="fg-200">
                Deposit from ${exchange.name}
              </wui-text>
            </wui-list-item>`)}
      </wui-flex>
    `;
  }
  amountInputTemplate() {
    var _a;
    return html`
      <wui-flex flexDirection="column" gap="s" .padding=${["0", "s", "s", "s"]} class="amount-input-container">
        <wui-flex justifyContent="space-between">
          <wui-text variant="paragraph-500" color="fg-200">Asset</wui-text>
          <wui-chip-button
            data-testid="deposit-from-exchange-asset-button"
            text=${((_a = this.network) == null ? void 0 : _a.nativeCurrency.symbol) || ""}
            imageSrc=${AssetUtil.getNetworkImage(this.network)}
            size="sm"
            variant="gray"
            icon=${null}
          ></wui-chip-button>
        </wui-flex>
        <wui-flex flexDirection="column" alignItems="center" justifyContent="center">
          <wui-flex alignItems="center" gap="4xs">
            <wui-text variant="2xl-500" color="fg-200">${this.amount}</wui-text>
            <wui-text variant="paragraph-500" color="fg-200">USD</wui-text>
          </wui-flex>
          ${this.tokenAmountTemplate()}
          </wui-flex>
          <wui-flex justifyContent="space-between" gap="xs">
            ${PRESET_AMOUNTS.map((amount) => html`<wui-button @click=${() => this.onPresetAmountClick(amount)} variant=${this.amount === amount ? "accent" : "shade"} size="sm" fullWidth>$${amount}</wui-button>`)}
          </wui-flex>
        </wui-flex>
      </wui-flex>
    `;
  }
  tokenAmountTemplate() {
    var _a;
    if (this.priceLoading) {
      return html`<wui-shimmer
        width="65px"
        height="20px"
        borderRadius="xxs"
        variant="light"
      ></wui-shimmer>`;
    }
    return html`
      <wui-text variant="paragraph-500" color="fg-200">
        ${this.tokenAmount} ${(_a = this.network) == null ? void 0 : _a.nativeCurrency.symbol}
      </wui-text>
    `;
  }
  async onExchangeClick(exchange) {
    if (this.amount) {
      await ExchangeController.handlePayWithExchange(exchange.id);
    }
  }
  handlePaymentInProgress() {
    var _a, _b;
    if (this.isPaymentInProgress && ((_a = this.currentPayment) == null ? void 0 : _a.exchangeId) && ((_b = this.currentPayment) == null ? void 0 : _b.sessionId) && this.paymentId) {
      SnackController.showLoading("Deposit in progress...");
      RouterController.replace("Account");
      ExchangeController.waitUntilComplete({
        exchangeId: this.currentPayment.exchangeId,
        sessionId: this.currentPayment.sessionId,
        paymentId: this.paymentId
      }).then((status) => {
        if (status.status === "SUCCESS") {
          SnackController.showSuccess("Deposit completed");
        } else if (status.status === "FAILED") {
          SnackController.showError("Deposit failed");
        }
      });
    }
  }
  onPresetAmountClick(amount) {
    ExchangeController.setAmount(amount);
  }
};
W3mDepositFromExchangeView.styles = styles_default;
__decorate([
  state()
], W3mDepositFromExchangeView.prototype, "network", void 0);
__decorate([
  state()
], W3mDepositFromExchangeView.prototype, "exchanges", void 0);
__decorate([
  state()
], W3mDepositFromExchangeView.prototype, "isLoading", void 0);
__decorate([
  state()
], W3mDepositFromExchangeView.prototype, "amount", void 0);
__decorate([
  state()
], W3mDepositFromExchangeView.prototype, "tokenAmount", void 0);
__decorate([
  state()
], W3mDepositFromExchangeView.prototype, "priceLoading", void 0);
__decorate([
  state()
], W3mDepositFromExchangeView.prototype, "isPaymentInProgress", void 0);
__decorate([
  state()
], W3mDepositFromExchangeView.prototype, "currentPayment", void 0);
__decorate([
  state()
], W3mDepositFromExchangeView.prototype, "paymentId", void 0);
W3mDepositFromExchangeView = __decorate([
  customElement("w3m-deposit-from-exchange-view")
], W3mDepositFromExchangeView);
export {
  W3mDepositFromExchangeView
};
//# sourceMappingURL=pay-with-exchange-UIPKEJC6.js.map

{
  "version": 3,
  "sources": ["../../../../node_modules/@tronweb3/tronwallet-adapter-ledger/node_modules/@ledgerhq/devices/src/hid-framing.ts", "../../../../node_modules/@tronweb3/tronwallet-adapter-ledger/src/polyfills/Buffer.ts", "../../../../node_modules/@ledgerhq/hw-app-trx/src/utils.ts", "../../../../node_modules/@ledgerhq/hw-app-trx/src/TIP712/index.ts", "../../../../node_modules/@ledgerhq/hw-app-trx/src/Trx.ts", "../../../../node_modules/@tronweb3/tronwallet-adapter-ledger/node_modules/@ledgerhq/hw-transport/src/Transport.ts", "../../../../node_modules/@tronweb3/tronwallet-adapter-ledger/node_modules/@ledgerhq/hw-transport-webhid/src/TransportWebHID.ts", "../../../../node_modules/@tronweb3/tronwallet-adapter-ledger/node_modules/@ledgerhq/devices/src/index.ts", "../../../../node_modules/preact/src/constants.js", "../../../../node_modules/preact/src/util.js", "../../../../node_modules/preact/src/options.js", "../../../../node_modules/preact/src/create-element.js", "../../../../node_modules/preact/src/component.js", "../../../../node_modules/preact/src/diff/props.js", "../../../../node_modules/preact/src/create-context.js", "../../../../node_modules/preact/src/diff/children.js", "../../../../node_modules/preact/src/diff/index.js", "../../../../node_modules/preact/src/render.js", "../../../../node_modules/preact/src/clone-element.js", "../../../../node_modules/preact/src/diff/catch-error.js", "../../../../node_modules/preact/jsx-runtime/src/utils.js", "../../../../node_modules/preact/src/constants.js", "../../../../node_modules/preact/jsx-runtime/src/index.js", "../../../../node_modules/preact/hooks/src/index.js", "../../../../node_modules/preact/compat/src/util.js", "../../../../node_modules/preact/compat/src/hooks.js", "../../../../node_modules/preact/compat/src/PureComponent.js", "../../../../node_modules/preact/compat/src/memo.js", "../../../../node_modules/preact/compat/src/forwardRef.js", "../../../../node_modules/preact/compat/src/Children.js", "../../../../node_modules/preact/compat/src/suspense.js", "../../../../node_modules/preact/compat/src/suspense-list.js", "../../../../node_modules/preact/src/constants.js", "../../../../node_modules/preact/compat/src/portals.js", "../../../../node_modules/preact/compat/src/render.js", "../../../../node_modules/preact/compat/src/index.js", "../../../../node_modules/@tronweb3/tronwallet-adapter-ledger/src/Modal/lang.ts", "../../../../node_modules/@tronweb3/tronwallet-adapter-ledger/src/Modal/LedgerIcon.tsx", "../../../../node_modules/@tronweb3/tronwallet-adapter-ledger/src/Modal/LoadingIcon.tsx", "../../../../node_modules/@tronweb3/tronwallet-adapter-ledger/src/Modal/ConfirmContent.tsx", "../../../../node_modules/@tronweb3/tronwallet-adapter-ledger/src/Modal/ConnectingContent.tsx", "../../../../node_modules/@tronweb3/tronwallet-adapter-ledger/src/Modal/Modal.tsx", "../../../../node_modules/@tronweb3/tronwallet-adapter-ledger/src/Modal/SelectAccount.tsx", "../../../../node_modules/@tronweb3/tronwallet-adapter-ledger/src/Modal/style.ts", "../../../../node_modules/@tronweb3/tronwallet-adapter-ledger/src/Modal/openModal.tsx", "../../../../node_modules/@tronweb3/tronwallet-adapter-ledger/src/LedgerWallet.ts", "../../../../node_modules/@tronweb3/tronwallet-adapter-ledger/src/adapter.ts", "../../../../node_modules/@tronweb3/tronwallet-adapter-tokenpocket/src/utils.ts", "../../../../node_modules/@tronweb3/tronwallet-adapter-tokenpocket/src/adapter.ts", "../../../../node_modules/@tronweb3/tronwallet-adapter-bitkeep/src/utils.ts", "../../../../node_modules/@tronweb3/tronwallet-adapter-bitkeep/src/adapter.ts", "../../../../node_modules/@tronweb3/tronwallet-adapter-okxwallet/src/utils.ts", "../../../../node_modules/@tronweb3/tronwallet-adapter-okxwallet/src/adapter.ts", "../../../../node_modules/@tronweb3/tronwallet-adapter-gatewallet/src/utils.ts", "../../../../node_modules/@tronweb3/tronwallet-adapter-gatewallet/src/adapter.ts", "../../../../node_modules/@tronweb3/tronwallet-adapter-imtoken/src/utils.ts", "../../../../node_modules/@tronweb3/tronwallet-adapter-imtoken/src/adapter.ts", "../../../../node_modules/@tronweb3/tronwallet-adapter-foxwallet/src/utils.ts", "../../../../node_modules/@tronweb3/tronwallet-adapter-foxwallet/src/adapter.ts", "../../../../node_modules/@tronweb3/tronwallet-adapter-bybit/src/utils.ts", "../../../../node_modules/@tronweb3/tronwallet-adapter-bybit/src/adapter.ts", "../../../../node_modules/@tronweb3/tronwallet-adapter-tomowallet/src/utils.ts", "../../../../node_modules/@tronweb3/tronwallet-adapter-tomowallet/src/adapter.ts", "../../../../node_modules/@tronweb3/tronwallet-adapter-trust/src/utils.ts", "../../../../node_modules/@tronweb3/tronwallet-adapter-trust/src/adapter.ts", "../../../../node_modules/@tronweb3/tronwallet-adapter-guarda/src/utils.ts", "../../../../node_modules/@tronweb3/tronwallet-adapter-guarda/src/adapter.ts", "../../../../node_modules/@tronweb3/tronwallet-adapter-binance/src/adapter.ts", "../../../../node_modules/@binance/w3w-utils/src/jsonrpc/constants.ts", "../../../../node_modules/@binance/w3w-utils/src/jsonrpc/error.ts", "../../../../node_modules/@binance/w3w-utils/src/jsonrpc/format.ts", "../../../../node_modules/@binance/w3w-utils/src/jsonrpc/validators.ts", "../../../../node_modules/@binance/w3w-utils/src/jsonrpc/url.ts", "../../../../node_modules/@binance/w3w-utils/src/deeplink.ts", "../../../../node_modules/@binance/w3w-utils/src/constants.ts", "../../../../node_modules/@binance/w3w-utils/src/misc.ts", "../../../../node_modules/@binance/w3w-utils/src/encoding/encoding.ts", "../../../../node_modules/@binance/w3w-utils/src/encoding/convert.ts", "../../../../node_modules/@binance/w3w-utils/src/crypto/lib.ts", "../../../../node_modules/@binance/w3w-utils/src/crypto/aes.ts", "../../../../node_modules/@binance/w3w-utils/src/crypto/pkcs7.ts", "../../../../node_modules/@binance/w3w-utils/src/crypto/encrypt.ts", "../../../../node_modules/@binance/w3w-utils/src/storage/browser.ts", "../../../../node_modules/@binance/w3w-utils/src/events/index.ts", "../../../../node_modules/@binance/w3w-utils/src/logger/index.ts", "../../../../node_modules/@binance/w3w-utils/src/metadata/browser.ts", "../../../../node_modules/@binance/w3w-utils/src/error/provider-error.ts", "../../../../node_modules/@binance/w3w-utils/src/error/error-code.ts", "../../../../node_modules/@binance/w3w-utils/src/detect-ua/browser.ts", "../../../../node_modules/@binance/w3w-utils/src/env.ts", "../../../../node_modules/@binance/w3w-utils/src/transport.ts", "../../../../node_modules/js-base64/base64.mjs", "../../../../node_modules/@tronweb3/tronwallet-adapter-binance/src/utils.ts"],
  "sourcesContent": ["import { TransportError } from \"@ledgerhq/errors\";\nexport type ResponseAcc =\n  | {\n      data: Buffer;\n      dataLength: number;\n      sequence: number;\n    }\n  | null\n  | undefined;\nconst Tag = 0x05;\n\nfunction asUInt16BE(value) {\n  const b = Buffer.alloc(2);\n  b.writeUInt16BE(value, 0);\n  return b;\n}\n\nconst initialAcc = {\n  data: Buffer.alloc(0),\n  dataLength: 0,\n  sequence: 0,\n};\n\n/**\n *\n */\nconst createHIDframing = (channel: number, packetSize: number) => {\n  return {\n    makeBlocks(apdu: Buffer): Buffer[] {\n      let data = Buffer.concat([asUInt16BE(apdu.length), apdu]);\n      const blockSize = packetSize - 5;\n      const nbBlocks = Math.ceil(data.length / blockSize);\n      data = Buffer.concat([\n        data, // fill data with padding\n        Buffer.alloc(nbBlocks * blockSize - data.length + 1).fill(0),\n      ]);\n      const blocks: Buffer[] = [];\n\n      for (let i = 0; i < nbBlocks; i++) {\n        const head = Buffer.alloc(5);\n        head.writeUInt16BE(channel, 0);\n        head.writeUInt8(Tag, 2);\n        head.writeUInt16BE(i, 3);\n        const chunk = data.slice(i * blockSize, (i + 1) * blockSize);\n        blocks.push(Buffer.concat([head, chunk]));\n      }\n\n      return blocks;\n    },\n\n    reduceResponse(acc: ResponseAcc, chunk: Buffer): ResponseAcc {\n      let { data, dataLength, sequence } = acc || initialAcc;\n\n      if (chunk.readUInt16BE(0) !== channel) {\n        throw new TransportError(\"Invalid channel\", \"InvalidChannel\");\n      }\n\n      if (chunk.readUInt8(2) !== Tag) {\n        throw new TransportError(\"Invalid tag\", \"InvalidTag\");\n      }\n\n      if (chunk.readUInt16BE(3) !== sequence) {\n        throw new TransportError(\"Invalid sequence\", \"InvalidSequence\");\n      }\n\n      if (!acc) {\n        dataLength = chunk.readUInt16BE(5);\n      }\n\n      sequence++;\n      const chunkData = chunk.slice(acc ? 5 : 7);\n      data = Buffer.concat([data, chunkData]);\n\n      if (data.length > dataLength) {\n        data = data.slice(0, dataLength);\n      }\n\n      return {\n        data,\n        dataLength,\n        sequence,\n      };\n    },\n\n    getReducedResult(acc: ResponseAcc): Buffer | null | undefined {\n      if (acc && acc.dataLength === acc.data.length) {\n        return acc.data;\n      }\n    },\n  };\n};\n\nexport default createHIDframing;\n", "import { Buffer } from 'buffer';\n\nif (typeof window !== 'undefined' && window.Buffer === undefined) {\n    (window as any).Buffer = Buffer;\n}\n\nexport {};\n", "/********************************************************************************\n *   Ledger Node JS API\n *   (c) 2016-2017 Ledger\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n ********************************************************************************/\ntype Defer<T> = {\n  promise: Promise<T>;\n  resolve: (arg0: T) => void;\n  reject: (arg0: any) => void;\n};\nexport function defer<T>(): Defer<T> {\n  let resolve, reject;\n  const promise = new Promise<T>(function (success, failure) {\n    resolve = success;\n    reject = failure;\n  });\n  if (!resolve || !reject) throw \"defer() error\"; // this never happens and is just to make flow happy\n\n  return {\n    promise,\n    resolve,\n    reject,\n  };\n}\n// TODO use bip32-path library\nexport function splitPath(path: string): number[] {\n  const result: number[] = [];\n  const components = path.split(\"/\");\n  components.forEach(element => {\n    let number = parseInt(element, 10);\n\n    if (isNaN(number)) {\n      return; // FIXME shouldn't it throws instead?\n    }\n\n    if (element.length > 1 && element[element.length - 1] === \"'\") {\n      number += 0x80000000;\n    }\n\n    result.push(number);\n  });\n  return result;\n}\n// TODO use async await\nexport function eachSeries<A>(arr: A[], fun: (arg0: A) => Promise<any>): Promise<any> {\n  return arr.reduce((p, e) => p.then(() => fun(e)), Promise.resolve());\n}\nexport function foreach<T, A>(\n  arr: T[],\n  callback: (arg0: T, arg1: number) => Promise<A>,\n): Promise<A[]> {\n  function iterate(index, array, result) {\n    if (index >= array.length) {\n      return result;\n    } else\n      return callback(array[index], index).then(function (res) {\n        result.push(res);\n        return iterate(index + 1, array, result);\n      });\n  }\n\n  return Promise.resolve().then(() => iterate(0, arr, []));\n}\nexport function doIf(condition: boolean, callback: () => any | Promise<any>): Promise<void> {\n  return Promise.resolve().then(() => {\n    if (condition) {\n      return callback();\n    }\n  });\n}\nexport function asyncWhile<T>(\n  predicate: () => boolean,\n  callback: () => Promise<T>,\n): Promise<Array<T>> {\n  function iterate(result) {\n    if (!predicate()) {\n      return result;\n    } else {\n      return callback().then(res => {\n        result.push(res);\n        return iterate(result);\n      });\n    }\n  }\n\n  return Promise.resolve([]).then(iterate);\n}\ninterface DecodeResult {\n  value: number;\n  pos: number;\n}\nexport function decodeVarint(stream: Buffer, index: number): DecodeResult {\n  let result = 0;\n  let shift = 0;\n  let pos = index;\n\n  // eslint-disable-next-line no-constant-condition\n  while (shift < 64) {\n    const b = stream[pos];\n    result |= (b & 0x7f) << shift;\n    pos += 1;\n\n    if (!(b & 0x80)) {\n      result &= 0xffffffff;\n      return {\n        value: result,\n        pos,\n      };\n    }\n\n    shift += 7;\n  }\n\n  throw new Error(\"Too many bytes when decoding varint.\");\n}\n\nexport const padHexString = (str: string) => {\n  return str.length % 2 ? \"0\" + str : str;\n};\n\nexport function hexBuffer(str: string): Buffer {\n  const strWithoutPrefix = str.startsWith(\"0x\") ? str.slice(2) : str;\n  return Buffer.from(padHexString(strWithoutPrefix), \"hex\");\n}\n", "import Transport from \"@ledgerhq/hw-transport\";\nimport { hexBuffer, splitPath } from \"../utils\";\n\nconst CLA = 0xe0;\n\nexport const signTIP712HashedMessage = (\n  transport: Transport,\n  path: string,\n  domainSeparatorHex: string,\n  hashStructMessageHex: string,\n): Promise<string> => {\n  const domainSeparator = hexBuffer(domainSeparatorHex);\n  const hashStruct = hexBuffer(hashStructMessageHex);\n  const paths = splitPath(path);\n  const buffer = Buffer.alloc(1 + paths.length * 4 + 32 + 32, 0);\n\n  let offset = 0;\n  buffer[0] = paths.length;\n  paths.forEach((element, index) => {\n    buffer.writeUint32BE(element, 1 + 4 * index);\n  });\n\n  offset = 1 + 4 * paths.length;\n  domainSeparator.copy(buffer, offset);\n  offset += 32;\n  hashStruct.copy(buffer, offset);\n\n  return transport.send(CLA, 0x0c, 0x00, 0x00, buffer).then(response => {\n    return response.slice(0, 65).toString(\"hex\");\n  });\n};\n", "/********************************************************************************\n *   Ledger Node JS API\n *   (c) 2016-2017 Ledger\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n ********************************************************************************/\n// FIXME drop:\nimport { splitPath, foreach, decodeVarint } from \"./utils\";\nimport type Transport from \"@ledgerhq/hw-transport\";\nimport { signTIP712HashedMessage } from \"./TIP712\";\n\nconst remapTransactionRelatedErrors = e => {\n  if (e && e.statusCode === 0x6a80) {\n    // TODO:\n  }\n\n  return e;\n};\n\nconst PATH_SIZE = 4;\nconst PATHS_LENGTH_SIZE = 1;\nconst CLA = 0xe0;\nconst ADDRESS = 0x02;\nconst SIGN = 0x04;\nconst SIGN_HASH = 0x05;\nconst SIGN_MESSAGE = 0x08;\nconst ECDH_SECRET = 0x0a;\nconst VERSION = 0x06;\nconst CHUNK_SIZE = 250;\n/**\n * Tron API\n *\n * @example\n * import Trx from \"@ledgerhq/hw-app-trx\";\n * const trx = new Trx(transport)\n */\n\nexport default class Trx {\n  transport: Transport;\n\n  constructor(transport: Transport, scrambleKey = \"TRX\") {\n    this.transport = transport;\n    transport.decorateAppAPIMethods(\n      this,\n      [\n        \"getAddress\",\n        \"getECDHPairKey\",\n        \"signTransaction\",\n        \"signTransactionHash\",\n        \"signPersonalMessage\",\n        \"signTIP712HashedMessage\",\n        \"getAppConfiguration\",\n      ],\n      scrambleKey,\n    );\n  }\n\n  /**\n   * get Tron address for a given BIP 32 path.\n   * @param path a path in BIP 32 format\n   * @option boolDisplay optionally enable or not the display\n   * @return an object with a publicKey and address\n   * @example\n   * const address = await tron.getAddress(\"44'/195'/0'/0/0\").then(o => o.address)\n   */\n  getAddress(\n    path: string,\n    boolDisplay?: boolean,\n  ): Promise<{\n    publicKey: string;\n    address: string;\n  }> {\n    const paths = splitPath(path);\n    const buffer = Buffer.alloc(PATHS_LENGTH_SIZE + paths.length * PATH_SIZE);\n    buffer[0] = paths.length;\n    paths.forEach((element, index) => {\n      buffer.writeUInt32BE(element, 1 + 4 * index);\n    });\n    return this.transport\n      .send(CLA, ADDRESS, boolDisplay ? 0x01 : 0x00, 0x00, buffer)\n      .then(response => {\n        const publicKeyLength = response[0];\n        const addressLength = response[1 + publicKeyLength];\n\n        return {\n          publicKey: response.slice(1, 1 + publicKeyLength).toString(\"hex\"),\n          address: response\n            .slice(1 + publicKeyLength + 1, 1 + publicKeyLength + 1 + addressLength)\n            .toString(\"ascii\"),\n        };\n      });\n  }\n\n  getNextLength(tx: Buffer): number {\n    const field = decodeVarint(tx, 0);\n    const data = decodeVarint(tx, field.pos);\n    if ((field.value & 0x07) === 0) return data.pos;\n    return data.value + data.pos;\n  }\n\n  /**\n   * sign a Tron transaction with a given BIP 32 path and Token Names\n   *\n   * @param path a path in BIP 32 format\n   * @param rawTxHex a raw transaction hex string\n   * @param tokenSignatures Tokens Signatures array\n   * @option version pack message based on ledger firmware version\n   * @option smartContract boolean hack to set limit buffer on ledger device\n   * @return a signature as hex string\n   * @example\n   * const signature = await tron.signTransaction(\"44'/195'/0'/0/0\", \"0a02f5942208704dda506d59dceb40f0f4978f802e5a69080112650a2d747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e5472616e73666572436f6e747261637412340a1541978dbd103cfe59c35e753d09dd44ae1ae64621c7121541e2ae49db6a70b9b4757d2137a43b69b24a445780188ef8b5ba0470cbb5948f802e\", [], 105);\n   */\n  signTransaction(path: string, rawTxHex: string, tokenSignatures: string[]): Promise<string> {\n    const paths = splitPath(path);\n    let rawTx = Buffer.from(rawTxHex, \"hex\");\n    const toSend: Buffer[] = [];\n    let data = Buffer.alloc(PATHS_LENGTH_SIZE + paths.length * PATH_SIZE);\n    // write path for first chuck only\n    data[0] = paths.length;\n    paths.forEach((element, index) => {\n      data.writeUInt32BE(element, 1 + 4 * index);\n    });\n\n    while (rawTx.length > 0) {\n      // get next message field\n      const newpos = this.getNextLength(rawTx);\n      if (newpos > CHUNK_SIZE) throw new Error(\"Too many bytes to encode.\");\n\n      if (data.length + newpos > CHUNK_SIZE) {\n        toSend.push(data);\n        data = Buffer.alloc(0);\n        continue;\n      }\n\n      // append data\n      data = Buffer.concat([data, rawTx.slice(0, newpos)]);\n      rawTx = rawTx.slice(newpos, rawTx.length);\n    }\n\n    toSend.push(data);\n    const startBytes: number[] = [];\n    let response;\n    const tokenPos = toSend.length;\n\n    if (tokenSignatures !== undefined) {\n      for (let i = 0; i < tokenSignatures.length; i += 1) {\n        const buffer = Buffer.from(tokenSignatures[i], \"hex\");\n        toSend.push(buffer);\n      }\n    }\n\n    // get startBytes\n    if (toSend.length === 1) {\n      startBytes.push(0x10);\n    } else {\n      startBytes.push(0x00);\n\n      for (let i = 1; i < toSend.length - 1; i += 1) {\n        if (i >= tokenPos) {\n          startBytes.push(0xa0 | 0x00 | (i - tokenPos)); // eslint-disable-line no-bitwise\n        } else {\n          startBytes.push(0x80);\n        }\n      }\n\n      if (tokenSignatures !== undefined && tokenSignatures.length) {\n        startBytes.push(0xa0 | 0x08 | (tokenSignatures.length - 1)); // eslint-disable-line no-bitwise\n      } else {\n        startBytes.push(0x90);\n      }\n    }\n\n    return foreach(toSend, (data, i) => {\n      return this.transport.send(CLA, SIGN, startBytes[i], 0x00, data).then(apduResponse => {\n        response = apduResponse;\n      });\n    }).then(\n      () => {\n        return response.slice(0, 65).toString(\"hex\");\n      },\n      e => {\n        throw remapTransactionRelatedErrors(e);\n      },\n    );\n  }\n\n  /**\n   * sign a Tron transaction hash with a given BIP 32 path\n   *\n   * @param path a path in BIP 32 format\n   * @param rawTxHex a raw transaction hex string\n   * @return a signature as hex string\n   * @example\n   * const signature = await tron.signTransactionHash(\"44'/195'/0'/0/0\", \"25b18a55f86afb10e7aca38d0073d04c80397c6636069193953fdefaea0b8369\");\n   */\n  signTransactionHash(path: string, rawTxHashHex: string): Promise<string> {\n    const paths = splitPath(path);\n    let data = Buffer.alloc(PATHS_LENGTH_SIZE + paths.length * PATH_SIZE);\n    data[0] = paths.length;\n    paths.forEach((element, index) => {\n      data.writeUInt32BE(element, 1 + 4 * index);\n    });\n    data = Buffer.concat([data, Buffer.from(rawTxHashHex, \"hex\")]);\n    return this.transport.send(CLA, SIGN_HASH, 0x00, 0x00, data).then(response => {\n      return response.slice(0, 65).toString(\"hex\");\n    });\n  }\n\n  /**\n   * get the version of the Tron app installed on the hardware device\n   *\n   * @return an object with a version\n   * @example\n   * const result = await tron.getAppConfiguration();\n   * {\n   *   \"version\": \"0.1.5\",\n   *   \"versionN\": \"105\".\n   *   \"allowData\": false,\n   *   \"allowContract\": false,\n   *   \"truncateAddress\": false,\n   *   \"signByHash\": false\n   * }\n   */\n  getAppConfiguration(): Promise<{\n    allowContract: boolean;\n    truncateAddress: boolean;\n    allowData: boolean;\n    signByHash: boolean;\n    version: string;\n    versionN: number;\n  }> {\n    return this.transport.send(CLA, VERSION, 0x00, 0x00).then(response => {\n      // eslint-disable-next-line no-bitwise\n      const signByHash = (response[0] & (1 << 3)) > 0;\n      // eslint-disable-next-line no-bitwise\n      let truncateAddress = (response[0] & (1 << 2)) > 0;\n      // eslint-disable-next-line no-bitwise\n      let allowContract = (response[0] & (1 << 1)) > 0;\n      // eslint-disable-next-line no-bitwise\n      let allowData = (response[0] & (1 << 0)) > 0;\n\n      if (response[1] === 0 && response[2] === 1 && response[3] < 2) {\n        allowData = true;\n        allowContract = false;\n      }\n\n      if (response[1] === 0 && response[2] === 1 && response[3] < 5) {\n        truncateAddress = false;\n      }\n\n      const result = {\n        version: `${response[1]}.${response[2]}.${response[3]}`,\n        versionN: response[1] * 10000 + response[2] * 100 + response[3],\n        allowData,\n        allowContract,\n        truncateAddress,\n        signByHash,\n      };\n      return result;\n    });\n  }\n\n  /**\n   * sign a Tron Message with a given BIP 32 path\n   *\n   * @param path a path in BIP 32 format\n   * @param message hex string to sign\n   * @return a signature as hex string\n   * @example\n   * const signature = await tron.signPersonalMessage(\"44'/195'/0'/0/0\", \"43727970746f436861696e2d54726f6e5352204c6564676572205472616e73616374696f6e73205465737473\");\n   */\n  signPersonalMessage(path: string, messageHex: string): Promise<string> {\n    const paths = splitPath(path);\n    const message = Buffer.from(messageHex, \"hex\");\n    let offset = 0;\n    const toSend: Buffer[] = [];\n    const size = message.length.toString(16);\n    const sizePack = \"00000000\".substr(size.length) + size;\n    const packed = Buffer.concat([Buffer.from(sizePack, \"hex\"), message]);\n\n    while (offset < packed.length) {\n      // Use small buffer to be compatible with old and new protocol\n      const maxChunkSize = offset === 0 ? CHUNK_SIZE - 1 - paths.length * 4 : CHUNK_SIZE;\n      const chunkSize =\n        offset + maxChunkSize > packed.length ? packed.length - offset : maxChunkSize;\n      const buffer = Buffer.alloc(offset === 0 ? 1 + paths.length * 4 + chunkSize : chunkSize);\n\n      if (offset === 0) {\n        buffer[0] = paths.length;\n        paths.forEach((element, index) => {\n          buffer.writeUInt32BE(element, 1 + 4 * index);\n        });\n        packed.copy(buffer, 1 + 4 * paths.length, offset, offset + chunkSize);\n      } else {\n        packed.copy(buffer, 0, offset, offset + chunkSize);\n      }\n\n      toSend.push(buffer);\n      offset += chunkSize;\n    }\n\n    let response;\n    return foreach(toSend, (data, i) => {\n      return this.transport\n        .send(CLA, SIGN_MESSAGE, i === 0 ? 0x00 : 0x80, 0x00, data)\n        .then(apduResponse => {\n          response = apduResponse;\n        });\n    }).then(() => {\n      return response.slice(0, 65).toString(\"hex\");\n    });\n  }\n\n  /**\n   * Sign a typed data. The host computes the domain separator and hashStruct(message)\n   * @example\n     const signature = await tronApp.signTIP712HashedMessage(\"44'/195'/0'/0/0\",Buffer.from( \"0101010101010101010101010101010101010101010101010101010101010101\").toString(\"hex\"), Buffer.from(\"0202020202020202020202020202020202020202020202020202020202020202\").toString(\"hex\"));\n   */\n  signTIP712HashedMessage(path: string, domainSeparatorHex: string, hashStructMessageHex: string) {\n    return signTIP712HashedMessage(this.transport, path, domainSeparatorHex, hashStructMessageHex);\n  }\n\n  /**\n   * get Tron address for a given BIP 32 path.\n   * @param path a path in BIP 32 format\n   * @param publicKey address public key to generate pair key\n   * @return shared key hex string,\n   * @example\n   * const signature = await tron.getECDHPairKey(\"44'/195'/0'/0/0\", \"04ff21f8e64d3a3c0198edfbb7afdc79be959432e92e2f8a1984bb436a414b8edcec0345aad0c1bf7da04fd036dd7f9f617e30669224283d950fab9dd84831dc83\");\n   */\n  getECDHPairKey(path: string, publicKey: string): Promise<string> {\n    const paths = splitPath(path);\n    const data = Buffer.from(publicKey, \"hex\");\n    const buffer = Buffer.alloc(1 + paths.length * 4 + data.length);\n    buffer[0] = paths.length;\n    paths.forEach((element, index) => {\n      buffer.writeUInt32BE(element, 1 + 4 * index);\n    });\n    data.copy(buffer, 1 + 4 * paths.length, 0, data.length);\n    return this.transport\n      .send(CLA, ECDH_SECRET, 0x00, 0x01, buffer)\n      .then(response => response.slice(0, 65).toString(\"hex\"));\n  }\n}\n", "import EventEmitter from \"events\";\nimport type { DeviceModel } from \"@ledgerhq/devices\";\nimport {\n  TransportRaceCondition,\n  TransportError,\n  StatusCodes,\n  getAltStatusMessage,\n  TransportStatusError,\n} from \"@ledgerhq/errors\";\nexport {\n  TransportError,\n  TransportStatusError,\n  StatusCodes,\n  getAltStatusMessage,\n};\n\n/**\n */\nexport type Subscription = {\n  unsubscribe: () => void;\n};\n\n/**\n */\nexport type Device = any; // Should be a union type of all possible Device object's shape\n\n/**\n * type: add or remove event\n * descriptor: a parameter that can be passed to open(descriptor)\n * deviceModel: device info on the model (is it a nano s, nano x, ...)\n * device: transport specific device info\n */\nexport interface DescriptorEvent<Descriptor> {\n  type: \"add\" | \"remove\";\n  descriptor: Descriptor;\n  deviceModel?: DeviceModel | null | undefined;\n  device?: Device;\n}\n\n/**\n */\nexport type Observer<Ev> = Readonly<{\n  next: (event: Ev) => unknown;\n  error: (e: any) => unknown;\n  complete: () => unknown;\n}>;\n/**\n * Transport defines the generic interface to share between node/u2f impl\n * A **Descriptor** is a parametric type that is up to be determined for the implementation.\n * it can be for instance an ID, an file path, a URL,...\n */\n\nexport default class Transport {\n  exchangeTimeout = 30000;\n  unresponsiveTimeout = 15000;\n  deviceModel: DeviceModel | null | undefined = null;\n\n  /**\n   * Statically check if a transport is supported on the user's platform/browser.\n   */\n  static readonly isSupported: () => Promise<boolean>;\n\n  /**\n   * List once all available descriptors. For a better granularity, checkout `listen()`.\n   * @return a promise of descriptors\n   * @example\n   * TransportFoo.list().then(descriptors => ...)\n   */\n  static readonly list: () => Promise<Array<any>>;\n\n  /**\n   * Listen all device events for a given Transport. The method takes an Obverver of DescriptorEvent and returns a Subscription (according to Observable paradigm https://github.com/tc39/proposal-observable )\n   * a DescriptorEvent is a `{ descriptor, type }` object. type can be `\"add\"` or `\"remove\"` and descriptor is a value you can pass to `open(descriptor)`.\n   * each listen() call will first emit all potential device already connected and then will emit events can come over times,\n   * for instance if you plug a USB device after listen() or a bluetooth device become discoverable.\n   * @param observer is an object with a next, error and complete function (compatible with observer pattern)\n   * @return a Subscription object on which you can `.unsubscribe()` to stop listening descriptors.\n   * @example\n  const sub = TransportFoo.listen({\n  next: e => {\n    if (e.type===\"add\") {\n      sub.unsubscribe();\n      const transport = await TransportFoo.open(e.descriptor);\n      ...\n    }\n  },\n  error: error => {},\n  complete: () => {}\n  })\n   */\n  static readonly listen: (\n    observer: Observer<DescriptorEvent<any>>\n  ) => Subscription;\n\n  /**\n   * attempt to create a Transport instance with potentially a descriptor.\n   * @param descriptor: the descriptor to open the transport with.\n   * @param timeout: an optional timeout\n   * @return a Promise of Transport instance\n   * @example\n  TransportFoo.open(descriptor).then(transport => ...)\n   */\n  static readonly open: (\n    descriptor?: any,\n    timeout?: number\n  ) => Promise<Transport>;\n\n  /**\n   * low level api to communicate with the device\n   * This method is for implementations to implement but should not be directly called.\n   * Instead, the recommanded way is to use send() method\n   * @param apdu the data to send\n   * @return a Promise of response data\n   */\n  exchange(_apdu: Buffer): Promise<Buffer> {\n    throw new Error(\"exchange not implemented\");\n  }\n\n  /**\n   * set the \"scramble key\" for the next exchanges with the device.\n   * Each App can have a different scramble key and they internally will set it at instanciation.\n   * @param key the scramble key\n   */\n  setScrambleKey(_key: string) {}\n\n  /**\n   * close the exchange with the device.\n   * @return a Promise that ends when the transport is closed.\n   */\n  close(): Promise<void> {\n    return Promise.resolve();\n  }\n\n  _events = new EventEmitter();\n\n  /**\n   * Listen to an event on an instance of transport.\n   * Transport implementation can have specific events. Here is the common events:\n   * * `\"disconnect\"` : triggered if Transport is disconnected\n   */\n  on(eventName: string, cb: (...args: Array<any>) => any): void {\n    this._events.on(eventName, cb);\n  }\n\n  /**\n   * Stop listening to an event on an instance of transport.\n   */\n  off(eventName: string, cb: (...args: Array<any>) => any): void {\n    this._events.removeListener(eventName, cb);\n  }\n\n  emit(event: string, ...args: any): void {\n    this._events.emit(event, ...args);\n  }\n\n  /**\n   * Enable or not logs of the binary exchange\n   */\n  setDebugMode() {\n    console.warn(\n      \"setDebugMode is deprecated. use @ledgerhq/logs instead. No logs are emitted in this anymore.\"\n    );\n  }\n\n  /**\n   * Set a timeout (in milliseconds) for the exchange call. Only some transport might implement it. (e.g. U2F)\n   */\n  setExchangeTimeout(exchangeTimeout: number): void {\n    this.exchangeTimeout = exchangeTimeout;\n  }\n\n  /**\n   * Define the delay before emitting \"unresponsive\" on an exchange that does not respond\n   */\n  setExchangeUnresponsiveTimeout(unresponsiveTimeout: number): void {\n    this.unresponsiveTimeout = unresponsiveTimeout;\n  }\n\n  /**\n   * wrapper on top of exchange to simplify work of the implementation.\n   * @param cla\n   * @param ins\n   * @param p1\n   * @param p2\n   * @param data\n   * @param statusList is a list of accepted status code (shorts). [0x9000] by default\n   * @return a Promise of response buffer\n   */\n  send = async (\n    cla: number,\n    ins: number,\n    p1: number,\n    p2: number,\n    data: Buffer = Buffer.alloc(0),\n    statusList: Array<number> = [StatusCodes.OK]\n  ): Promise<Buffer> => {\n    if (data.length >= 256) {\n      throw new TransportError(\n        \"data.length exceed 256 bytes limit. Got: \" + data.length,\n        \"DataLengthTooBig\"\n      );\n    }\n\n    const response = await this.exchange(\n      Buffer.concat([\n        Buffer.from([cla, ins, p1, p2]),\n        Buffer.from([data.length]),\n        data,\n      ])\n    );\n    const sw = response.readUInt16BE(response.length - 2);\n\n    if (!statusList.some((s) => s === sw)) {\n      throw new TransportStatusError(sw);\n    }\n\n    return response;\n  };\n\n  /**\n   * create() allows to open the first descriptor available or\n   * throw if there is none or if timeout is reached.\n   * This is a light helper, alternative to using listen() and open() (that you may need for any more advanced usecase)\n   * @example\n  TransportFoo.create().then(transport => ...)\n   */\n  static create(\n    openTimeout = 3000,\n    listenTimeout?: number\n  ): Promise<Transport> {\n    return new Promise((resolve, reject) => {\n      let found = false;\n      const sub = this.listen({\n        next: (e) => {\n          found = true;\n          if (sub) sub.unsubscribe();\n          if (listenTimeoutId) clearTimeout(listenTimeoutId);\n          this.open(e.descriptor, openTimeout).then(resolve, reject);\n        },\n        error: (e) => {\n          if (listenTimeoutId) clearTimeout(listenTimeoutId);\n          reject(e);\n        },\n        complete: () => {\n          if (listenTimeoutId) clearTimeout(listenTimeoutId);\n\n          if (!found) {\n            reject(\n              new TransportError(\n                this.ErrorMessage_NoDeviceFound,\n                \"NoDeviceFound\"\n              )\n            );\n          }\n        },\n      });\n      const listenTimeoutId = listenTimeout\n        ? setTimeout(() => {\n            sub.unsubscribe();\n            reject(\n              new TransportError(\n                this.ErrorMessage_ListenTimeout,\n                \"ListenTimeout\"\n              )\n            );\n          }, listenTimeout)\n        : null;\n    });\n  }\n\n  exchangeBusyPromise: Promise<void> | null | undefined;\n  exchangeAtomicImpl = async (\n    f: () => Promise<Buffer | void>\n  ): Promise<Buffer | void> => {\n    if (this.exchangeBusyPromise) {\n      throw new TransportRaceCondition(\n        \"An action was already pending on the Ledger device. Please deny or reconnect.\"\n      );\n    }\n\n    let resolveBusy;\n    const busyPromise: Promise<void> = new Promise((r) => {\n      resolveBusy = r;\n    });\n    this.exchangeBusyPromise = busyPromise;\n    let unresponsiveReached = false;\n    const timeout = setTimeout(() => {\n      unresponsiveReached = true;\n      this.emit(\"unresponsive\");\n    }, this.unresponsiveTimeout);\n\n    try {\n      const res = await f();\n\n      if (unresponsiveReached) {\n        this.emit(\"responsive\");\n      }\n\n      return res;\n    } finally {\n      clearTimeout(timeout);\n      if (resolveBusy) resolveBusy();\n      this.exchangeBusyPromise = null;\n    }\n  };\n\n  decorateAppAPIMethods(\n    self: Record<string, any>,\n    methods: Array<string>,\n    scrambleKey: string\n  ) {\n    for (const methodName of methods) {\n      self[methodName] = this.decorateAppAPIMethod(\n        methodName,\n        self[methodName],\n        self,\n        scrambleKey\n      );\n    }\n  }\n\n  _appAPIlock: string | null = null;\n\n  decorateAppAPIMethod<R, A extends any[]>(\n    methodName: string,\n    f: (...args: A) => Promise<R>,\n    ctx: any,\n    scrambleKey: string\n  ): (...args: A) => Promise<R> {\n    return async (...args) => {\n      const { _appAPIlock } = this;\n\n      if (_appAPIlock) {\n        return Promise.reject(\n          new TransportError(\n            \"Ledger Device is busy (lock \" + _appAPIlock + \")\",\n            \"TransportLocked\"\n          )\n        );\n      }\n\n      try {\n        this._appAPIlock = methodName;\n        this.setScrambleKey(scrambleKey);\n        return await f.apply(ctx, args);\n      } finally {\n        this._appAPIlock = null;\n      }\n    };\n  }\n\n  static ErrorMessage_ListenTimeout = \"No Ledger device found (timeout)\";\n  static ErrorMessage_NoDeviceFound = \"No Ledger device found\";\n}\n", "import Transport from \"@ledgerhq/hw-transport\";\nimport type {\n  Observer,\n  DescriptorEvent,\n  Subscription,\n} from \"@ledgerhq/hw-transport\";\nimport hidFraming from \"@ledgerhq/devices/lib/hid-framing\";\nimport { identifyUSBProductId, ledgerUSBVendorId } from \"@ledgerhq/devices\";\nimport type { DeviceModel } from \"@ledgerhq/devices\";\nimport { log } from \"@ledgerhq/logs\";\nimport {\n  TransportOpenUserCancelled,\n  DisconnectedDeviceDuringOperation,\n  DisconnectedDevice,\n  TransportError,\n} from \"@ledgerhq/errors\";\n\nconst ledgerDevices = [\n  {\n    vendorId: ledgerUSBVendorId,\n  },\n];\n\nconst isSupported = () =>\n  Promise.resolve(!!(window.navigator && window.navigator.hid));\n\nconst getHID = (): HID => {\n  // $FlowFixMe\n  const { hid } = navigator;\n  if (!hid)\n    throw new TransportError(\n      \"navigator.hid is not supported\",\n      \"HIDNotSupported\"\n    );\n  return hid;\n};\n\nasync function requestLedgerDevices(): Promise<HIDDevice[]> {\n  const device = await getHID().requestDevice({\n    filters: ledgerDevices,\n  });\n  if (Array.isArray(device)) return device;\n  return [device];\n}\n\nasync function getLedgerDevices(): Promise<HIDDevice[]> {\n  const devices = await getHID().getDevices();\n  return devices.filter((d) => d.vendorId === ledgerUSBVendorId);\n}\n\nasync function getFirstLedgerDevice(): Promise<HIDDevice> {\n  const existingDevices = await getLedgerDevices();\n  if (existingDevices.length > 0) return existingDevices[0];\n  const devices = await requestLedgerDevices();\n  return devices[0];\n}\n/**\n * WebHID Transport implementation\n * @example\n * import TransportWebHID from \"@ledgerhq/hw-transport-webhid\";\n * ...\n * TransportWebHID.create().then(transport => ...)\n */\n\nexport default class TransportWebHID extends Transport {\n  device: HIDDevice;\n  deviceModel: DeviceModel | null | undefined;\n  channel = Math.floor(Math.random() * 0xffff);\n  packetSize = 64;\n\n  constructor(device: HIDDevice) {\n    super();\n    this.device = device;\n    this.deviceModel =\n      typeof device.productId === \"number\"\n        ? identifyUSBProductId(device.productId)\n        : undefined;\n    device.addEventListener(\"inputreport\", this.onInputReport);\n  }\n\n  inputs: Buffer[] = [];\n  inputCallback: ((arg0: Buffer) => void) | null | undefined;\n  read = (): Promise<Buffer> => {\n    if (this.inputs.length) {\n      return Promise.resolve((this.inputs.shift() as unknown) as Buffer);\n    }\n\n    return new Promise((success) => {\n      this.inputCallback = success;\n    });\n  };\n  onInputReport = (e: HIDInputReportEvent) => {\n    const buffer = Buffer.from(e.data.buffer);\n\n    if (this.inputCallback) {\n      this.inputCallback(buffer);\n      this.inputCallback = null;\n    } else {\n      this.inputs.push(buffer);\n    }\n  };\n\n  /**\n   * Check if WebUSB transport is supported.\n   */\n  static isSupported = isSupported;\n\n  /**\n   * List the WebUSB devices that was previously authorized by the user.\n   */\n  static list = getLedgerDevices;\n\n  /**\n   * Actively listen to WebUSB devices and emit ONE device\n   * that was either accepted before, if not it will trigger the native permission UI.\n   *\n   * Important: it must be called in the context of a UI click!\n   */\n  static listen = (\n    observer: Observer<DescriptorEvent<HIDDevice>>\n  ): Subscription => {\n    let unsubscribed = false;\n    getFirstLedgerDevice().then(\n      (device) => {\n        if (!device) {\n          observer.error(\n            new TransportOpenUserCancelled(\"Access denied to use Ledger device\")\n          );\n        } else if (!unsubscribed) {\n          const deviceModel =\n            typeof device.productId === \"number\"\n              ? identifyUSBProductId(device.productId)\n              : undefined;\n          observer.next({\n            type: \"add\",\n            descriptor: device,\n            deviceModel,\n          });\n          observer.complete();\n        }\n      },\n      (error) => {\n        observer.error(new TransportOpenUserCancelled(error.message));\n      }\n    );\n\n    function unsubscribe() {\n      unsubscribed = true;\n    }\n\n    return {\n      unsubscribe,\n    };\n  };\n\n  /**\n   * Similar to create() except it will always display the device permission (even if some devices are already accepted).\n   */\n  static async request() {\n    const [device] = await requestLedgerDevices();\n    return TransportWebHID.open(device);\n  }\n\n  /**\n   * Similar to create() except it will never display the device permission (it returns a Promise<?Transport>, null if it fails to find a device).\n   */\n  static async openConnected() {\n    const devices = await getLedgerDevices();\n    if (devices.length === 0) return null;\n    return TransportWebHID.open(devices[0]);\n  }\n\n  /**\n   * Create a Ledger transport with a HIDDevice\n   */\n  static async open(device: HIDDevice) {\n    await device.open();\n    const transport = new TransportWebHID(device);\n\n    const onDisconnect = (e) => {\n      if (device === e.device) {\n        getHID().removeEventListener(\"disconnect\", onDisconnect);\n\n        transport._emitDisconnect(new DisconnectedDevice());\n      }\n    };\n\n    getHID().addEventListener(\"disconnect\", onDisconnect);\n    return transport;\n  }\n\n  _disconnectEmitted = false;\n  _emitDisconnect = (e: Error) => {\n    if (this._disconnectEmitted) return;\n    this._disconnectEmitted = true;\n    this.emit(\"disconnect\", e);\n  };\n\n  /**\n   * Release the transport device\n   */\n  async close(): Promise<void> {\n    await this.exchangeBusyPromise;\n    this.device.removeEventListener(\"inputreport\", this.onInputReport);\n    await this.device.close();\n  }\n\n  /**\n   * Exchange with the device using APDU protocol.\n   * @param apdu\n   * @returns a promise of apdu response\n   */\n  exchange = async (apdu: Buffer): Promise<Buffer> => {\n    const b = await this.exchangeAtomicImpl(async () => {\n      const { channel, packetSize } = this;\n      log(\"apdu\", \"=> \" + apdu.toString(\"hex\"));\n      const framing = hidFraming(channel, packetSize);\n      // Write...\n      const blocks = framing.makeBlocks(apdu);\n\n      for (let i = 0; i < blocks.length; i++) {\n        await this.device.sendReport(0, blocks[i]);\n      }\n\n      // Read...\n      let result;\n      let acc;\n\n      while (!(result = framing.getReducedResult(acc))) {\n        const buffer = await this.read();\n        acc = framing.reduceResponse(acc, buffer);\n      }\n\n      log(\"apdu\", \"<= \" + result.toString(\"hex\"));\n      return result;\n    }).catch((e) => {\n      if (e && e.message && e.message.includes(\"write\")) {\n        this._emitDisconnect(e);\n\n        throw new DisconnectedDeviceDuringOperation(e.message);\n      }\n\n      throw e;\n    });\n    return b as Buffer;\n  };\n\n  setScrambleKey() {}\n}\n", "import semver from \"semver\";\n\n/**\n * The USB product IDs will be defined as MMII, encoding a model (MM) and an interface bitfield (II)\n *\n ** Model\n * Ledger Nano S : 0x10\n * Ledger Blue : 0x00\n * Ledger Nano X : 0x40\n *\n ** Interface support bitfield\n * Generic HID : 0x01\n * Keyboard HID : 0x02\n * U2F : 0x04\n * CCID : 0x08\n * WebUSB : 0x10\n */\nexport const IIGenericHID = 0x01;\nexport const IIKeyboardHID = 0x02;\nexport const IIU2F = 0x04;\nexport const IICCID = 0x08;\nexport const IIWebUSB = 0x10;\n\nexport enum DeviceModelId {\n  blue = \"blue\",\n  nanoS = \"nanoS\",\n  nanoSP = \"nanoSP\",\n  nanoX = \"nanoX\",\n  nanoFTS = \"nanoFTS\",\n}\n\nconst devices: { [key in DeviceModelId]: DeviceModel } = {\n  [DeviceModelId.blue]: {\n    id: DeviceModelId.blue,\n    productName: \"Ledger Blue\",\n    productIdMM: 0x00,\n    legacyUsbProductId: 0x0000,\n    usbOnly: true,\n    memorySize: 480 * 1024,\n    masks: [0x31000000, 0x31010000],\n    getBlockSize: (_firwareVersion: string): number => 4 * 1024,\n  },\n  [DeviceModelId.nanoS]: {\n    id: DeviceModelId.nanoS,\n    productName: \"Ledger Nano S\",\n    productIdMM: 0x10,\n    legacyUsbProductId: 0x0001,\n    usbOnly: true,\n    memorySize: 320 * 1024,\n    masks: [0x31100000],\n    getBlockSize: (firmwareVersion: string): number =>\n      semver.lt(semver.coerce(firmwareVersion) ?? \"\", \"2.0.0\")\n        ? 4 * 1024\n        : 2 * 1024,\n  },\n  [DeviceModelId.nanoSP]: {\n    id: DeviceModelId.nanoSP,\n    productName: \"Ledger Nano S Plus\",\n    productIdMM: 0x50,\n    legacyUsbProductId: 0x0005,\n    usbOnly: true,\n    memorySize: 1536 * 1024,\n    masks: [0x33100000],\n    getBlockSize: (_firmwareVersion: string): number => 32,\n  },\n  [DeviceModelId.nanoX]: {\n    id: DeviceModelId.nanoX,\n    productName: \"Ledger Nano X\",\n    productIdMM: 0x40,\n    legacyUsbProductId: 0x0004,\n    usbOnly: false,\n    memorySize: 2 * 1024 * 1024,\n    masks: [0x33000000],\n    getBlockSize: (_firwareVersion: string): number => 4 * 1024,\n    bluetoothSpec: [\n      {\n        serviceUuid: \"13d63400-2c97-0004-0000-4c6564676572\",\n        notifyUuid: \"13d63400-2c97-0004-0001-4c6564676572\",\n        writeUuid: \"13d63400-2c97-0004-0002-4c6564676572\",\n        writeCmdUuid: \"13d63400-2c97-0004-0003-4c6564676572\",\n      },\n    ],\n  },\n  [DeviceModelId.nanoFTS]: {\n    id: DeviceModelId.nanoFTS,\n    productName: \"Ledger Nano FTS\",\n    productIdMM: 0x60,\n    legacyUsbProductId: 0x0006,\n    usbOnly: false,\n    memorySize: 2 * 1024 * 1024, // ← ↓ TODO Update with actual values\n    masks: [0x33200000],\n    getBlockSize: (_firwareVersion: string): number => 4 * 1024,\n    bluetoothSpec: [\n      {\n        serviceUuid: \"13d63400-2c97-6004-0000-4c6564676572\",\n        notifyUuid: \"13d63400-2c97-6004-0001-4c6564676572\",\n        writeUuid: \"13d63400-2c97-6004-0002-4c6564676572\",\n        writeCmdUuid: \"13d63400-2c97-6004-0003-4c6564676572\",\n      },\n    ],\n  },\n};\n\nconst productMap = {\n  Blue: DeviceModelId.blue,\n  \"Nano S\": DeviceModelId.nanoS,\n  \"Nano S Plus\": DeviceModelId.nanoSP,\n  \"Nano X\": DeviceModelId.nanoX,\n  \"Nano FTS\": DeviceModelId.nanoFTS,\n};\n\nconst devicesList: DeviceModel[] = Object.values(devices);\n\n/**\n *\n */\nexport const ledgerUSBVendorId = 0x2c97;\n\n/**\n *\n */\nexport const getDeviceModel = (id: DeviceModelId): DeviceModel => {\n  const info = devices[id];\n  if (!info) throw new Error(\"device '\" + id + \"' does not exist\");\n  return info;\n};\n\n/**\n * Given a `targetId`, return the deviceModel associated to it,\n * based on the first two bytes.\n */\nexport const identifyTargetId = (\n  targetId: number\n): DeviceModel | null | undefined => {\n  const deviceModel = devicesList.find(({ masks }) =>\n    masks.find((mask) => (targetId & 0xffff0000) === mask)\n  );\n\n  return deviceModel;\n};\n\n/**\n *\n */\nexport const identifyUSBProductId = (\n  usbProductId: number\n): DeviceModel | null | undefined => {\n  const legacy = devicesList.find((d) => d.legacyUsbProductId === usbProductId);\n  if (legacy) return legacy;\n  const mm = usbProductId >> 8;\n  const deviceModel = devicesList.find((d) => d.productIdMM === mm);\n  return deviceModel;\n};\n\nexport const identifyProductName = (\n  productName: string\n): DeviceModel | null | undefined => {\n  const deviceModel = devicesList.find((d) => d.id === productMap[productName]);\n  return deviceModel;\n};\n\nconst bluetoothServices: string[] = [];\nconst serviceUuidToInfos: Record<string, BluetoothInfos> = {};\n\nfor (const id in devices) {\n  const deviceModel = devices[id];\n  const { bluetoothSpec } = deviceModel;\n  if (bluetoothSpec) {\n    for (let i = 0; i < bluetoothSpec.length; i++) {\n      const spec = bluetoothSpec[i];\n      bluetoothServices.push(spec.serviceUuid);\n      serviceUuidToInfos[spec.serviceUuid] = serviceUuidToInfos[\n        spec.serviceUuid.replace(/-/g, \"\")\n      ] = {\n        deviceModel,\n        ...spec,\n      };\n    }\n  }\n}\n\n/**\n *\n */\nexport const getBluetoothServiceUuids = (): string[] => bluetoothServices;\n\n/**\n *\n */\nexport const getInfosForServiceUuid = (\n  uuid: string\n): BluetoothInfos | undefined => serviceUuidToInfos[uuid.toLowerCase()];\n\n/**\n *\n */\nexport interface DeviceModel {\n  id: DeviceModelId;\n  productName: string;\n  productIdMM: number;\n  legacyUsbProductId: number;\n  usbOnly: boolean;\n  memorySize: number;\n  masks: number[];\n  // blockSize: number, // THIS FIELD IS DEPRECATED, use getBlockSize\n  getBlockSize: (firmwareVersion: string) => number;\n  bluetoothSpec?: {\n    serviceUuid: string;\n    writeUuid: string;\n    writeCmdUuid: string;\n    notifyUuid: string;\n  }[];\n}\n\n/**\n *\n */\nexport interface BluetoothInfos {\n  deviceModel: DeviceModel;\n  serviceUuid: string;\n  writeUuid: string;\n  writeCmdUuid: string;\n  notifyUuid: string;\n}\n", "/** Normal hydration that attaches to a DOM tree but does not diff it. */\nexport const MODE_HYDRATE = 1 << 5;\n/** Signifies this VNode suspended on the previous render */\nexport const MODE_SUSPENDED = 1 << 7;\n/** Indicates that this node needs to be inserted while patching children */\nexport const INSERT_VNODE = 1 << 2;\n/** Indicates a VNode has been matched with another VNode in the diff */\nexport const MATCHED = 1 << 1;\n\n/** Reset all mode flags */\nexport const RESET_MODE = ~(MODE_HYDRATE | MODE_SUSPENDED);\n\nexport const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\nexport const XHTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\nexport const MATH_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n\nexport const NULL = null;\nexport const UNDEFINED = undefined;\nexport const EMPTY_OBJ = /** @type {any} */ ({});\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL =\n\t/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n", "import { EMPTY_ARR } from './constants';\n\nexport const isArray = Array.isArray;\n\n/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\t// @ts-expect-error We change the type of `obj` to be `O & P`\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Remove a child node from its parent if attached. This is a workaround for\n * IE11 which doesn't support `Element.prototype.remove()`. Using this function\n * is smaller than including a dedicated polyfill.\n * @param {import('./index').ContainerNode} node The node to remove\n */\nexport function removeNode(node) {\n\tif (node && node.parentNode) node.parentNode.removeChild(node);\n}\n\nexport const slice = EMPTY_ARR.slice;\n", "import { _catchError } from './diff/catch-error';\n\n/**\n * The `option` object can potentially contain callback functions\n * that are called during various stages of our renderer. This is the\n * foundation on which all our addons like `preact/debug`, `preact/compat`,\n * and `preact/hooks` are based on. See the `Options` type in `internal.d.ts`\n * for a full list of available option hooks (most editors/IDEs allow you to\n * ctrl+click or cmd+click on mac the type definition below).\n * @type {import('./internal').Options}\n */\nconst options = {\n\t_catchError\n};\n\nexport default options;\n", "import { slice } from './util';\nimport options from './options';\nimport { NULL, UNDEFINED } from './constants';\n\nlet vnodeId = 0;\n\n/**\n * Create an virtual node (used for JSX)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component constructor for this\n * virtual node\n * @param {object | null | undefined} [props] The properties of the virtual node\n * @param {Array<import('.').ComponentChildren>} [children] The children of the\n * virtual node\n * @returns {import('./internal').VNode}\n */\nexport function createElement(type, props, children) {\n\tlet normalizedProps = {},\n\t\tkey,\n\t\tref,\n\t\ti;\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse normalizedProps[i] = props[i];\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\t// If a Component VNode, check for and apply defaultProps\n\t// Note: type may be undefined in development, must never error here.\n\tif (typeof type == 'function' && type.defaultProps != NULL) {\n\t\tfor (i in type.defaultProps) {\n\t\t\tif (normalizedProps[i] === UNDEFINED) {\n\t\t\t\tnormalizedProps[i] = type.defaultProps[i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn createVNode(type, normalizedProps, key, ref, NULL);\n}\n\n/**\n * Create a VNode (used internally by Preact)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * Constructor for this virtual node\n * @param {object | string | number | null} props The properties of this virtual node.\n * If this virtual node represents a text node, this is the text of the node (string or number).\n * @param {string | number | null} key The key for this virtual node, used when\n * diffing it against its children\n * @param {import('./internal').VNode[\"ref\"]} ref The ref property that will\n * receive a reference to its created child\n * @returns {import('./internal').VNode}\n */\nexport function createVNode(type, props, key, ref, original) {\n\t// V8 seems to be better at detecting type shapes if the object is allocated from the same call site\n\t// Do not inline into createElement and coerceToVNode!\n\t/** @type {import('./internal').VNode} */\n\tconst vnode = {\n\t\ttype,\n\t\tprops,\n\t\tkey,\n\t\tref,\n\t\t_children: NULL,\n\t\t_parent: NULL,\n\t\t_depth: 0,\n\t\t_dom: NULL,\n\t\t_component: NULL,\n\t\tconstructor: UNDEFINED,\n\t\t_original: original == NULL ? ++vnodeId : original,\n\t\t_index: -1,\n\t\t_flags: 0\n\t};\n\n\t// Only invoke the vnode hook if this was *not* a direct copy:\n\tif (original == NULL && options.vnode != NULL) options.vnode(vnode);\n\n\treturn vnode;\n}\n\nexport function createRef() {\n\treturn { current: NULL };\n}\n\nexport function Fragment(props) {\n\treturn props.children;\n}\n\n/**\n * Check if a the argument is a valid Preact VNode.\n * @param {*} vnode\n * @returns {vnode is VNode}\n */\nexport const isValidElement = vnode =>\n\tvnode != NULL && vnode.constructor == UNDEFINED;\n", "import { assign } from './util';\nimport { diff, commitRoot } from './diff/index';\nimport options from './options';\nimport { Fragment } from './create-element';\nimport { MODE_HYDRATE, NULL } from './constants';\n\n/**\n * Base Component class. Provides `setState()` and `forceUpdate()`, which\n * trigger rendering\n * @param {object} props The initial component props\n * @param {object} context The initial context from parent components'\n * getChildContext\n */\nexport function BaseComponent(props, context) {\n\tthis.props = props;\n\tthis.context = context;\n}\n\n/**\n * Update component state and schedule a re-render.\n * @this {import('./internal').Component}\n * @param {object | ((s: object, p: object) => object)} update A hash of state\n * properties to update with new values or a function that given the current\n * state and props returns a new partial state\n * @param {() => void} [callback] A function to be called once component state is\n * updated\n */\nBaseComponent.prototype.setState = function (update, callback) {\n\t// only clone state when copying to nextState the first time.\n\tlet s;\n\tif (this._nextState != NULL && this._nextState != this.state) {\n\t\ts = this._nextState;\n\t} else {\n\t\ts = this._nextState = assign({}, this.state);\n\t}\n\n\tif (typeof update == 'function') {\n\t\t// Some libraries like `immer` mark the current state as readonly,\n\t\t// preventing us from mutating it, so we need to clone it. See #2716\n\t\tupdate = update(assign({}, s), this.props);\n\t}\n\n\tif (update) {\n\t\tassign(s, update);\n\t}\n\n\t// Skip update if updater function returned null\n\tif (update == NULL) return;\n\n\tif (this._vnode) {\n\t\tif (callback) {\n\t\t\tthis._stateCallbacks.push(callback);\n\t\t}\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Immediately perform a synchronous re-render of the component\n * @this {import('./internal').Component}\n * @param {() => void} [callback] A function to be called after component is\n * re-rendered\n */\nBaseComponent.prototype.forceUpdate = function (callback) {\n\tif (this._vnode) {\n\t\t// Set render mode so that we can differentiate where the render request\n\t\t// is coming from. We need this because forceUpdate should never call\n\t\t// shouldComponentUpdate\n\t\tthis._force = true;\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n * Virtual DOM is generally constructed via [JSX](https://jasonformat.com/wtf-is-jsx).\n * @param {object} props Props (eg: JSX attributes) received from parent\n * element/component\n * @param {object} state The component's current state\n * @param {object} context Context object, as returned by the nearest\n * ancestor's `getChildContext()`\n * @returns {ComponentChildren | void}\n */\nBaseComponent.prototype.render = Fragment;\n\n/**\n * @param {import('./internal').VNode} vnode\n * @param {number | null} [childIndex]\n */\nexport function getDomSibling(vnode, childIndex) {\n\tif (childIndex == NULL) {\n\t\t// Use childIndex==null as a signal to resume the search from the vnode's sibling\n\t\treturn vnode._parent\n\t\t\t? getDomSibling(vnode._parent, vnode._index + 1)\n\t\t\t: NULL;\n\t}\n\n\tlet sibling;\n\tfor (; childIndex < vnode._children.length; childIndex++) {\n\t\tsibling = vnode._children[childIndex];\n\n\t\tif (sibling != NULL && sibling._dom != NULL) {\n\t\t\t// Since updateParentDomPointers keeps _dom pointer correct,\n\t\t\t// we can rely on _dom to tell us if this subtree contains a\n\t\t\t// rendered DOM node, and what the first rendered DOM node is\n\t\t\treturn sibling._dom;\n\t\t}\n\t}\n\n\t// If we get here, we have not found a DOM node in this vnode's children.\n\t// We must resume from this vnode's sibling (in it's parent _children array)\n\t// Only climb up and search the parent if we aren't searching through a DOM\n\t// VNode (meaning we reached the DOM parent of the original vnode that began\n\t// the search)\n\treturn typeof vnode.type == 'function' ? getDomSibling(vnode) : NULL;\n}\n\n/**\n * Trigger in-place re-rendering of a component.\n * @param {import('./internal').Component} component The component to rerender\n */\nfunction renderComponent(component) {\n\tlet oldVNode = component._vnode,\n\t\toldDom = oldVNode._dom,\n\t\tcommitQueue = [],\n\t\trefQueue = [];\n\n\tif (component._parentDom) {\n\t\tconst newVNode = assign({}, oldVNode);\n\t\tnewVNode._original = oldVNode._original + 1;\n\t\tif (options.vnode) options.vnode(newVNode);\n\n\t\tdiff(\n\t\t\tcomponent._parentDom,\n\t\t\tnewVNode,\n\t\t\toldVNode,\n\t\t\tcomponent._globalContext,\n\t\t\tcomponent._parentDom.namespaceURI,\n\t\t\toldVNode._flags & MODE_HYDRATE ? [oldDom] : NULL,\n\t\t\tcommitQueue,\n\t\t\toldDom == NULL ? getDomSibling(oldVNode) : oldDom,\n\t\t\t!!(oldVNode._flags & MODE_HYDRATE),\n\t\t\trefQueue\n\t\t);\n\n\t\tnewVNode._original = oldVNode._original;\n\t\tnewVNode._parent._children[newVNode._index] = newVNode;\n\t\tcommitRoot(commitQueue, newVNode, refQueue);\n\t\toldVNode._dom = oldVNode._parent = null;\n\n\t\tif (newVNode._dom != oldDom) {\n\t\t\tupdateParentDomPointers(newVNode);\n\t\t}\n\t}\n}\n\n/**\n * @param {import('./internal').VNode} vnode\n */\nfunction updateParentDomPointers(vnode) {\n\tif ((vnode = vnode._parent) != NULL && vnode._component != NULL) {\n\t\tvnode._dom = vnode._component.base = NULL;\n\t\tfor (let i = 0; i < vnode._children.length; i++) {\n\t\t\tlet child = vnode._children[i];\n\t\t\tif (child != NULL && child._dom != NULL) {\n\t\t\t\tvnode._dom = vnode._component.base = child._dom;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn updateParentDomPointers(vnode);\n\t}\n}\n\n/**\n * The render queue\n * @type {Array<import('./internal').Component>}\n */\nlet rerenderQueue = [];\n\n/*\n * The value of `Component.debounce` must asynchronously invoke the passed in callback. It is\n * important that contributors to Preact can consistently reason about what calls to `setState`, etc.\n * do, and when their effects will be applied. See the links below for some further reading on designing\n * asynchronous APIs.\n * * [Designing APIs for Asynchrony](https://blog.izs.me/2013/08/designing-apis-for-asynchrony)\n * * [Callbacks synchronous and asynchronous](https://blog.ometer.com/2011/07/24/callbacks-synchronous-and-asynchronous/)\n */\n\nlet prevDebounce;\n\nconst defer =\n\ttypeof Promise == 'function'\n\t\t? Promise.prototype.then.bind(Promise.resolve())\n\t\t: setTimeout;\n\n/**\n * Enqueue a rerender of a component\n * @param {import('./internal').Component} c The component to rerender\n */\nexport function enqueueRender(c) {\n\tif (\n\t\t(!c._dirty &&\n\t\t\t(c._dirty = true) &&\n\t\t\trerenderQueue.push(c) &&\n\t\t\t!process._rerenderCount++) ||\n\t\tprevDebounce != options.debounceRendering\n\t) {\n\t\tprevDebounce = options.debounceRendering;\n\t\t(prevDebounce || defer)(process);\n\t}\n}\n\n/**\n * @param {import('./internal').Component} a\n * @param {import('./internal').Component} b\n */\nconst depthSort = (a, b) => a._vnode._depth - b._vnode._depth;\n\n/** Flush the render queue by rerendering all queued components */\nfunction process() {\n\tlet c,\n\t\tl = 1;\n\n\t// Don't update `renderCount` yet. Keep its value non-zero to prevent unnecessary\n\t// process() calls from getting scheduled while `queue` is still being consumed.\n\twhile (rerenderQueue.length) {\n\t\t// Keep the rerender queue sorted by (depth, insertion order). The queue\n\t\t// will initially be sorted on the first iteration only if it has more than 1 item.\n\t\t//\n\t\t// New items can be added to the queue e.g. when rerendering a provider, so we want to\n\t\t// keep the order from top to bottom with those new items so we can handle them in a\n\t\t// single pass\n\t\tif (rerenderQueue.length > l) {\n\t\t\trerenderQueue.sort(depthSort);\n\t\t}\n\n\t\tc = rerenderQueue.shift();\n\t\tl = rerenderQueue.length;\n\n\t\tif (c._dirty) {\n\t\t\trenderComponent(c);\n\t\t}\n\t}\n\tprocess._rerenderCount = 0;\n}\n\nprocess._rerenderCount = 0;\n", "import { IS_NON_DIMENSIONAL, NULL, SVG_NAMESPACE } from '../constants';\nimport options from '../options';\n\nfunction setStyle(style, key, value) {\n\tif (key[0] == '-') {\n\t\tstyle.setProperty(key, value == NULL ? '' : value);\n\t} else if (value == NULL) {\n\t\tstyle[key] = '';\n\t} else if (typeof value != 'number' || IS_NON_DIMENSIONAL.test(key)) {\n\t\tstyle[key] = value;\n\t} else {\n\t\tstyle[key] = value + 'px';\n\t}\n}\n\nconst CAPTURE_REGEX = /(PointerCapture)$|Capture$/i;\n\n// A logical clock to solve issues like https://github.com/preactjs/preact/issues/3927.\n// When the DOM performs an event it leaves micro-ticks in between bubbling up which means that\n// an event can trigger on a newly reated DOM-node while the event bubbles up.\n//\n// Originally inspired by Vue\n// (https://github.com/vuejs/core/blob/caeb8a68811a1b0f79/packages/runtime-dom/src/modules/events.ts#L90-L101),\n// but modified to use a logical clock instead of Date.now() in case event handlers get attached\n// and events get dispatched during the same millisecond.\n//\n// The clock is incremented after each new event dispatch. This allows 1 000 000 new events\n// per second for over 280 years before the value reaches Number.MAX_SAFE_INTEGER (2**53 - 1).\nlet eventClock = 0;\n\n/**\n * Set a property value on a DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to modify\n * @param {string} name The name of the property to set\n * @param {*} value The value to set the property to\n * @param {*} oldValue The old value the property had\n * @param {string} namespace Whether or not this DOM node is an SVG node or not\n */\nexport function setProperty(dom, name, value, oldValue, namespace) {\n\tlet useCapture;\n\n\to: if (name == 'style') {\n\t\tif (typeof value == 'string') {\n\t\t\tdom.style.cssText = value;\n\t\t} else {\n\t\t\tif (typeof oldValue == 'string') {\n\t\t\t\tdom.style.cssText = oldValue = '';\n\t\t\t}\n\n\t\t\tif (oldValue) {\n\t\t\t\tfor (name in oldValue) {\n\t\t\t\t\tif (!(value && name in value)) {\n\t\t\t\t\t\tsetStyle(dom.style, name, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (value) {\n\t\t\t\tfor (name in value) {\n\t\t\t\t\tif (!oldValue || value[name] != oldValue[name]) {\n\t\t\t\t\t\tsetStyle(dom.style, name, value[name]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Benchmark for comparison: https://esbench.com/bench/574c954bdb965b9a00965ac6\n\telse if (name[0] == 'o' && name[1] == 'n') {\n\t\tuseCapture = name != (name = name.replace(CAPTURE_REGEX, '$1'));\n\t\tconst lowerCaseName = name.toLowerCase();\n\n\t\t// Infer correct casing for DOM built-in events:\n\t\tif (lowerCaseName in dom || name == 'onFocusOut' || name == 'onFocusIn')\n\t\t\tname = lowerCaseName.slice(2);\n\t\telse name = name.slice(2);\n\n\t\tif (!dom._listeners) dom._listeners = {};\n\t\tdom._listeners[name + useCapture] = value;\n\n\t\tif (value) {\n\t\t\tif (!oldValue) {\n\t\t\t\tvalue._attached = eventClock;\n\t\t\t\tdom.addEventListener(\n\t\t\t\t\tname,\n\t\t\t\t\tuseCapture ? eventProxyCapture : eventProxy,\n\t\t\t\t\tuseCapture\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tvalue._attached = oldValue._attached;\n\t\t\t}\n\t\t} else {\n\t\t\tdom.removeEventListener(\n\t\t\t\tname,\n\t\t\t\tuseCapture ? eventProxyCapture : eventProxy,\n\t\t\t\tuseCapture\n\t\t\t);\n\t\t}\n\t} else {\n\t\tif (namespace == SVG_NAMESPACE) {\n\t\t\t// Normalize incorrect prop usage for SVG:\n\t\t\t// - xlink:href / xlinkHref --> href (xlink:href was removed from SVG and isn't needed)\n\t\t\t// - className --> class\n\t\t\tname = name.replace(/xlink(H|:h)/, 'h').replace(/sName$/, 's');\n\t\t} else if (\n\t\t\tname != 'width' &&\n\t\t\tname != 'height' &&\n\t\t\tname != 'href' &&\n\t\t\tname != 'list' &&\n\t\t\tname != 'form' &&\n\t\t\t// Default value in browsers is `-1` and an empty string is\n\t\t\t// cast to `0` instead\n\t\t\tname != 'tabIndex' &&\n\t\t\tname != 'download' &&\n\t\t\tname != 'rowSpan' &&\n\t\t\tname != 'colSpan' &&\n\t\t\tname != 'role' &&\n\t\t\tname != 'popover' &&\n\t\t\tname in dom\n\t\t) {\n\t\t\ttry {\n\t\t\t\tdom[name] = value == NULL ? '' : value;\n\t\t\t\t// labelled break is 1b smaller here than a return statement (sorry)\n\t\t\t\tbreak o;\n\t\t\t} catch (e) {}\n\t\t}\n\n\t\t// aria- and data- attributes have no boolean representation.\n\t\t// A `false` value is different from the attribute not being\n\t\t// present, so we can't remove it. For non-boolean aria\n\t\t// attributes we could treat false as a removal, but the\n\t\t// amount of exceptions would cost too many bytes. On top of\n\t\t// that other frameworks generally stringify `false`.\n\n\t\tif (typeof value == 'function') {\n\t\t\t// never serialize functions as attribute values\n\t\t} else if (value != NULL && (value !== false || name[4] == '-')) {\n\t\t\tdom.setAttribute(name, name == 'popover' && value == true ? '' : value);\n\t\t} else {\n\t\t\tdom.removeAttribute(name);\n\t\t}\n\t}\n}\n\n/**\n * Create an event proxy function.\n * @param {boolean} useCapture Is the event handler for the capture phase.\n * @private\n */\nfunction createEventProxy(useCapture) {\n\t/**\n\t * Proxy an event to hooked event handlers\n\t * @param {import('../internal').PreactEvent} e The event object from the browser\n\t * @private\n\t */\n\treturn function (e) {\n\t\tif (this._listeners) {\n\t\t\tconst eventHandler = this._listeners[e.type + useCapture];\n\t\t\tif (e._dispatched == NULL) {\n\t\t\t\te._dispatched = eventClock++;\n\n\t\t\t\t// When `e._dispatched` is smaller than the time when the targeted event\n\t\t\t\t// handler was attached we know we have bubbled up to an element that was added\n\t\t\t\t// during patching the DOM.\n\t\t\t} else if (e._dispatched < eventHandler._attached) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn eventHandler(options.event ? options.event(e) : e);\n\t\t}\n\t};\n}\n\nconst eventProxy = createEventProxy(false);\nconst eventProxyCapture = createEventProxy(true);\n", "import { enqueueRender } from './component';\nimport { NULL } from './constants';\n\nexport let i = 0;\n\nexport function createContext(defaultValue) {\n\tfunction Context(props) {\n\t\tif (!this.getChildContext) {\n\t\t\t/** @type {Set<import('./internal').Component> | null} */\n\t\t\tlet subs = new Set();\n\t\t\tlet ctx = {};\n\t\t\tctx[Context._id] = this;\n\n\t\t\tthis.getChildContext = () => ctx;\n\n\t\t\tthis.componentWillUnmount = () => {\n\t\t\t\tsubs = NULL;\n\t\t\t};\n\n\t\t\tthis.shouldComponentUpdate = function (_props) {\n\t\t\t\t// @ts-expect-error even\n\t\t\t\tif (this.props.value != _props.value) {\n\t\t\t\t\tsubs.forEach(c => {\n\t\t\t\t\t\tc._force = true;\n\t\t\t\t\t\tenqueueRender(c);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.sub = c => {\n\t\t\t\tsubs.add(c);\n\t\t\t\tlet old = c.componentWillUnmount;\n\t\t\t\tc.componentWillUnmount = () => {\n\t\t\t\t\tif (subs) {\n\t\t\t\t\t\tsubs.delete(c);\n\t\t\t\t\t}\n\t\t\t\t\tif (old) old.call(c);\n\t\t\t\t};\n\t\t\t};\n\t\t}\n\n\t\treturn props.children;\n\t}\n\n\tContext._id = '__cC' + i++;\n\tContext._defaultValue = defaultValue;\n\n\t/** @type {import('./internal').FunctionComponent} */\n\tContext.Consumer = (props, contextValue) => {\n\t\treturn props.children(contextValue);\n\t};\n\n\t// we could also get rid of _contextRef entirely\n\tContext.Provider =\n\t\tContext._contextRef =\n\t\tContext.Consumer.contextType =\n\t\t\tContext;\n\n\treturn Context;\n}\n", "import { diff, unmount, applyRef } from './index';\nimport { createVNode, Fragment } from '../create-element';\nimport {\n\tEMPTY_OBJ,\n\tEMPTY_ARR,\n\tINSERT_VNODE,\n\tMATCHED,\n\tUNDEFINED,\n\tNULL\n} from '../constants';\nimport { isArray } from '../util';\nimport { getDomSibling } from '../component';\n\n/**\n * @typedef {import('../internal').ComponentChildren} ComponentChildren\n * @typedef {import('../internal').Component} Component\n * @typedef {import('../internal').PreactElement} PreactElement\n * @typedef {import('../internal').VNode} VNode\n */\n\n/**\n * Diff the children of a virtual node\n * @param {PreactElement} parentDom The DOM element whose children are being\n * diffed\n * @param {ComponentChildren[]} renderResult\n * @param {VNode} newParentVNode The new virtual node whose children should be\n * diff'ed against oldParentVNode\n * @param {VNode} oldParentVNode The old virtual node whose children should be\n * diff'ed against newParentVNode\n * @param {object} globalContext The current context object - modified by\n * getChildContext\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {PreactElement} oldDom The current attached DOM element any new dom\n * elements should be placed around. Likely `null` on first render (except when\n * hydrating). Can be a sibling DOM element when diffing Fragments that have\n * siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n */\nexport function diffChildren(\n\tparentDom,\n\trenderResult,\n\tnewParentVNode,\n\toldParentVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating,\n\trefQueue\n) {\n\tlet i,\n\t\t/** @type {VNode} */\n\t\toldVNode,\n\t\t/** @type {VNode} */\n\t\tchildVNode,\n\t\t/** @type {PreactElement} */\n\t\tnewDom,\n\t\t/** @type {PreactElement} */\n\t\tfirstChildDom;\n\n\t// This is a compression of oldParentVNode!=null && oldParentVNode != EMPTY_OBJ && oldParentVNode._children || EMPTY_ARR\n\t// as EMPTY_OBJ._children should be `undefined`.\n\t/** @type {VNode[]} */\n\tlet oldChildren = (oldParentVNode && oldParentVNode._children) || EMPTY_ARR;\n\n\tlet newChildrenLength = renderResult.length;\n\n\toldDom = constructNewChildrenArray(\n\t\tnewParentVNode,\n\t\trenderResult,\n\t\toldChildren,\n\t\toldDom,\n\t\tnewChildrenLength\n\t);\n\n\tfor (i = 0; i < newChildrenLength; i++) {\n\t\tchildVNode = newParentVNode._children[i];\n\t\tif (childVNode == NULL) continue;\n\n\t\t// At this point, constructNewChildrenArray has assigned _index to be the\n\t\t// matchingIndex for this VNode's oldVNode (or -1 if there is no oldVNode).\n\t\tif (childVNode._index == -1) {\n\t\t\toldVNode = EMPTY_OBJ;\n\t\t} else {\n\t\t\toldVNode = oldChildren[childVNode._index] || EMPTY_OBJ;\n\t\t}\n\n\t\t// Update childVNode._index to its final index\n\t\tchildVNode._index = i;\n\n\t\t// Morph the old element into the new one, but don't append it to the dom yet\n\t\tlet result = diff(\n\t\t\tparentDom,\n\t\t\tchildVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tnamespace,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\toldDom,\n\t\t\tisHydrating,\n\t\t\trefQueue\n\t\t);\n\n\t\t// Adjust DOM nodes\n\t\tnewDom = childVNode._dom;\n\t\tif (childVNode.ref && oldVNode.ref != childVNode.ref) {\n\t\t\tif (oldVNode.ref) {\n\t\t\t\tapplyRef(oldVNode.ref, NULL, childVNode);\n\t\t\t}\n\t\t\trefQueue.push(\n\t\t\t\tchildVNode.ref,\n\t\t\t\tchildVNode._component || newDom,\n\t\t\t\tchildVNode\n\t\t\t);\n\t\t}\n\n\t\tif (firstChildDom == NULL && newDom != NULL) {\n\t\t\tfirstChildDom = newDom;\n\t\t}\n\n\t\tlet shouldPlace = !!(childVNode._flags & INSERT_VNODE);\n\t\tif (shouldPlace || oldVNode._children === childVNode._children) {\n\t\t\toldDom = insert(childVNode, oldDom, parentDom, shouldPlace);\n\t\t} else if (typeof childVNode.type == 'function' && result !== UNDEFINED) {\n\t\t\toldDom = result;\n\t\t} else if (newDom) {\n\t\t\toldDom = newDom.nextSibling;\n\t\t}\n\n\t\t// Unset diffing flags\n\t\tchildVNode._flags &= ~(INSERT_VNODE | MATCHED);\n\t}\n\n\tnewParentVNode._dom = firstChildDom;\n\n\treturn oldDom;\n}\n\n/**\n * @param {VNode} newParentVNode\n * @param {ComponentChildren[]} renderResult\n * @param {VNode[]} oldChildren\n */\nfunction constructNewChildrenArray(\n\tnewParentVNode,\n\trenderResult,\n\toldChildren,\n\toldDom,\n\tnewChildrenLength\n) {\n\t/** @type {number} */\n\tlet i;\n\t/** @type {VNode} */\n\tlet childVNode;\n\t/** @type {VNode} */\n\tlet oldVNode;\n\n\tlet oldChildrenLength = oldChildren.length,\n\t\tremainingOldChildren = oldChildrenLength;\n\n\tlet skew = 0;\n\n\tnewParentVNode._children = new Array(newChildrenLength);\n\tfor (i = 0; i < newChildrenLength; i++) {\n\t\t// @ts-expect-error We are reusing the childVNode variable to hold both the\n\t\t// pre and post normalized childVNode\n\t\tchildVNode = renderResult[i];\n\n\t\tif (\n\t\t\tchildVNode == NULL ||\n\t\t\ttypeof childVNode == 'boolean' ||\n\t\t\ttypeof childVNode == 'function'\n\t\t) {\n\t\t\tnewParentVNode._children[i] = NULL;\n\t\t\tcontinue;\n\t\t}\n\t\t// If this newVNode is being reused (e.g. <div>{reuse}{reuse}</div>) in the same diff,\n\t\t// or we are rendering a component (e.g. setState) copy the oldVNodes so it can have\n\t\t// it's own DOM & etc. pointers\n\t\telse if (\n\t\t\ttypeof childVNode == 'string' ||\n\t\t\ttypeof childVNode == 'number' ||\n\t\t\t// eslint-disable-next-line valid-typeof\n\t\t\ttypeof childVNode == 'bigint' ||\n\t\t\tchildVNode.constructor == String\n\t\t) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tNULL,\n\t\t\t\tchildVNode,\n\t\t\t\tNULL,\n\t\t\t\tNULL,\n\t\t\t\tNULL\n\t\t\t);\n\t\t} else if (isArray(childVNode)) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tFragment,\n\t\t\t\t{ children: childVNode },\n\t\t\t\tNULL,\n\t\t\t\tNULL,\n\t\t\t\tNULL\n\t\t\t);\n\t\t} else if (childVNode.constructor == UNDEFINED && childVNode._depth > 0) {\n\t\t\t// VNode is already in use, clone it. This can happen in the following\n\t\t\t// scenario:\n\t\t\t//   const reuse = <div />\n\t\t\t//   <div>{reuse}<span />{reuse}</div>\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tchildVNode.type,\n\t\t\t\tchildVNode.props,\n\t\t\t\tchildVNode.key,\n\t\t\t\tchildVNode.ref ? childVNode.ref : NULL,\n\t\t\t\tchildVNode._original\n\t\t\t);\n\t\t} else {\n\t\t\tnewParentVNode._children[i] = childVNode;\n\t\t}\n\n\t\tconst skewedIndex = i + skew;\n\t\tchildVNode._parent = newParentVNode;\n\t\tchildVNode._depth = newParentVNode._depth + 1;\n\n\t\t// Temporarily store the matchingIndex on the _index property so we can pull\n\t\t// out the oldVNode in diffChildren. We'll override this to the VNode's\n\t\t// final index after using this property to get the oldVNode\n\t\tconst matchingIndex = (childVNode._index = findMatchingIndex(\n\t\t\tchildVNode,\n\t\t\toldChildren,\n\t\t\tskewedIndex,\n\t\t\tremainingOldChildren\n\t\t));\n\n\t\toldVNode = NULL;\n\t\tif (matchingIndex != -1) {\n\t\t\toldVNode = oldChildren[matchingIndex];\n\t\t\tremainingOldChildren--;\n\t\t\tif (oldVNode) {\n\t\t\t\toldVNode._flags |= MATCHED;\n\t\t\t}\n\t\t}\n\n\t\t// Here, we define isMounting for the purposes of the skew diffing\n\t\t// algorithm. Nodes that are unsuspending are considered mounting and we detect\n\t\t// this by checking if oldVNode._original == null\n\t\tconst isMounting = oldVNode == NULL || oldVNode._original == NULL;\n\n\t\tif (isMounting) {\n\t\t\tif (matchingIndex == -1) {\n\t\t\t\t// When the array of children is growing we need to decrease the skew\n\t\t\t\t// as we are adding a new element to the array.\n\t\t\t\t// Example:\n\t\t\t\t// [1, 2, 3] --> [0, 1, 2, 3]\n\t\t\t\t// oldChildren   newChildren\n\t\t\t\t//\n\t\t\t\t// The new element is at index 0, so our skew is 0,\n\t\t\t\t// we need to decrease the skew as we are adding a new element.\n\t\t\t\t// The decrease will cause us to compare the element at position 1\n\t\t\t\t// with value 1 with the element at position 0 with value 0.\n\t\t\t\t//\n\t\t\t\t// A linear concept is applied when the array is shrinking,\n\t\t\t\t// if the length is unchanged we can assume that no skew\n\t\t\t\t// changes are needed.\n\t\t\t\tif (newChildrenLength > oldChildrenLength) {\n\t\t\t\t\tskew--;\n\t\t\t\t} else if (newChildrenLength < oldChildrenLength) {\n\t\t\t\t\tskew++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If we are mounting a DOM VNode, mark it for insertion\n\t\t\tif (typeof childVNode.type != 'function') {\n\t\t\t\tchildVNode._flags |= INSERT_VNODE;\n\t\t\t}\n\t\t} else if (matchingIndex != skewedIndex) {\n\t\t\t// When we move elements around i.e. [0, 1, 2] --> [1, 0, 2]\n\t\t\t// --> we diff 1, we find it at position 1 while our skewed index is 0 and our skew is 0\n\t\t\t//     we set the skew to 1 as we found an offset.\n\t\t\t// --> we diff 0, we find it at position 0 while our skewed index is at 2 and our skew is 1\n\t\t\t//     this makes us increase the skew again.\n\t\t\t// --> we diff 2, we find it at position 2 while our skewed index is at 4 and our skew is 2\n\t\t\t//\n\t\t\t// this becomes an optimization question where currently we see a 1 element offset as an insertion\n\t\t\t// or deletion i.e. we optimize for [0, 1, 2] --> [9, 0, 1, 2]\n\t\t\t// while a more than 1 offset we see as a swap.\n\t\t\t// We could probably build heuristics for having an optimized course of action here as well, but\n\t\t\t// might go at the cost of some bytes.\n\t\t\t//\n\t\t\t// If we wanted to optimize for i.e. only swaps we'd just do the last two code-branches and have\n\t\t\t// only the first item be a re-scouting and all the others fall in their skewed counter-part.\n\t\t\t// We could also further optimize for swaps\n\t\t\tif (matchingIndex == skewedIndex - 1) {\n\t\t\t\tskew--;\n\t\t\t} else if (matchingIndex == skewedIndex + 1) {\n\t\t\t\tskew++;\n\t\t\t} else {\n\t\t\t\tif (matchingIndex > skewedIndex) {\n\t\t\t\t\tskew--;\n\t\t\t\t} else {\n\t\t\t\t\tskew++;\n\t\t\t\t}\n\n\t\t\t\t// Move this VNode's DOM if the original index (matchingIndex) doesn't\n\t\t\t\t// match the new skew index (i + new skew)\n\t\t\t\t// In the former two branches we know that it matches after skewing\n\t\t\t\tchildVNode._flags |= INSERT_VNODE;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Remove remaining oldChildren if there are any. Loop forwards so that as we\n\t// unmount DOM from the beginning of the oldChildren, we can adjust oldDom to\n\t// point to the next child, which needs to be the first DOM node that won't be\n\t// unmounted.\n\tif (remainingOldChildren) {\n\t\tfor (i = 0; i < oldChildrenLength; i++) {\n\t\t\toldVNode = oldChildren[i];\n\t\t\tif (oldVNode != NULL && (oldVNode._flags & MATCHED) == 0) {\n\t\t\t\tif (oldVNode._dom == oldDom) {\n\t\t\t\t\toldDom = getDomSibling(oldVNode);\n\t\t\t\t}\n\n\t\t\t\tunmount(oldVNode, oldVNode);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn oldDom;\n}\n\n/**\n * @param {VNode} parentVNode\n * @param {PreactElement} oldDom\n * @param {PreactElement} parentDom\n * @param {boolean} shouldPlace\n * @returns {PreactElement}\n */\nfunction insert(parentVNode, oldDom, parentDom, shouldPlace) {\n\t// Note: VNodes in nested suspended trees may be missing _children.\n\n\tif (typeof parentVNode.type == 'function') {\n\t\tlet children = parentVNode._children;\n\t\tfor (let i = 0; children && i < children.length; i++) {\n\t\t\tif (children[i]) {\n\t\t\t\t// If we enter this code path on sCU bailout, where we copy\n\t\t\t\t// oldVNode._children to newVNode._children, we need to update the old\n\t\t\t\t// children's _parent pointer to point to the newVNode (parentVNode\n\t\t\t\t// here).\n\t\t\t\tchildren[i]._parent = parentVNode;\n\t\t\t\toldDom = insert(children[i], oldDom, parentDom, shouldPlace);\n\t\t\t}\n\t\t}\n\n\t\treturn oldDom;\n\t} else if (parentVNode._dom != oldDom) {\n\t\tif (shouldPlace) {\n\t\t\tif (oldDom && parentVNode.type && !oldDom.parentNode) {\n\t\t\t\toldDom = getDomSibling(parentVNode);\n\t\t\t}\n\t\t\tparentDom.insertBefore(parentVNode._dom, oldDom || NULL);\n\t\t}\n\t\toldDom = parentVNode._dom;\n\t}\n\n\tdo {\n\t\toldDom = oldDom && oldDom.nextSibling;\n\t} while (oldDom != NULL && oldDom.nodeType == 8);\n\n\treturn oldDom;\n}\n\n/**\n * Flatten and loop through the children of a virtual node\n * @param {ComponentChildren} children The unflattened children of a virtual\n * node\n * @returns {VNode[]}\n */\nexport function toChildArray(children, out) {\n\tout = out || [];\n\tif (children == NULL || typeof children == 'boolean') {\n\t} else if (isArray(children)) {\n\t\tchildren.some(child => {\n\t\t\ttoChildArray(child, out);\n\t\t});\n\t} else {\n\t\tout.push(children);\n\t}\n\treturn out;\n}\n\n/**\n * @param {VNode} childVNode\n * @param {VNode[]} oldChildren\n * @param {number} skewedIndex\n * @param {number} remainingOldChildren\n * @returns {number}\n */\nfunction findMatchingIndex(\n\tchildVNode,\n\toldChildren,\n\tskewedIndex,\n\tremainingOldChildren\n) {\n\tconst key = childVNode.key;\n\tconst type = childVNode.type;\n\tlet oldVNode = oldChildren[skewedIndex];\n\tconst matched = oldVNode != NULL && (oldVNode._flags & MATCHED) == 0;\n\n\t// We only need to perform a search if there are more children\n\t// (remainingOldChildren) to search. However, if the oldVNode we just looked\n\t// at skewedIndex was not already used in this diff, then there must be at\n\t// least 1 other (so greater than 1) remainingOldChildren to attempt to match\n\t// against. So the following condition checks that ensuring\n\t// remainingOldChildren > 1 if the oldVNode is not already used/matched. Else\n\t// if the oldVNode was null or matched, then there could needs to be at least\n\t// 1 (aka `remainingOldChildren > 0`) children to find and compare against.\n\t//\n\t// If there is an unkeyed functional VNode, that isn't a built-in like our Fragment,\n\t// we should not search as we risk re-using state of an unrelated VNode. (reverted for now)\n\tlet shouldSearch =\n\t\t// (typeof type != 'function' || type === Fragment || key) &&\n\t\tremainingOldChildren > (matched ? 1 : 0);\n\n\tif (\n\t\t(oldVNode === NULL && key == null) ||\n\t\t(matched && key == oldVNode.key && type == oldVNode.type)\n\t) {\n\t\treturn skewedIndex;\n\t} else if (shouldSearch) {\n\t\tlet x = skewedIndex - 1;\n\t\tlet y = skewedIndex + 1;\n\t\twhile (x >= 0 || y < oldChildren.length) {\n\t\t\tconst childIndex = x >= 0 ? x-- : y++;\n\t\t\toldVNode = oldChildren[childIndex];\n\t\t\tif (\n\t\t\t\toldVNode != NULL &&\n\t\t\t\t(oldVNode._flags & MATCHED) == 0 &&\n\t\t\t\tkey == oldVNode.key &&\n\t\t\t\ttype == oldVNode.type\n\t\t\t) {\n\t\t\t\treturn childIndex;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn -1;\n}\n", "import {\n\tEMPTY_OBJ,\n\tMATH_NAMESPACE,\n\tMODE_HYDRATE,\n\tMODE_SUSPENDED,\n\tNULL,\n\tRESET_MODE,\n\tSVG_NAMESPACE,\n\tUNDEFINED,\n\tXHTML_NAMESPACE\n} from '../constants';\nimport { BaseComponent, getDomSibling } from '../component';\nimport { Fragment } from '../create-element';\nimport { diffChildren } from './children';\nimport { setProperty } from './props';\nimport { assign, isArray, removeNode, slice } from '../util';\nimport options from '../options';\n\n/**\n * @typedef {import('../internal').ComponentChildren} ComponentChildren\n * @typedef {import('../internal').Component} Component\n * @typedef {import('../internal').PreactElement} PreactElement\n * @typedef {import('../internal').VNode} VNode\n */\n\n/**\n * @template {any} T\n * @typedef {import('../internal').Ref<T>} Ref<T>\n */\n\n/**\n * Diff two virtual nodes and apply proper changes to the DOM\n * @param {PreactElement} parentDom The parent of the DOM element\n * @param {VNode} newVNode The new virtual node\n * @param {VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object. Modified by\n * getChildContext\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {PreactElement} oldDom The current attached DOM element any new dom\n * elements should be placed around. Likely `null` on first render (except when\n * hydrating). Can be a sibling DOM element when diffing Fragments that have\n * siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n */\nexport function diff(\n\tparentDom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating,\n\trefQueue\n) {\n\t/** @type {any} */\n\tlet tmp,\n\t\tnewType = newVNode.type;\n\n\t// When passing through createElement it assigns the object\n\t// constructor as undefined. This to prevent JSON-injection.\n\tif (newVNode.constructor != UNDEFINED) return NULL;\n\n\t// If the previous diff bailed out, resume creating/hydrating.\n\tif (oldVNode._flags & MODE_SUSPENDED) {\n\t\tisHydrating = !!(oldVNode._flags & MODE_HYDRATE);\n\t\toldDom = newVNode._dom = oldVNode._dom;\n\t\texcessDomChildren = [oldDom];\n\t}\n\n\tif ((tmp = options._diff)) tmp(newVNode);\n\n\touter: if (typeof newType == 'function') {\n\t\ttry {\n\t\t\tlet c, isNew, oldProps, oldState, snapshot, clearProcessingException;\n\t\t\tlet newProps = newVNode.props;\n\t\t\tconst isClassComponent =\n\t\t\t\t'prototype' in newType && newType.prototype.render;\n\n\t\t\t// Necessary for createContext api. Setting this property will pass\n\t\t\t// the context value as `this.context` just for this component.\n\t\t\ttmp = newType.contextType;\n\t\t\tlet provider = tmp && globalContext[tmp._id];\n\t\t\tlet componentContext = tmp\n\t\t\t\t? provider\n\t\t\t\t\t? provider.props.value\n\t\t\t\t\t: tmp._defaultValue\n\t\t\t\t: globalContext;\n\n\t\t\t// Get component and set it to `c`\n\t\t\tif (oldVNode._component) {\n\t\t\t\tc = newVNode._component = oldVNode._component;\n\t\t\t\tclearProcessingException = c._processingException = c._pendingError;\n\t\t\t} else {\n\t\t\t\t// Instantiate the new component\n\t\t\t\tif (isClassComponent) {\n\t\t\t\t\t// @ts-expect-error The check above verifies that newType is suppose to be constructed\n\t\t\t\t\tnewVNode._component = c = new newType(newProps, componentContext); // eslint-disable-line new-cap\n\t\t\t\t} else {\n\t\t\t\t\t// @ts-expect-error Trust me, Component implements the interface we want\n\t\t\t\t\tnewVNode._component = c = new BaseComponent(\n\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t);\n\t\t\t\t\tc.constructor = newType;\n\t\t\t\t\tc.render = doRender;\n\t\t\t\t}\n\t\t\t\tif (provider) provider.sub(c);\n\n\t\t\t\tif (!c.state) c.state = {};\n\t\t\t\tc._globalContext = globalContext;\n\t\t\t\tisNew = c._dirty = true;\n\t\t\t\tc._renderCallbacks = [];\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t}\n\n\t\t\t// Invoke getDerivedStateFromProps\n\t\t\tif (isClassComponent && c._nextState == NULL) {\n\t\t\t\tc._nextState = c.state;\n\t\t\t}\n\n\t\t\tif (isClassComponent && newType.getDerivedStateFromProps != NULL) {\n\t\t\t\tif (c._nextState == c.state) {\n\t\t\t\t\tc._nextState = assign({}, c._nextState);\n\t\t\t\t}\n\n\t\t\t\tassign(\n\t\t\t\t\tc._nextState,\n\t\t\t\t\tnewType.getDerivedStateFromProps(newProps, c._nextState)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toldProps = c.props;\n\t\t\toldState = c.state;\n\t\t\tc._vnode = newVNode;\n\n\t\t\t// Invoke pre-render lifecycle methods\n\t\t\tif (isNew) {\n\t\t\t\tif (\n\t\t\t\t\tisClassComponent &&\n\t\t\t\t\tnewType.getDerivedStateFromProps == NULL &&\n\t\t\t\t\tc.componentWillMount != NULL\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillMount();\n\t\t\t\t}\n\n\t\t\t\tif (isClassComponent && c.componentDidMount != NULL) {\n\t\t\t\t\tc._renderCallbacks.push(c.componentDidMount);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tisClassComponent &&\n\t\t\t\t\tnewType.getDerivedStateFromProps == NULL &&\n\t\t\t\t\tnewProps !== oldProps &&\n\t\t\t\t\tc.componentWillReceiveProps != NULL\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillReceiveProps(newProps, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\tnewVNode._original == oldVNode._original ||\n\t\t\t\t\t(!c._force &&\n\t\t\t\t\t\tc.shouldComponentUpdate != NULL &&\n\t\t\t\t\t\tc.shouldComponentUpdate(\n\t\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\t\tc._nextState,\n\t\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t\t) === false)\n\t\t\t\t) {\n\t\t\t\t\t// More info about this here: https://gist.github.com/JoviDeCroock/bec5f2ce93544d2e6070ef8e0036e4e8\n\t\t\t\t\tif (newVNode._original != oldVNode._original) {\n\t\t\t\t\t\t// When we are dealing with a bail because of sCU we have to update\n\t\t\t\t\t\t// the props, state and dirty-state.\n\t\t\t\t\t\t// when we are dealing with strict-equality we don't as the child could still\n\t\t\t\t\t\t// be dirtied see #3883\n\t\t\t\t\t\tc.props = newProps;\n\t\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t\t\tc._dirty = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t\tnewVNode._children.some(vnode => {\n\t\t\t\t\t\tif (vnode) vnode._parent = newVNode;\n\t\t\t\t\t});\n\n\t\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t\t}\n\t\t\t\t\tc._stateCallbacks = [];\n\n\t\t\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\t\t\tcommitQueue.push(c);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\n\t\t\t\tif (c.componentWillUpdate != NULL) {\n\t\t\t\t\tc.componentWillUpdate(newProps, c._nextState, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (isClassComponent && c.componentDidUpdate != NULL) {\n\t\t\t\t\tc._renderCallbacks.push(() => {\n\t\t\t\t\t\tc.componentDidUpdate(oldProps, oldState, snapshot);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tc.context = componentContext;\n\t\t\tc.props = newProps;\n\t\t\tc._parentDom = parentDom;\n\t\t\tc._force = false;\n\n\t\t\tlet renderHook = options._render,\n\t\t\t\tcount = 0;\n\t\t\tif (isClassComponent) {\n\t\t\t\tc.state = c._nextState;\n\t\t\t\tc._dirty = false;\n\n\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t}\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t} else {\n\t\t\t\tdo {\n\t\t\t\t\tc._dirty = false;\n\t\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\t\t// Handle setState called in render, see #2553\n\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t} while (c._dirty && ++count < 25);\n\t\t\t}\n\n\t\t\t// Handle setState called in render, see #2553\n\t\t\tc.state = c._nextState;\n\n\t\t\tif (c.getChildContext != NULL) {\n\t\t\t\tglobalContext = assign(assign({}, globalContext), c.getChildContext());\n\t\t\t}\n\n\t\t\tif (isClassComponent && !isNew && c.getSnapshotBeforeUpdate != NULL) {\n\t\t\t\tsnapshot = c.getSnapshotBeforeUpdate(oldProps, oldState);\n\t\t\t}\n\n\t\t\tlet isTopLevelFragment =\n\t\t\t\ttmp != NULL && tmp.type === Fragment && tmp.key == NULL;\n\t\t\tlet renderResult = tmp;\n\n\t\t\tif (isTopLevelFragment) {\n\t\t\t\trenderResult = cloneNode(tmp.props.children);\n\t\t\t}\n\n\t\t\toldDom = diffChildren(\n\t\t\t\tparentDom,\n\t\t\t\tisArray(renderResult) ? renderResult : [renderResult],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tnamespace,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\toldDom,\n\t\t\t\tisHydrating,\n\t\t\t\trefQueue\n\t\t\t);\n\n\t\t\tc.base = newVNode._dom;\n\n\t\t\t// We successfully rendered this VNode, unset any stored hydration/bailout state:\n\t\t\tnewVNode._flags &= RESET_MODE;\n\n\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\tcommitQueue.push(c);\n\t\t\t}\n\n\t\t\tif (clearProcessingException) {\n\t\t\t\tc._pendingError = c._processingException = NULL;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tnewVNode._original = NULL;\n\t\t\t// if hydrating or creating initial tree, bailout preserves DOM:\n\t\t\tif (isHydrating || excessDomChildren != NULL) {\n\t\t\t\tif (e.then) {\n\t\t\t\t\tnewVNode._flags |= isHydrating\n\t\t\t\t\t\t? MODE_HYDRATE | MODE_SUSPENDED\n\t\t\t\t\t\t: MODE_SUSPENDED;\n\n\t\t\t\t\twhile (oldDom && oldDom.nodeType == 8 && oldDom.nextSibling) {\n\t\t\t\t\t\toldDom = oldDom.nextSibling;\n\t\t\t\t\t}\n\n\t\t\t\t\texcessDomChildren[excessDomChildren.indexOf(oldDom)] = NULL;\n\t\t\t\t\tnewVNode._dom = oldDom;\n\t\t\t\t} else {\n\t\t\t\t\tfor (let i = excessDomChildren.length; i--; ) {\n\t\t\t\t\t\tremoveNode(excessDomChildren[i]);\n\t\t\t\t\t}\n\t\t\t\t\tmarkAsForce(newVNode);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\tif (!e.then) markAsForce(newVNode);\n\t\t\t}\n\t\t\toptions._catchError(e, newVNode, oldVNode);\n\t\t}\n\t} else if (\n\t\texcessDomChildren == NULL &&\n\t\tnewVNode._original == oldVNode._original\n\t) {\n\t\tnewVNode._children = oldVNode._children;\n\t\tnewVNode._dom = oldVNode._dom;\n\t} else {\n\t\toldDom = newVNode._dom = diffElementNodes(\n\t\t\toldVNode._dom,\n\t\t\tnewVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tnamespace,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\tisHydrating,\n\t\t\trefQueue\n\t\t);\n\t}\n\n\tif ((tmp = options.diffed)) tmp(newVNode);\n\n\treturn newVNode._flags & MODE_SUSPENDED ? undefined : oldDom;\n}\n\nfunction markAsForce(vnode) {\n\tif (vnode && vnode._component) vnode._component._force = true;\n\tif (vnode && vnode._children) vnode._children.forEach(markAsForce);\n}\n\n/**\n * @param {Array<Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {VNode} root\n */\nexport function commitRoot(commitQueue, root, refQueue) {\n\tfor (let i = 0; i < refQueue.length; i++) {\n\t\tapplyRef(refQueue[i], refQueue[++i], refQueue[++i]);\n\t}\n\n\tif (options._commit) options._commit(root, commitQueue);\n\n\tcommitQueue.some(c => {\n\t\ttry {\n\t\t\t// @ts-expect-error Reuse the commitQueue variable here so the type changes\n\t\t\tcommitQueue = c._renderCallbacks;\n\t\t\tc._renderCallbacks = [];\n\t\t\tcommitQueue.some(cb => {\n\t\t\t\t// @ts-expect-error See above comment on commitQueue\n\t\t\t\tcb.call(c);\n\t\t\t});\n\t\t} catch (e) {\n\t\t\toptions._catchError(e, c._vnode);\n\t\t}\n\t});\n}\n\nfunction cloneNode(node) {\n\tif (\n\t\ttypeof node != 'object' ||\n\t\tnode == NULL ||\n\t\t(node._depth && node._depth > 0)\n\t) {\n\t\treturn node;\n\t}\n\n\tif (isArray(node)) {\n\t\treturn node.map(cloneNode);\n\t}\n\n\treturn assign({}, node);\n}\n\n/**\n * Diff two virtual nodes representing DOM element\n * @param {PreactElement} dom The DOM element representing the virtual nodes\n * being diffed\n * @param {VNode} newVNode The new virtual node\n * @param {VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n * @returns {PreactElement}\n */\nfunction diffElementNodes(\n\tdom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\tisHydrating,\n\trefQueue\n) {\n\tlet oldProps = oldVNode.props || EMPTY_OBJ;\n\tlet newProps = newVNode.props;\n\tlet nodeType = /** @type {string} */ (newVNode.type);\n\t/** @type {any} */\n\tlet i;\n\t/** @type {{ __html?: string }} */\n\tlet newHtml;\n\t/** @type {{ __html?: string }} */\n\tlet oldHtml;\n\t/** @type {ComponentChildren} */\n\tlet newChildren;\n\tlet value;\n\tlet inputValue;\n\tlet checked;\n\n\t// Tracks entering and exiting namespaces when descending through the tree.\n\tif (nodeType == 'svg') namespace = SVG_NAMESPACE;\n\telse if (nodeType == 'math') namespace = MATH_NAMESPACE;\n\telse if (!namespace) namespace = XHTML_NAMESPACE;\n\n\tif (excessDomChildren != NULL) {\n\t\tfor (i = 0; i < excessDomChildren.length; i++) {\n\t\t\tvalue = excessDomChildren[i];\n\n\t\t\t// if newVNode matches an element in excessDomChildren or the `dom`\n\t\t\t// argument matches an element in excessDomChildren, remove it from\n\t\t\t// excessDomChildren so it isn't later removed in diffChildren\n\t\t\tif (\n\t\t\t\tvalue &&\n\t\t\t\t'setAttribute' in value == !!nodeType &&\n\t\t\t\t(nodeType ? value.localName == nodeType : value.nodeType == 3)\n\t\t\t) {\n\t\t\t\tdom = value;\n\t\t\t\texcessDomChildren[i] = NULL;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (dom == NULL) {\n\t\tif (nodeType == NULL) {\n\t\t\treturn document.createTextNode(newProps);\n\t\t}\n\n\t\tdom = document.createElementNS(\n\t\t\tnamespace,\n\t\t\tnodeType,\n\t\t\tnewProps.is && newProps\n\t\t);\n\n\t\t// we are creating a new node, so we can assume this is a new subtree (in\n\t\t// case we are hydrating), this deopts the hydrate\n\t\tif (isHydrating) {\n\t\t\tif (options._hydrationMismatch)\n\t\t\t\toptions._hydrationMismatch(newVNode, excessDomChildren);\n\t\t\tisHydrating = false;\n\t\t}\n\t\t// we created a new parent, so none of the previously attached children can be reused:\n\t\texcessDomChildren = NULL;\n\t}\n\n\tif (nodeType == NULL) {\n\t\t// During hydration, we still have to split merged text from SSR'd HTML.\n\t\tif (oldProps !== newProps && (!isHydrating || dom.data != newProps)) {\n\t\t\tdom.data = newProps;\n\t\t}\n\t} else {\n\t\t// If excessDomChildren was not null, repopulate it with the current element's children:\n\t\texcessDomChildren = excessDomChildren && slice.call(dom.childNodes);\n\n\t\t// If we are in a situation where we are not hydrating but are using\n\t\t// existing DOM (e.g. replaceNode) we should read the existing DOM\n\t\t// attributes to diff them\n\t\tif (!isHydrating && excessDomChildren != NULL) {\n\t\t\toldProps = {};\n\t\t\tfor (i = 0; i < dom.attributes.length; i++) {\n\t\t\t\tvalue = dom.attributes[i];\n\t\t\t\toldProps[value.name] = value.value;\n\t\t\t}\n\t\t}\n\n\t\tfor (i in oldProps) {\n\t\t\tvalue = oldProps[i];\n\t\t\tif (i == 'children') {\n\t\t\t} else if (i == 'dangerouslySetInnerHTML') {\n\t\t\t\toldHtml = value;\n\t\t\t} else if (!(i in newProps)) {\n\t\t\t\tif (\n\t\t\t\t\t(i == 'value' && 'defaultValue' in newProps) ||\n\t\t\t\t\t(i == 'checked' && 'defaultChecked' in newProps)\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tsetProperty(dom, i, NULL, value, namespace);\n\t\t\t}\n\t\t}\n\n\t\t// During hydration, props are not diffed at all (including dangerouslySetInnerHTML)\n\t\t// @TODO we should warn in debug mode when props don't match here.\n\t\tfor (i in newProps) {\n\t\t\tvalue = newProps[i];\n\t\t\tif (i == 'children') {\n\t\t\t\tnewChildren = value;\n\t\t\t} else if (i == 'dangerouslySetInnerHTML') {\n\t\t\t\tnewHtml = value;\n\t\t\t} else if (i == 'value') {\n\t\t\t\tinputValue = value;\n\t\t\t} else if (i == 'checked') {\n\t\t\t\tchecked = value;\n\t\t\t} else if (\n\t\t\t\t(!isHydrating || typeof value == 'function') &&\n\t\t\t\toldProps[i] !== value\n\t\t\t) {\n\t\t\t\tsetProperty(dom, i, value, oldProps[i], namespace);\n\t\t\t}\n\t\t}\n\n\t\t// If the new vnode didn't have dangerouslySetInnerHTML, diff its children\n\t\tif (newHtml) {\n\t\t\t// Avoid re-applying the same '__html' if it did not changed between re-render\n\t\t\tif (\n\t\t\t\t!isHydrating &&\n\t\t\t\t(!oldHtml ||\n\t\t\t\t\t(newHtml.__html != oldHtml.__html && newHtml.__html != dom.innerHTML))\n\t\t\t) {\n\t\t\t\tdom.innerHTML = newHtml.__html;\n\t\t\t}\n\n\t\t\tnewVNode._children = [];\n\t\t} else {\n\t\t\tif (oldHtml) dom.innerHTML = '';\n\n\t\t\tdiffChildren(\n\t\t\t\t// @ts-expect-error\n\t\t\t\tnewVNode.type == 'template' ? dom.content : dom,\n\t\t\t\tisArray(newChildren) ? newChildren : [newChildren],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tnodeType == 'foreignObject' ? XHTML_NAMESPACE : namespace,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\texcessDomChildren\n\t\t\t\t\t? excessDomChildren[0]\n\t\t\t\t\t: oldVNode._children && getDomSibling(oldVNode, 0),\n\t\t\t\tisHydrating,\n\t\t\t\trefQueue\n\t\t\t);\n\n\t\t\t// Remove children that are not part of any vnode.\n\t\t\tif (excessDomChildren != NULL) {\n\t\t\t\tfor (i = excessDomChildren.length; i--; ) {\n\t\t\t\t\tremoveNode(excessDomChildren[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// As above, don't diff props during hydration\n\t\tif (!isHydrating) {\n\t\t\ti = 'value';\n\t\t\tif (nodeType == 'progress' && inputValue == NULL) {\n\t\t\t\tdom.removeAttribute('value');\n\t\t\t} else if (\n\t\t\t\tinputValue != UNDEFINED &&\n\t\t\t\t// #2756 For the <progress>-element the initial value is 0,\n\t\t\t\t// despite the attribute not being present. When the attribute\n\t\t\t\t// is missing the progress bar is treated as indeterminate.\n\t\t\t\t// To fix that we'll always update it when it is 0 for progress elements\n\t\t\t\t(inputValue !== dom[i] ||\n\t\t\t\t\t(nodeType == 'progress' && !inputValue) ||\n\t\t\t\t\t// This is only for IE 11 to fix <select> value not being updated.\n\t\t\t\t\t// To avoid a stale select value we need to set the option.value\n\t\t\t\t\t// again, which triggers IE11 to re-evaluate the select value\n\t\t\t\t\t(nodeType == 'option' && inputValue != oldProps[i]))\n\t\t\t) {\n\t\t\t\tsetProperty(dom, i, inputValue, oldProps[i], namespace);\n\t\t\t}\n\n\t\t\ti = 'checked';\n\t\t\tif (checked != UNDEFINED && checked != dom[i]) {\n\t\t\t\tsetProperty(dom, i, checked, oldProps[i], namespace);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n/**\n * Invoke or update a ref, depending on whether it is a function or object ref.\n * @param {Ref<any> & { _unmount?: unknown }} ref\n * @param {any} value\n * @param {VNode} vnode\n */\nexport function applyRef(ref, value, vnode) {\n\ttry {\n\t\tif (typeof ref == 'function') {\n\t\t\tlet hasRefUnmount = typeof ref._unmount == 'function';\n\t\t\tif (hasRefUnmount) {\n\t\t\t\t// @ts-ignore TS doesn't like moving narrowing checks into variables\n\t\t\t\tref._unmount();\n\t\t\t}\n\n\t\t\tif (!hasRefUnmount || value != NULL) {\n\t\t\t\t// Store the cleanup function on the function\n\t\t\t\t// instance object itself to avoid shape\n\t\t\t\t// transitioning vnode\n\t\t\t\tref._unmount = ref(value);\n\t\t\t}\n\t\t} else ref.current = value;\n\t} catch (e) {\n\t\toptions._catchError(e, vnode);\n\t}\n}\n\n/**\n * Unmount a virtual node from the tree and apply DOM changes\n * @param {VNode} vnode The virtual node to unmount\n * @param {VNode} parentVNode The parent of the VNode that initiated the unmount\n * @param {boolean} [skipRemove] Flag that indicates that a parent node of the\n * current element is already detached from the DOM.\n */\nexport function unmount(vnode, parentVNode, skipRemove) {\n\tlet r;\n\tif (options.unmount) options.unmount(vnode);\n\n\tif ((r = vnode.ref)) {\n\t\tif (!r.current || r.current == vnode._dom) {\n\t\t\tapplyRef(r, NULL, parentVNode);\n\t\t}\n\t}\n\n\tif ((r = vnode._component) != NULL) {\n\t\tif (r.componentWillUnmount) {\n\t\t\ttry {\n\t\t\t\tr.componentWillUnmount();\n\t\t\t} catch (e) {\n\t\t\t\toptions._catchError(e, parentVNode);\n\t\t\t}\n\t\t}\n\n\t\tr.base = r._parentDom = NULL;\n\t}\n\n\tif ((r = vnode._children)) {\n\t\tfor (let i = 0; i < r.length; i++) {\n\t\t\tif (r[i]) {\n\t\t\t\tunmount(\n\t\t\t\t\tr[i],\n\t\t\t\t\tparentVNode,\n\t\t\t\t\tskipRemove || typeof vnode.type != 'function'\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (!skipRemove) {\n\t\tremoveNode(vnode._dom);\n\t}\n\n\tvnode._component = vnode._parent = vnode._dom = UNDEFINED;\n}\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n", "import { EMPTY_OBJ, NULL } from './constants';\nimport { commitRoot, diff } from './diff/index';\nimport { createElement, Fragment } from './create-element';\nimport options from './options';\nimport { slice } from './util';\n\n/**\n * Render a Preact virtual node into a DOM element\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to render into\n * @param {import('./internal').PreactElement | object} [replaceNode] Optional: Attempt to re-use an\n * existing DOM tree rooted at `replaceNode`\n */\nexport function render(vnode, parentDom, replaceNode) {\n\t// https://github.com/preactjs/preact/issues/3794\n\tif (parentDom == document) {\n\t\tparentDom = document.documentElement;\n\t}\n\n\tif (options._root) options._root(vnode, parentDom);\n\n\t// We abuse the `replaceNode` parameter in `hydrate()` to signal if we are in\n\t// hydration mode or not by passing the `hydrate` function instead of a DOM\n\t// element..\n\tlet isHydrating = typeof replaceNode == 'function';\n\n\t// To be able to support calling `render()` multiple times on the same\n\t// DOM node, we need to obtain a reference to the previous tree. We do\n\t// this by assigning a new `_children` property to DOM nodes which points\n\t// to the last rendered tree. By default this property is not present, which\n\t// means that we are mounting a new tree for the first time.\n\tlet oldVNode = isHydrating\n\t\t? NULL\n\t\t: (replaceNode && replaceNode._children) || parentDom._children;\n\n\tvnode = ((!isHydrating && replaceNode) || parentDom)._children =\n\t\tcreateElement(Fragment, NULL, [vnode]);\n\n\t// List of effects that need to be called after diffing.\n\tlet commitQueue = [],\n\t\trefQueue = [];\n\tdiff(\n\t\tparentDom,\n\t\t// Determine the new vnode tree and store it on the DOM element on\n\t\t// our custom `_children` property.\n\t\tvnode,\n\t\toldVNode || EMPTY_OBJ,\n\t\tEMPTY_OBJ,\n\t\tparentDom.namespaceURI,\n\t\t!isHydrating && replaceNode\n\t\t\t? [replaceNode]\n\t\t\t: oldVNode\n\t\t\t\t? NULL\n\t\t\t\t: parentDom.firstChild\n\t\t\t\t\t? slice.call(parentDom.childNodes)\n\t\t\t\t\t: NULL,\n\t\tcommitQueue,\n\t\t!isHydrating && replaceNode\n\t\t\t? replaceNode\n\t\t\t: oldVNode\n\t\t\t\t? oldVNode._dom\n\t\t\t\t: parentDom.firstChild,\n\t\tisHydrating,\n\t\trefQueue\n\t);\n\n\t// Flush all queued effects\n\tcommitRoot(commitQueue, vnode, refQueue);\n}\n\n/**\n * Update an existing DOM element with data from a Preact virtual node\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to update\n */\nexport function hydrate(vnode, parentDom) {\n\trender(vnode, parentDom, hydrate);\n}\n", "import { assign, slice } from './util';\nimport { createVNode } from './create-element';\nimport { NULL, UNDEFINED } from './constants';\n\n/**\n * Clones the given VNode, optionally adding attributes/props and replacing its\n * children.\n * @param {import('./internal').VNode} vnode The virtual DOM element to clone\n * @param {object} props Attributes/props to add when cloning\n * @param {Array<import('./internal').ComponentChildren>} rest Any additional arguments will be used\n * as replacement children.\n * @returns {import('./internal').VNode}\n */\nexport function cloneElement(vnode, props, children) {\n\tlet normalizedProps = assign({}, vnode.props),\n\t\tkey,\n\t\tref,\n\t\ti;\n\n\tlet defaultProps;\n\n\tif (vnode.type && vnode.type.defaultProps) {\n\t\tdefaultProps = vnode.type.defaultProps;\n\t}\n\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse if (props[i] === UNDEFINED && defaultProps != UNDEFINED) {\n\t\t\tnormalizedProps[i] = defaultProps[i];\n\t\t} else {\n\t\t\tnormalizedProps[i] = props[i];\n\t\t}\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\treturn createVNode(\n\t\tvnode.type,\n\t\tnormalizedProps,\n\t\tkey || vnode.key,\n\t\tref || vnode.ref,\n\t\tNULL\n\t);\n}\n", "import { NULL } from '../constants';\n\n/**\n * Find the closest error boundary to a thrown error and call it\n * @param {object} error The thrown value\n * @param {import('../internal').VNode} vnode The vnode that threw the error that was caught (except\n * for unmounting when this parameter is the highest parent that was being\n * unmounted)\n * @param {import('../internal').VNode} [oldVNode]\n * @param {import('../internal').ErrorInfo} [errorInfo]\n */\nexport function _catchError(error, vnode, oldVNode, errorInfo) {\n\t/** @type {import('../internal').Component} */\n\tlet component,\n\t\t/** @type {import('../internal').ComponentType} */\n\t\tctor,\n\t\t/** @type {boolean} */\n\t\thandled;\n\n\tfor (; (vnode = vnode._parent); ) {\n\t\tif ((component = vnode._component) && !component._processingException) {\n\t\t\ttry {\n\t\t\t\tctor = component.constructor;\n\n\t\t\t\tif (ctor && ctor.getDerivedStateFromError != NULL) {\n\t\t\t\t\tcomponent.setState(ctor.getDerivedStateFromError(error));\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\tif (component.componentDidCatch != NULL) {\n\t\t\t\t\tcomponent.componentDidCatch(error, errorInfo || {});\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\t// This is an error boundary. Mark it as having bailed out, and whether it was mid-hydration.\n\t\t\t\tif (handled) {\n\t\t\t\t\treturn (component._pendingError = component);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\t}\n\n\tthrow error;\n}\n", "const ENCODED_ENTITIES = /[\"&<]/;\n\n/** @param {string} str */\nexport function encodeEntities(str) {\n\t// Skip all work for strings with no entities needing encoding:\n\tif (str.length === 0 || ENCODED_ENTITIES.test(str) === false) return str;\n\n\tlet last = 0,\n\t\ti = 0,\n\t\tout = '',\n\t\tch = '';\n\n\t// Seek forward in str until the next entity char:\n\tfor (; i < str.length; i++) {\n\t\tswitch (str.charCodeAt(i)) {\n\t\t\tcase 34:\n\t\t\t\tch = '&quot;';\n\t\t\t\tbreak;\n\t\t\tcase 38:\n\t\t\t\tch = '&amp;';\n\t\t\t\tbreak;\n\t\t\tcase 60:\n\t\t\t\tch = '&lt;';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tcontinue;\n\t\t}\n\t\t// Append skipped/buffered characters and the encoded entity:\n\t\tif (i !== last) out += str.slice(last, i);\n\t\tout += ch;\n\t\t// Start the next seek/buffer after the entity's offset:\n\t\tlast = i + 1;\n\t}\n\tif (i !== last) out += str.slice(last, i);\n\treturn out;\n}\n", "/** Normal hydration that attaches to a DOM tree but does not diff it. */\nexport const MODE_HYDRATE = 1 << 5;\n/** Signifies this VNode suspended on the previous render */\nexport const MODE_SUSPENDED = 1 << 7;\n/** Indicates that this node needs to be inserted while patching children */\nexport const INSERT_VNODE = 1 << 2;\n/** Indicates a VNode has been matched with another VNode in the diff */\nexport const MATCHED = 1 << 1;\n\n/** Reset all mode flags */\nexport const RESET_MODE = ~(MODE_HYDRATE | MODE_SUSPENDED);\n\nexport const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\nexport const XHTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\nexport const MATH_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n\nexport const NULL = null;\nexport const UNDEFINED = undefined;\nexport const EMPTY_OBJ = /** @type {any} */ ({});\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL =\n\t/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n", "import { options, Fragment } from 'preact';\nimport { encodeEntities } from './utils';\nimport { IS_NON_DIMENSIONAL } from '../../src/constants';\n\nlet vnodeId = 0;\n\nconst isArray = Array.isArray;\n\n/**\n * @fileoverview\n * This file exports various methods that implement Babel's \"automatic\" JSX runtime API:\n * - jsx(type, props, key)\n * - jsxs(type, props, key)\n * - jsxDEV(type, props, key, __source, __self)\n *\n * The implementation of createVNode here is optimized for performance.\n * Benchmarks: https://esbench.com/bench/5f6b54a0b4632100a7dcd2b3\n */\n\n/**\n * JSX.Element factory used by Babel's {runtime:\"automatic\"} JSX transform\n * @param {VNode['type']} type\n * @param {VNode['props']} props\n * @param {VNode['key']} [key]\n * @param {unknown} [isStaticChildren]\n * @param {unknown} [__source]\n * @param {unknown} [__self]\n */\nfunction createVNode(type, props, key, isStaticChildren, __source, __self) {\n\tif (!props) props = {};\n\t// We'll want to preserve `ref` in props to get rid of the need for\n\t// forwardRef components in the future, but that should happen via\n\t// a separate PR.\n\tlet normalizedProps = props,\n\t\tref,\n\t\ti;\n\n\tif ('ref' in normalizedProps) {\n\t\tnormalizedProps = {};\n\t\tfor (i in props) {\n\t\t\tif (i == 'ref') {\n\t\t\t\tref = props[i];\n\t\t\t} else {\n\t\t\t\tnormalizedProps[i] = props[i];\n\t\t\t}\n\t\t}\n\t}\n\n\t/** @type {VNode & { __source: any; __self: any }} */\n\tconst vnode = {\n\t\ttype,\n\t\tprops: normalizedProps,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t_component: null,\n\t\tconstructor: undefined,\n\t\t_original: --vnodeId,\n\t\t_index: -1,\n\t\t_flags: 0,\n\t\t__source,\n\t\t__self\n\t};\n\n\t// If a Component VNode, check for and apply defaultProps.\n\t// Note: `type` is often a String, and can be `undefined` in development.\n\tif (typeof type === 'function' && (ref = type.defaultProps)) {\n\t\tfor (i in ref)\n\t\t\tif (normalizedProps[i] === undefined) {\n\t\t\t\tnormalizedProps[i] = ref[i];\n\t\t\t}\n\t}\n\n\tif (options.vnode) options.vnode(vnode);\n\treturn vnode;\n}\n\n/**\n * Create a template vnode. This function is not expected to be\n * used directly, but rather through a precompile JSX transform\n * @param {string[]} templates\n * @param  {Array<string | null | VNode>} exprs\n * @returns {VNode}\n */\nfunction jsxTemplate(templates, ...exprs) {\n\tconst vnode = createVNode(Fragment, { tpl: templates, exprs });\n\t// Bypass render to string top level Fragment optimization\n\tvnode.key = vnode._vnode;\n\treturn vnode;\n}\n\nconst JS_TO_CSS = {};\nconst CSS_REGEX = /[A-Z]/g;\n\n/**\n * Unwrap potential signals.\n * @param {*} value\n * @returns {*}\n */\nfunction normalizeAttrValue(value) {\n\treturn value !== null &&\n\t\ttypeof value === 'object' &&\n\t\ttypeof value.valueOf === 'function'\n\t\t? value.valueOf()\n\t\t: value;\n}\n\n/**\n * Serialize an HTML attribute to a string. This function is not\n * expected to be used directly, but rather through a precompile\n * JSX transform\n * @param {string} name The attribute name\n * @param {*} value The attribute value\n * @returns {string}\n */\nfunction jsxAttr(name, value) {\n\tif (options.attr) {\n\t\tconst result = options.attr(name, value);\n\t\tif (typeof result === 'string') return result;\n\t}\n\n\tvalue = normalizeAttrValue(value);\n\n\tif (name === 'ref' || name === 'key') return '';\n\tif (name === 'style' && typeof value === 'object') {\n\t\tlet str = '';\n\t\tfor (let prop in value) {\n\t\t\tlet val = value[prop];\n\t\t\tif (val != null && val !== '') {\n\t\t\t\tconst name =\n\t\t\t\t\tprop[0] == '-'\n\t\t\t\t\t\t? prop\n\t\t\t\t\t\t: JS_TO_CSS[prop] ||\n\t\t\t\t\t\t\t(JS_TO_CSS[prop] = prop.replace(CSS_REGEX, '-$&').toLowerCase());\n\n\t\t\t\tlet suffix = ';';\n\t\t\t\tif (\n\t\t\t\t\ttypeof val === 'number' &&\n\t\t\t\t\t// Exclude custom-attributes\n\t\t\t\t\t!name.startsWith('--') &&\n\t\t\t\t\t!IS_NON_DIMENSIONAL.test(name)\n\t\t\t\t) {\n\t\t\t\t\tsuffix = 'px;';\n\t\t\t\t}\n\t\t\t\tstr = str + name + ':' + val + suffix;\n\t\t\t}\n\t\t}\n\t\treturn name + '=\"' + encodeEntities(str) + '\"';\n\t}\n\n\tif (\n\t\tvalue == null ||\n\t\tvalue === false ||\n\t\ttypeof value === 'function' ||\n\t\ttypeof value === 'object'\n\t) {\n\t\treturn '';\n\t} else if (value === true) return name;\n\n\treturn name + '=\"' + encodeEntities('' + value) + '\"';\n}\n\n/**\n * Escape a dynamic child passed to `jsxTemplate`. This function\n * is not expected to be used directly, but rather through a\n * precompile JSX transform\n * @param {*} value\n * @returns {string | null | VNode | Array<string | null | VNode>}\n */\nfunction jsxEscape(value) {\n\tif (\n\t\tvalue == null ||\n\t\ttypeof value === 'boolean' ||\n\t\ttypeof value === 'function'\n\t) {\n\t\treturn null;\n\t}\n\n\tif (typeof value === 'object') {\n\t\t// Check for VNode\n\t\tif (value.constructor === undefined) return value;\n\n\t\tif (isArray(value)) {\n\t\t\tfor (let i = 0; i < value.length; i++) {\n\t\t\t\tvalue[i] = jsxEscape(value[i]);\n\t\t\t}\n\t\t\treturn value;\n\t\t}\n\t}\n\n\treturn encodeEntities('' + value);\n}\n\nexport {\n\tcreateVNode as jsx,\n\tcreateVNode as jsxs,\n\tcreateVNode as jsxDEV,\n\tFragment,\n\t// precompiled JSX transform\n\tjsxTemplate,\n\tjsxAttr,\n\tjsxEscape\n};\n", "import { options as _options } from 'preact';\n\n/** @type {number} */\nlet currentIndex;\n\n/** @type {import('./internal').Component} */\nlet currentComponent;\n\n/** @type {import('./internal').Component} */\nlet previousComponent;\n\n/** @type {number} */\nlet currentHook = 0;\n\n/** @type {Array<import('./internal').Component>} */\nlet afterPaintEffects = [];\n\n// Cast to use internal Options type\nconst options = /** @type {import('./internal').Options} */ (_options);\n\nlet oldBeforeDiff = options._diff;\nlet oldBeforeRender = options._render;\nlet oldAfterDiff = options.diffed;\nlet oldCommit = options._commit;\nlet oldBeforeUnmount = options.unmount;\nlet oldRoot = options._root;\n\n// We take the minimum timeout for requestAnimationFrame to ensure that\n// the callback is invoked after the next frame. 35ms is based on a 30hz\n// refresh rate, which is the minimum rate for a smooth user experience.\nconst RAF_TIMEOUT = 35;\nlet prevRaf;\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions._diff = vnode => {\n\tcurrentComponent = null;\n\tif (oldBeforeDiff) oldBeforeDiff(vnode);\n};\n\noptions._root = (vnode, parentDom) => {\n\tif (vnode && parentDom._children && parentDom._children._mask) {\n\t\tvnode._mask = parentDom._children._mask;\n\t}\n\n\tif (oldRoot) oldRoot(vnode, parentDom);\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions._render = vnode => {\n\tif (oldBeforeRender) oldBeforeRender(vnode);\n\n\tcurrentComponent = vnode._component;\n\tcurrentIndex = 0;\n\n\tconst hooks = currentComponent.__hooks;\n\tif (hooks) {\n\t\tif (previousComponent === currentComponent) {\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentComponent._renderCallbacks = [];\n\t\t\thooks._list.forEach(hookItem => {\n\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t}\n\t\t\t\thookItem._pendingArgs = hookItem._nextValue = undefined;\n\t\t\t});\n\t\t} else {\n\t\t\thooks._pendingEffects.forEach(invokeCleanup);\n\t\t\thooks._pendingEffects.forEach(invokeEffect);\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentIndex = 0;\n\t\t}\n\t}\n\tpreviousComponent = currentComponent;\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions.diffed = vnode => {\n\tif (oldAfterDiff) oldAfterDiff(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tif (c.__hooks._pendingEffects.length) afterPaint(afterPaintEffects.push(c));\n\t\tc.__hooks._list.forEach(hookItem => {\n\t\t\tif (hookItem._pendingArgs) {\n\t\t\t\thookItem._args = hookItem._pendingArgs;\n\t\t\t}\n\t\t\thookItem._pendingArgs = undefined;\n\t\t});\n\t}\n\tpreviousComponent = currentComponent = null;\n};\n\n// TODO: Improve typing of commitQueue parameter\n/** @type {(vnode: import('./internal').VNode, commitQueue: any) => void} */\noptions._commit = (vnode, commitQueue) => {\n\tcommitQueue.some(component => {\n\t\ttry {\n\t\t\tcomponent._renderCallbacks.forEach(invokeCleanup);\n\t\t\tcomponent._renderCallbacks = component._renderCallbacks.filter(cb =>\n\t\t\t\tcb._value ? invokeEffect(cb) : true\n\t\t\t);\n\t\t} catch (e) {\n\t\t\tcommitQueue.some(c => {\n\t\t\t\tif (c._renderCallbacks) c._renderCallbacks = [];\n\t\t\t});\n\t\t\tcommitQueue = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t});\n\n\tif (oldCommit) oldCommit(vnode, commitQueue);\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions.unmount = vnode => {\n\tif (oldBeforeUnmount) oldBeforeUnmount(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tlet hasErrored;\n\t\tc.__hooks._list.forEach(s => {\n\t\t\ttry {\n\t\t\t\tinvokeCleanup(s);\n\t\t\t} catch (e) {\n\t\t\t\thasErrored = e;\n\t\t\t}\n\t\t});\n\t\tc.__hooks = undefined;\n\t\tif (hasErrored) options._catchError(hasErrored, c._vnode);\n\t}\n};\n\n/**\n * Get a hook's state from the currentComponent\n * @param {number} index The index of the hook to get\n * @param {number} type The index of the hook to get\n * @returns {any}\n */\nfunction getHookState(index, type) {\n\tif (options._hook) {\n\t\toptions._hook(currentComponent, index, currentHook || type);\n\t}\n\tcurrentHook = 0;\n\n\t// Largely inspired by:\n\t// * https://github.com/michael-klein/funcy.js/blob/f6be73468e6ec46b0ff5aa3cc4c9baf72a29025a/src/hooks/core_hooks.mjs\n\t// * https://github.com/michael-klein/funcy.js/blob/650beaa58c43c33a74820a3c98b3c7079cf2e333/src/renderer.mjs\n\t// Other implementations to look at:\n\t// * https://codesandbox.io/s/mnox05qp8\n\tconst hooks =\n\t\tcurrentComponent.__hooks ||\n\t\t(currentComponent.__hooks = {\n\t\t\t_list: [],\n\t\t\t_pendingEffects: []\n\t\t});\n\n\tif (index >= hooks._list.length) {\n\t\thooks._list.push({});\n\t}\n\n\treturn hooks._list[index];\n}\n\n/**\n * @template {unknown} S\n * @param {import('./index').Dispatch<import('./index').StateUpdater<S>>} [initialState]\n * @returns {[S, (state: S) => void]}\n */\nexport function useState(initialState) {\n\tcurrentHook = 1;\n\treturn useReducer(invokeOrReturn, initialState);\n}\n\n/**\n * @template {unknown} S\n * @template {unknown} A\n * @param {import('./index').Reducer<S, A>} reducer\n * @param {import('./index').Dispatch<import('./index').StateUpdater<S>>} initialState\n * @param {(initialState: any) => void} [init]\n * @returns {[ S, (state: S) => void ]}\n */\nexport function useReducer(reducer, initialState, init) {\n\t/** @type {import('./internal').ReducerHookState} */\n\tconst hookState = getHookState(currentIndex++, 2);\n\thookState._reducer = reducer;\n\tif (!hookState._component) {\n\t\thookState._value = [\n\t\t\t!init ? invokeOrReturn(undefined, initialState) : init(initialState),\n\n\t\t\taction => {\n\t\t\t\tconst currentValue = hookState._nextValue\n\t\t\t\t\t? hookState._nextValue[0]\n\t\t\t\t\t: hookState._value[0];\n\t\t\t\tconst nextValue = hookState._reducer(currentValue, action);\n\n\t\t\t\tif (currentValue !== nextValue) {\n\t\t\t\t\thookState._nextValue = [nextValue, hookState._value[1]];\n\t\t\t\t\thookState._component.setState({});\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\n\t\thookState._component = currentComponent;\n\n\t\tif (!currentComponent._hasScuFromHooks) {\n\t\t\tcurrentComponent._hasScuFromHooks = true;\n\t\t\tlet prevScu = currentComponent.shouldComponentUpdate;\n\t\t\tconst prevCWU = currentComponent.componentWillUpdate;\n\n\t\t\t// If we're dealing with a forced update `shouldComponentUpdate` will\n\t\t\t// not be called. But we use that to update the hook values, so we\n\t\t\t// need to call it.\n\t\t\tcurrentComponent.componentWillUpdate = function (p, s, c) {\n\t\t\t\tif (this._force) {\n\t\t\t\t\tlet tmp = prevScu;\n\t\t\t\t\t// Clear to avoid other sCU hooks from being called\n\t\t\t\t\tprevScu = undefined;\n\t\t\t\t\tupdateHookState(p, s, c);\n\t\t\t\t\tprevScu = tmp;\n\t\t\t\t}\n\n\t\t\t\tif (prevCWU) prevCWU.call(this, p, s, c);\n\t\t\t};\n\n\t\t\t// This SCU has the purpose of bailing out after repeated updates\n\t\t\t// to stateful hooks.\n\t\t\t// we store the next value in _nextValue[0] and keep doing that for all\n\t\t\t// state setters, if we have next states and\n\t\t\t// all next states within a component end up being equal to their original state\n\t\t\t// we are safe to bail out for this specific component.\n\t\t\t/**\n\t\t\t *\n\t\t\t * @type {import('./internal').Component[\"shouldComponentUpdate\"]}\n\t\t\t */\n\t\t\t// @ts-ignore - We don't use TS to downtranspile\n\t\t\t// eslint-disable-next-line no-inner-declarations\n\t\t\tfunction updateHookState(p, s, c) {\n\t\t\t\tif (!hookState._component.__hooks) return true;\n\n\t\t\t\t/** @type {(x: import('./internal').HookState) => x is import('./internal').ReducerHookState} */\n\t\t\t\tconst isStateHook = x => !!x._component;\n\t\t\t\tconst stateHooks =\n\t\t\t\t\thookState._component.__hooks._list.filter(isStateHook);\n\n\t\t\t\tconst allHooksEmpty = stateHooks.every(x => !x._nextValue);\n\t\t\t\t// When we have no updated hooks in the component we invoke the previous SCU or\n\t\t\t\t// traverse the VDOM tree further.\n\t\t\t\tif (allHooksEmpty) {\n\t\t\t\t\treturn prevScu ? prevScu.call(this, p, s, c) : true;\n\t\t\t\t}\n\n\t\t\t\t// We check whether we have components with a nextValue set that\n\t\t\t\t// have values that aren't equal to one another this pushes\n\t\t\t\t// us to update further down the tree\n\t\t\t\tlet shouldUpdate = hookState._component.props !== p;\n\t\t\t\tstateHooks.forEach(hookItem => {\n\t\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\t\tconst currentValue = hookItem._value[0];\n\t\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t\t\thookItem._nextValue = undefined;\n\t\t\t\t\t\tif (currentValue !== hookItem._value[0]) shouldUpdate = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn prevScu\n\t\t\t\t\t? prevScu.call(this, p, s, c) || shouldUpdate\n\t\t\t\t\t: shouldUpdate;\n\t\t\t}\n\n\t\t\tcurrentComponent.shouldComponentUpdate = updateHookState;\n\t\t}\n\t}\n\n\treturn hookState._nextValue || hookState._value;\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 3);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent.__hooks._pendingEffects.push(state);\n\t}\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useLayoutEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 4);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent._renderCallbacks.push(state);\n\t}\n}\n\n/** @type {(initialValue: unknown) => unknown} */\nexport function useRef(initialValue) {\n\tcurrentHook = 5;\n\treturn useMemo(() => ({ current: initialValue }), []);\n}\n\n/**\n * @param {object} ref\n * @param {() => object} createHandle\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useImperativeHandle(ref, createHandle, args) {\n\tcurrentHook = 6;\n\tuseLayoutEffect(\n\t\t() => {\n\t\t\tif (typeof ref == 'function') {\n\t\t\t\tconst result = ref(createHandle());\n\t\t\t\treturn () => {\n\t\t\t\t\tref(null);\n\t\t\t\t\tif (result && typeof result == 'function') result();\n\t\t\t\t};\n\t\t\t} else if (ref) {\n\t\t\t\tref.current = createHandle();\n\t\t\t\treturn () => (ref.current = null);\n\t\t\t}\n\t\t},\n\t\targs == null ? args : args.concat(ref)\n\t);\n}\n\n/**\n * @template {unknown} T\n * @param {() => T} factory\n * @param {unknown[]} args\n * @returns {T}\n */\nexport function useMemo(factory, args) {\n\t/** @type {import('./internal').MemoHookState<T>} */\n\tconst state = getHookState(currentIndex++, 7);\n\tif (argsChanged(state._args, args)) {\n\t\tstate._value = factory();\n\t\tstate._args = args;\n\t\tstate._factory = factory;\n\t}\n\n\treturn state._value;\n}\n\n/**\n * @param {() => void} callback\n * @param {unknown[]} args\n * @returns {() => void}\n */\nexport function useCallback(callback, args) {\n\tcurrentHook = 8;\n\treturn useMemo(() => callback, args);\n}\n\n/**\n * @param {import('./internal').PreactContext} context\n */\nexport function useContext(context) {\n\tconst provider = currentComponent.context[context._id];\n\t// We could skip this call here, but than we'd not call\n\t// `options._hook`. We need to do that in order to make\n\t// the devtools aware of this hook.\n\t/** @type {import('./internal').ContextHookState} */\n\tconst state = getHookState(currentIndex++, 9);\n\t// The devtools needs access to the context object to\n\t// be able to pull of the default value when no provider\n\t// is present in the tree.\n\tstate._context = context;\n\tif (!provider) return context._defaultValue;\n\t// This is probably not safe to convert to \"!\"\n\tif (state._value == null) {\n\t\tstate._value = true;\n\t\tprovider.sub(currentComponent);\n\t}\n\treturn provider.props.value;\n}\n\n/**\n * Display a custom label for a custom hook for the devtools panel\n * @type {<T>(value: T, cb?: (value: T) => string | number) => void}\n */\nexport function useDebugValue(value, formatter) {\n\tif (options.useDebugValue) {\n\t\toptions.useDebugValue(\n\t\t\tformatter ? formatter(value) : /** @type {any}*/ (value)\n\t\t);\n\t}\n}\n\n/**\n * @param {(error: unknown, errorInfo: import('preact').ErrorInfo) => void} cb\n * @returns {[unknown, () => void]}\n */\nexport function useErrorBoundary(cb) {\n\t/** @type {import('./internal').ErrorBoundaryHookState} */\n\tconst state = getHookState(currentIndex++, 10);\n\tconst errState = useState();\n\tstate._value = cb;\n\tif (!currentComponent.componentDidCatch) {\n\t\tcurrentComponent.componentDidCatch = (err, errorInfo) => {\n\t\t\tif (state._value) state._value(err, errorInfo);\n\t\t\terrState[1](err);\n\t\t};\n\t}\n\treturn [\n\t\terrState[0],\n\t\t() => {\n\t\t\terrState[1](undefined);\n\t\t}\n\t];\n}\n\n/** @type {() => string} */\nexport function useId() {\n\t/** @type {import('./internal').IdHookState} */\n\tconst state = getHookState(currentIndex++, 11);\n\tif (!state._value) {\n\t\t// Grab either the root node or the nearest async boundary node.\n\t\t/** @type {import('./internal').VNode} */\n\t\tlet root = currentComponent._vnode;\n\t\twhile (root !== null && !root._mask && root._parent !== null) {\n\t\t\troot = root._parent;\n\t\t}\n\n\t\tlet mask = root._mask || (root._mask = [0, 0]);\n\t\tstate._value = 'P' + mask[0] + '-' + mask[1]++;\n\t}\n\n\treturn state._value;\n}\n\n/**\n * After paint effects consumer.\n */\nfunction flushAfterPaintEffects() {\n\tlet component;\n\twhile ((component = afterPaintEffects.shift())) {\n\t\tif (!component._parentDom || !component.__hooks) continue;\n\t\ttry {\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeCleanup);\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeEffect);\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t} catch (e) {\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t}\n}\n\nlet HAS_RAF = typeof requestAnimationFrame == 'function';\n\n/**\n * Schedule a callback to be invoked after the browser has a chance to paint a new frame.\n * Do this by combining requestAnimationFrame (rAF) + setTimeout to invoke a callback after\n * the next browser frame.\n *\n * Also, schedule a timeout in parallel to the the rAF to ensure the callback is invoked\n * even if RAF doesn't fire (for example if the browser tab is not visible)\n *\n * @param {() => void} callback\n */\nfunction afterNextFrame(callback) {\n\tconst done = () => {\n\t\tclearTimeout(timeout);\n\t\tif (HAS_RAF) cancelAnimationFrame(raf);\n\t\tsetTimeout(callback);\n\t};\n\tconst timeout = setTimeout(done, RAF_TIMEOUT);\n\n\tlet raf;\n\tif (HAS_RAF) {\n\t\traf = requestAnimationFrame(done);\n\t}\n}\n\n// Note: if someone used options.debounceRendering = requestAnimationFrame,\n// then effects will ALWAYS run on the NEXT frame instead of the current one, incurring a ~16ms delay.\n// Perhaps this is not such a big deal.\n/**\n * Schedule afterPaintEffects flush after the browser paints\n * @param {number} newQueueLength\n * @returns {void}\n */\nfunction afterPaint(newQueueLength) {\n\tif (newQueueLength === 1 || prevRaf !== options.requestAnimationFrame) {\n\t\tprevRaf = options.requestAnimationFrame;\n\t\t(prevRaf || afterNextFrame)(flushAfterPaintEffects);\n\t}\n}\n\n/**\n * @param {import('./internal').HookState} hook\n * @returns {void}\n */\nfunction invokeCleanup(hook) {\n\t// A hook cleanup can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\tlet cleanup = hook._cleanup;\n\tif (typeof cleanup == 'function') {\n\t\thook._cleanup = undefined;\n\t\tcleanup();\n\t}\n\n\tcurrentComponent = comp;\n}\n\n/**\n * Invoke a Hook's effect\n * @param {import('./internal').EffectHookState} hook\n * @returns {void}\n */\nfunction invokeEffect(hook) {\n\t// A hook call can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\thook._cleanup = hook._value();\n\tcurrentComponent = comp;\n}\n\n/**\n * @param {unknown[]} oldArgs\n * @param {unknown[]} newArgs\n * @returns {boolean}\n */\nfunction argsChanged(oldArgs, newArgs) {\n\treturn (\n\t\t!oldArgs ||\n\t\toldArgs.length !== newArgs.length ||\n\t\tnewArgs.some((arg, index) => arg !== oldArgs[index])\n\t);\n}\n\n/**\n * @template Arg\n * @param {Arg} arg\n * @param {(arg: Arg) => any} f\n * @returns {any}\n */\nfunction invokeOrReturn(arg, f) {\n\treturn typeof f == 'function' ? f(arg) : f;\n}\n", "/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Check if two objects have a different shape\n * @param {object} a\n * @param {object} b\n * @returns {boolean}\n */\nexport function shallowDiffers(a, b) {\n\tfor (let i in a) if (i !== '__source' && !(i in b)) return true;\n\tfor (let i in b) if (i !== '__source' && a[i] !== b[i]) return true;\n\treturn false;\n}\n\n/**\n * Check if two values are the same value\n * @param {*} x\n * @param {*} y\n * @returns {boolean}\n */\nexport function is(x, y) {\n\treturn (x === y && (x !== 0 || 1 / x === 1 / y)) || (x !== x && y !== y);\n}\n", "import { useState, useLayoutEffect, useEffect } from 'preact/hooks';\nimport { is } from './util';\n\n/**\n * This is taken from https://github.com/facebook/react/blob/main/packages/use-sync-external-store/src/useSyncExternalStoreShimClient.js#L84\n * on a high level this cuts out the warnings, ... and attempts a smaller implementation\n * @typedef {{ _value: any; _getSnapshot: () => any }} Store\n */\nexport function useSyncExternalStore(subscribe, getSnapshot) {\n\tconst value = getSnapshot();\n\n\t/**\n\t * @typedef {{ _instance: Store }} StoreRef\n\t * @type {[StoreRef, (store: StoreRef) => void]}\n\t */\n\tconst [{ _instance }, forceUpdate] = useState({\n\t\t_instance: { _value: value, _getSnapshot: getSnapshot }\n\t});\n\n\tuseLayoutEffect(() => {\n\t\t_instance._value = value;\n\t\t_instance._getSnapshot = getSnapshot;\n\n\t\tif (didSnapshotChange(_instance)) {\n\t\t\tforceUpdate({ _instance });\n\t\t}\n\t}, [subscribe, value, getSnapshot]);\n\n\tuseEffect(() => {\n\t\tif (didSnapshotChange(_instance)) {\n\t\t\tforceUpdate({ _instance });\n\t\t}\n\n\t\treturn subscribe(() => {\n\t\t\tif (didSnapshotChange(_instance)) {\n\t\t\t\tforceUpdate({ _instance });\n\t\t\t}\n\t\t});\n\t}, [subscribe]);\n\n\treturn value;\n}\n\n/** @type {(inst: Store) => boolean} */\nfunction didSnapshotChange(inst) {\n\tconst latestGetSnapshot = inst._getSnapshot;\n\tconst prevValue = inst._value;\n\ttry {\n\t\tconst nextValue = latestGetSnapshot();\n\t\treturn !is(prevValue, nextValue);\n\t} catch (error) {\n\t\treturn true;\n\t}\n}\n\nexport function startTransition(cb) {\n\tcb();\n}\n\nexport function useDeferredValue(val) {\n\treturn val;\n}\n\nexport function useTransition() {\n\treturn [false, startTransition];\n}\n\n// TODO: in theory this should be done after a VNode is diffed as we want to insert\n// styles/... before it attaches\nexport const useInsertionEffect = useLayoutEffect;\n", "import { Component } from 'preact';\nimport { shallowDiffers } from './util';\n\n/**\n * Component class with a predefined `shouldComponentUpdate` implementation\n */\nexport function PureComponent(p, c) {\n\tthis.props = p;\n\tthis.context = c;\n}\nPureComponent.prototype = new Component();\n// Some third-party libraries check if this property is present\nPureComponent.prototype.isPureReactComponent = true;\nPureComponent.prototype.shouldComponentUpdate = function (props, state) {\n\treturn shallowDiffers(this.props, props) || shallowDiffers(this.state, state);\n};\n", "import { createElement } from 'preact';\nimport { shallowDiffers } from './util';\n\n/**\n * Memoize a component, so that it only updates when the props actually have\n * changed. This was previously known as `React.pure`.\n * @param {import('./internal').FunctionComponent} c functional component\n * @param {(prev: object, next: object) => boolean} [comparer] Custom equality function\n * @returns {import('./internal').FunctionComponent}\n */\nexport function memo(c, comparer) {\n\tfunction shouldUpdate(nextProps) {\n\t\tlet ref = this.props.ref;\n\t\tlet updateRef = ref == nextProps.ref;\n\t\tif (!updateRef && ref) {\n\t\t\tref.call ? ref(null) : (ref.current = null);\n\t\t}\n\n\t\tif (!comparer) {\n\t\t\treturn shallowDiffers(this.props, nextProps);\n\t\t}\n\n\t\treturn !comparer(this.props, nextProps) || !updateRef;\n\t}\n\n\tfunction Memoed(props) {\n\t\tthis.shouldComponentUpdate = shouldUpdate;\n\t\treturn createElement(c, props);\n\t}\n\tMemoed.displayName = 'Memo(' + (c.displayName || c.name) + ')';\n\tMemoed.prototype.isReactComponent = true;\n\tMemoed._forwarded = true;\n\tMemoed.type = c;\n\treturn Memoed;\n}\n", "import { options } from 'preact';\nimport { assign } from './util';\n\nlet oldDiffHook = options._diff;\noptions._diff = vnode => {\n\tif (vnode.type && vnode.type._forwarded && vnode.ref) {\n\t\tvnode.props.ref = vnode.ref;\n\t\tvnode.ref = null;\n\t}\n\tif (oldDiffHook) oldDiffHook(vnode);\n};\n\nexport const REACT_FORWARD_SYMBOL =\n\t(typeof Symbol != 'undefined' &&\n\t\tSymbol.for &&\n\t\tSymbol.for('react.forward_ref')) ||\n\t0xf47;\n\n/**\n * Pass ref down to a child. This is mainly used in libraries with HOCs that\n * wrap components. Using `forwardRef` there is an easy way to get a reference\n * of the wrapped component instead of one of the wrapper itself.\n * @param {import('./index').ForwardFn} fn\n * @returns {import('./internal').FunctionComponent}\n */\nexport function forwardRef(fn) {\n\tfunction Forwarded(props) {\n\t\tlet clone = assign({}, props);\n\t\tdelete clone.ref;\n\t\treturn fn(clone, props.ref || null);\n\t}\n\n\t// mobx-react checks for this being present\n\tForwarded.$$typeof = REACT_FORWARD_SYMBOL;\n\t// mobx-react heavily relies on implementation details.\n\t// It expects an object here with a `render` property,\n\t// and prototype.render will fail. Without this\n\t// mobx-react throws.\n\tForwarded.render = fn;\n\n\tForwarded.prototype.isReactComponent = Forwarded._forwarded = true;\n\tForwarded.displayName = 'ForwardRef(' + (fn.displayName || fn.name) + ')';\n\treturn Forwarded;\n}\n", "import { toChildArray } from 'preact';\n\nconst mapFn = (children, fn) => {\n\tif (children == null) return null;\n\treturn toChildArray(toChildArray(children).map(fn));\n};\n\n// This API is completely unnecessary for Preact, so it's basically passthrough.\nexport const Children = {\n\tmap: mapFn,\n\tforEach: mapFn,\n\tcount(children) {\n\t\treturn children ? toChildArray(children).length : 0;\n\t},\n\tonly(children) {\n\t\tconst normalized = toChildArray(children);\n\t\tif (normalized.length !== 1) throw 'Children.only';\n\t\treturn normalized[0];\n\t},\n\ttoArray: toChildArray\n};\n", "import { Component, createElement, options, Fragment } from 'preact';\nimport { MODE_HYDRATE } from '../../src/constants';\nimport { assign } from './util';\n\nconst oldCatchError = options._catchError;\noptions._catchError = function (error, newVNode, oldVNode, errorInfo) {\n\tif (error.then) {\n\t\t/** @type {import('./internal').Component} */\n\t\tlet component;\n\t\tlet vnode = newVNode;\n\n\t\tfor (; (vnode = vnode._parent); ) {\n\t\t\tif ((component = vnode._component) && component._childDidSuspend) {\n\t\t\t\tif (newVNode._dom == null) {\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t}\n\t\t\t\t// Don't call oldCatchError if we found a Suspense\n\t\t\t\treturn component._childDidSuspend(error, newVNode);\n\t\t\t}\n\t\t}\n\t}\n\toldCatchError(error, newVNode, oldVNode, errorInfo);\n};\n\nconst oldUnmount = options.unmount;\noptions.unmount = function (vnode) {\n\t/** @type {import('./internal').Component} */\n\tconst component = vnode._component;\n\tif (component && component._onResolve) {\n\t\tcomponent._onResolve();\n\t}\n\n\t// if the component is still hydrating\n\t// most likely it is because the component is suspended\n\t// we set the vnode.type as `null` so that it is not a typeof function\n\t// so the unmount will remove the vnode._dom\n\tif (component && vnode._flags & MODE_HYDRATE) {\n\t\tvnode.type = null;\n\t}\n\n\tif (oldUnmount) oldUnmount(vnode);\n};\n\nfunction detachedClone(vnode, detachedParent, parentDom) {\n\tif (vnode) {\n\t\tif (vnode._component && vnode._component.__hooks) {\n\t\t\tvnode._component.__hooks._list.forEach(effect => {\n\t\t\t\tif (typeof effect._cleanup == 'function') effect._cleanup();\n\t\t\t});\n\n\t\t\tvnode._component.__hooks = null;\n\t\t}\n\n\t\tvnode = assign({}, vnode);\n\t\tif (vnode._component != null) {\n\t\t\tif (vnode._component._parentDom === parentDom) {\n\t\t\t\tvnode._component._parentDom = detachedParent;\n\t\t\t}\n\n\t\t\tvnode._component._force = true;\n\n\t\t\tvnode._component = null;\n\t\t}\n\n\t\tvnode._children =\n\t\t\tvnode._children &&\n\t\t\tvnode._children.map(child =>\n\t\t\t\tdetachedClone(child, detachedParent, parentDom)\n\t\t\t);\n\t}\n\n\treturn vnode;\n}\n\nfunction removeOriginal(vnode, detachedParent, originalParent) {\n\tif (vnode && originalParent) {\n\t\tvnode._original = null;\n\t\tvnode._children =\n\t\t\tvnode._children &&\n\t\t\tvnode._children.map(child =>\n\t\t\t\tremoveOriginal(child, detachedParent, originalParent)\n\t\t\t);\n\n\t\tif (vnode._component) {\n\t\t\tif (vnode._component._parentDom === detachedParent) {\n\t\t\t\tif (vnode._dom) {\n\t\t\t\t\toriginalParent.appendChild(vnode._dom);\n\t\t\t\t}\n\t\t\t\tvnode._component._force = true;\n\t\t\t\tvnode._component._parentDom = originalParent;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn vnode;\n}\n\n// having custom inheritance instead of a class here saves a lot of bytes\nexport function Suspense() {\n\t// we do not call super here to golf some bytes...\n\tthis._pendingSuspensionCount = 0;\n\tthis._suspenders = null;\n\tthis._detachOnNextRender = null;\n}\n\n// Things we do here to save some bytes but are not proper JS inheritance:\n// - call `new Component()` as the prototype\n// - do not set `Suspense.prototype.constructor` to `Suspense`\nSuspense.prototype = new Component();\n\n/**\n * @this {import('./internal').SuspenseComponent}\n * @param {Promise} promise The thrown promise\n * @param {import('./internal').VNode<any, any>} suspendingVNode The suspending component\n */\nSuspense.prototype._childDidSuspend = function (promise, suspendingVNode) {\n\tconst suspendingComponent = suspendingVNode._component;\n\n\t/** @type {import('./internal').SuspenseComponent} */\n\tconst c = this;\n\n\tif (c._suspenders == null) {\n\t\tc._suspenders = [];\n\t}\n\tc._suspenders.push(suspendingComponent);\n\n\tconst resolve = suspended(c._vnode);\n\n\tlet resolved = false;\n\tconst onResolved = () => {\n\t\tif (resolved) return;\n\n\t\tresolved = true;\n\t\tsuspendingComponent._onResolve = null;\n\n\t\tif (resolve) {\n\t\t\tresolve(onSuspensionComplete);\n\t\t} else {\n\t\t\tonSuspensionComplete();\n\t\t}\n\t};\n\n\tsuspendingComponent._onResolve = onResolved;\n\n\tconst onSuspensionComplete = () => {\n\t\tif (!--c._pendingSuspensionCount) {\n\t\t\t// If the suspension was during hydration we don't need to restore the\n\t\t\t// suspended children into the _children array\n\t\t\tif (c.state._suspended) {\n\t\t\t\tconst suspendedVNode = c.state._suspended;\n\t\t\t\tc._vnode._children[0] = removeOriginal(\n\t\t\t\t\tsuspendedVNode,\n\t\t\t\t\tsuspendedVNode._component._parentDom,\n\t\t\t\t\tsuspendedVNode._component._originalParentDom\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tc.setState({ _suspended: (c._detachOnNextRender = null) });\n\n\t\t\tlet suspended;\n\t\t\twhile ((suspended = c._suspenders.pop())) {\n\t\t\t\tsuspended.forceUpdate();\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * We do not set `suspended: true` during hydration because we want the actual markup\n\t * to remain on screen and hydrate it when the suspense actually gets resolved.\n\t * While in non-hydration cases the usual fallback -> component flow would occour.\n\t */\n\tif (\n\t\t!c._pendingSuspensionCount++ &&\n\t\t!(suspendingVNode._flags & MODE_HYDRATE)\n\t) {\n\t\tc.setState({ _suspended: (c._detachOnNextRender = c._vnode._children[0]) });\n\t}\n\tpromise.then(onResolved, onResolved);\n};\n\nSuspense.prototype.componentWillUnmount = function () {\n\tthis._suspenders = [];\n};\n\n/**\n * @this {import('./internal').SuspenseComponent}\n * @param {import('./internal').SuspenseComponent[\"props\"]} props\n * @param {import('./internal').SuspenseState} state\n */\nSuspense.prototype.render = function (props, state) {\n\tif (this._detachOnNextRender) {\n\t\t// When the Suspense's _vnode was created by a call to createVNode\n\t\t// (i.e. due to a setState further up in the tree)\n\t\t// it's _children prop is null, in this case we \"forget\" about the parked vnodes to detach\n\t\tif (this._vnode._children) {\n\t\t\tconst detachedParent = document.createElement('div');\n\t\t\tconst detachedComponent = this._vnode._children[0]._component;\n\t\t\tthis._vnode._children[0] = detachedClone(\n\t\t\t\tthis._detachOnNextRender,\n\t\t\t\tdetachedParent,\n\t\t\t\t(detachedComponent._originalParentDom = detachedComponent._parentDom)\n\t\t\t);\n\t\t}\n\n\t\tthis._detachOnNextRender = null;\n\t}\n\n\t// Wrap fallback tree in a VNode that prevents itself from being marked as aborting mid-hydration:\n\t/** @type {import('./internal').VNode} */\n\tconst fallback =\n\t\tstate._suspended && createElement(Fragment, null, props.fallback);\n\tif (fallback) fallback._flags &= ~MODE_HYDRATE;\n\n\treturn [\n\t\tcreateElement(Fragment, null, state._suspended ? null : props.children),\n\t\tfallback\n\t];\n};\n\n/**\n * Checks and calls the parent component's _suspended method, passing in the\n * suspended vnode. This is a way for a parent (e.g. SuspenseList) to get notified\n * that one of its children/descendants suspended.\n *\n * The parent MAY return a callback. The callback will get called when the\n * suspension resolves, notifying the parent of the fact.\n * Moreover, the callback gets function `unsuspend` as a parameter. The resolved\n * child descendant will not actually get unsuspended until `unsuspend` gets called.\n * This is a way for the parent to delay unsuspending.\n *\n * If the parent does not return a callback then the resolved vnode\n * gets unsuspended immediately when it resolves.\n *\n * @param {import('./internal').VNode} vnode\n * @returns {((unsuspend: () => void) => void)?}\n */\nexport function suspended(vnode) {\n\t/** @type {import('./internal').Component} */\n\tlet component = vnode._parent._component;\n\treturn component && component._suspended && component._suspended(vnode);\n}\n\nexport function lazy(loader) {\n\tlet prom;\n\tlet component = null;\n\tlet error;\n\tlet resolved;\n\n\tfunction Lazy(props) {\n\t\tif (!prom) {\n\t\t\tprom = loader();\n\t\t\tprom.then(\n\t\t\t\texports => {\n\t\t\t\t\tif (exports) {\n\t\t\t\t\t\tcomponent = exports.default || exports;\n\t\t\t\t\t}\n\t\t\t\t\tresolved = true;\n\t\t\t\t},\n\t\t\t\te => {\n\t\t\t\t\terror = e;\n\t\t\t\t\tresolved = true;\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tif (error) {\n\t\t\tthrow error;\n\t\t}\n\n\t\tif (!resolved) {\n\t\t\tthrow prom;\n\t\t}\n\n\t\treturn component ? createElement(component, props) : null;\n\t}\n\n\tLazy.displayName = 'Lazy';\n\tLazy._forwarded = true;\n\treturn Lazy;\n}\n", "import { Component, toChildArray } from 'preact';\nimport { suspended } from './suspense.js';\n\n// Indexes to linked list nodes (nodes are stored as arrays to save bytes).\nconst SUSPENDED_COUNT = 0;\nconst RESOLVED_COUNT = 1;\nconst NEXT_NODE = 2;\n\n// Having custom inheritance instead of a class here saves a lot of bytes.\nexport function SuspenseList() {\n\tthis._next = null;\n\tthis._map = null;\n}\n\n// Mark one of child's earlier suspensions as resolved.\n// Some pending callbacks may become callable due to this\n// (e.g. the last suspended descendant gets resolved when\n// revealOrder === 'together'). Process those callbacks as well.\nconst resolve = (list, child, node) => {\n\tif (++node[RESOLVED_COUNT] === node[SUSPENDED_COUNT]) {\n\t\t// The number a child (or any of its descendants) has been suspended\n\t\t// matches the number of times it's been resolved. Therefore we\n\t\t// mark the child as completely resolved by deleting it from ._map.\n\t\t// This is used to figure out when *all* children have been completely\n\t\t// resolved when revealOrder is 'together'.\n\t\tlist._map.delete(child);\n\t}\n\n\t// If revealOrder is falsy then we can do an early exit, as the\n\t// callbacks won't get queued in the node anyway.\n\t// If revealOrder is 'together' then also do an early exit\n\t// if all suspended descendants have not yet been resolved.\n\tif (\n\t\t!list.props.revealOrder ||\n\t\t(list.props.revealOrder[0] === 't' && list._map.size)\n\t) {\n\t\treturn;\n\t}\n\n\t// Walk the currently suspended children in order, calling their\n\t// stored callbacks on the way. Stop if we encounter a child that\n\t// has not been completely resolved yet.\n\tnode = list._next;\n\twhile (node) {\n\t\twhile (node.length > 3) {\n\t\t\tnode.pop()();\n\t\t}\n\t\tif (node[RESOLVED_COUNT] < node[SUSPENDED_COUNT]) {\n\t\t\tbreak;\n\t\t}\n\t\tlist._next = node = node[NEXT_NODE];\n\t}\n};\n\n// Things we do here to save some bytes but are not proper JS inheritance:\n// - call `new Component()` as the prototype\n// - do not set `Suspense.prototype.constructor` to `Suspense`\nSuspenseList.prototype = new Component();\n\nSuspenseList.prototype._suspended = function (child) {\n\tconst list = this;\n\tconst delegated = suspended(list._vnode);\n\n\tlet node = list._map.get(child);\n\tnode[SUSPENDED_COUNT]++;\n\n\treturn unsuspend => {\n\t\tconst wrappedUnsuspend = () => {\n\t\t\tif (!list.props.revealOrder) {\n\t\t\t\t// Special case the undefined (falsy) revealOrder, as there\n\t\t\t\t// is no need to coordinate a specific order or unsuspends.\n\t\t\t\tunsuspend();\n\t\t\t} else {\n\t\t\t\tnode.push(unsuspend);\n\t\t\t\tresolve(list, child, node);\n\t\t\t}\n\t\t};\n\t\tif (delegated) {\n\t\t\tdelegated(wrappedUnsuspend);\n\t\t} else {\n\t\t\twrappedUnsuspend();\n\t\t}\n\t};\n};\n\nSuspenseList.prototype.render = function (props) {\n\tthis._next = null;\n\tthis._map = new Map();\n\n\tconst children = toChildArray(props.children);\n\tif (props.revealOrder && props.revealOrder[0] === 'b') {\n\t\t// If order === 'backwards' (or, well, anything starting with a 'b')\n\t\t// then flip the child list around so that the last child will be\n\t\t// the first in the linked list.\n\t\tchildren.reverse();\n\t}\n\t// Build the linked list. Iterate through the children in reverse order\n\t// so that `_next` points to the first linked list node to be resolved.\n\tfor (let i = children.length; i--; ) {\n\t\t// Create a new linked list node as an array of form:\n\t\t// \t[suspended_count, resolved_count, next_node]\n\t\t// where suspended_count and resolved_count are numeric counters for\n\t\t// keeping track how many times a node has been suspended and resolved.\n\t\t//\n\t\t// Note that suspended_count starts from 1 instead of 0, so we can block\n\t\t// processing callbacks until componentDidMount has been called. In a sense\n\t\t// node is suspended at least until componentDidMount gets called!\n\t\t//\n\t\t// Pending callbacks are added to the end of the node:\n\t\t// \t[suspended_count, resolved_count, next_node, callback_0, callback_1, ...]\n\t\tthis._map.set(children[i], (this._next = [1, 0, this._next]));\n\t}\n\treturn props.children;\n};\n\nSuspenseList.prototype.componentDidUpdate =\n\tSuspenseList.prototype.componentDidMount = function () {\n\t\t// Iterate through all children after mounting for two reasons:\n\t\t// 1. As each node[SUSPENDED_COUNT] starts from 1, this iteration increases\n\t\t//    each node[RELEASED_COUNT] by 1, therefore balancing the counters.\n\t\t//    The nodes can now be completely consumed from the linked list.\n\t\t// 2. Handle nodes that might have gotten resolved between render and\n\t\t//    componentDidMount.\n\t\tthis._map.forEach((node, child) => {\n\t\t\tresolve(this, child, node);\n\t\t});\n\t};\n", "/** Normal hydration that attaches to a DOM tree but does not diff it. */\nexport const MODE_HYDRATE = 1 << 5;\n/** Signifies this VNode suspended on the previous render */\nexport const MODE_SUSPENDED = 1 << 7;\n/** Indicates that this node needs to be inserted while patching children */\nexport const INSERT_VNODE = 1 << 2;\n/** Indicates a VNode has been matched with another VNode in the diff */\nexport const MATCHED = 1 << 1;\n\n/** Reset all mode flags */\nexport const RESET_MODE = ~(MODE_HYDRATE | MODE_SUSPENDED);\n\nexport const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\nexport const XHTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\nexport const MATH_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n\nexport const NULL = null;\nexport const UNDEFINED = undefined;\nexport const EMPTY_OBJ = /** @type {any} */ ({});\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL =\n\t/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n", "import { createElement, render } from 'preact';\n\n/**\n * @param {import('../../src/index').RenderableProps<{ context: any }>} props\n */\nfunction ContextProvider(props) {\n\tthis.getChildContext = () => props.context;\n\treturn props.children;\n}\n\n/**\n * Portal component\n * @this {import('./internal').Component}\n * @param {object | null | undefined} props\n *\n * TODO: use createRoot() instead of fake root\n */\nfunction Portal(props) {\n\tconst _this = this;\n\tlet container = props._container;\n\n\t_this.componentWillUnmount = function () {\n\t\trender(null, _this._temp);\n\t\t_this._temp = null;\n\t\t_this._container = null;\n\t};\n\n\t// When we change container we should clear our old container and\n\t// indicate a new mount.\n\tif (_this._container && _this._container !== container) {\n\t\t_this.componentWillUnmount();\n\t}\n\n\tif (!_this._temp) {\n\t\t// Ensure the element has a mask for useId invocations\n\t\tlet root = _this._vnode;\n\t\twhile (root !== null && !root._mask && root._parent !== null) {\n\t\t\troot = root._parent;\n\t\t}\n\n\t\t_this._container = container;\n\n\t\t// Create a fake DOM parent node that manages a subset of `container`'s children:\n\t\t_this._temp = {\n\t\t\tnodeType: 1,\n\t\t\tparentNode: container,\n\t\t\tchildNodes: [],\n\t\t\t_children: { _mask: root._mask },\n\t\t\tcontains: () => true,\n\t\t\tinsertBefore(child, before) {\n\t\t\t\tthis.childNodes.push(child);\n\t\t\t\t_this._container.insertBefore(child, before);\n\t\t\t},\n\t\t\tremoveChild(child) {\n\t\t\t\tthis.childNodes.splice(this.childNodes.indexOf(child) >>> 1, 1);\n\t\t\t\t_this._container.removeChild(child);\n\t\t\t}\n\t\t};\n\t}\n\n\t// Render our wrapping element into temp.\n\trender(\n\t\tcreateElement(ContextProvider, { context: _this.context }, props._vnode),\n\t\t_this._temp\n\t);\n}\n\n/**\n * Create a `Portal` to continue rendering the vnode tree at a different DOM node\n * @param {import('./internal').VNode} vnode The vnode to render\n * @param {import('./internal').PreactElement} container The DOM node to continue rendering in to.\n */\nexport function createPortal(vnode, container) {\n\tconst el = createElement(Portal, { _vnode: vnode, _container: container });\n\tel.containerInfo = container;\n\treturn el;\n}\n", "import {\n\trender as preactRender,\n\thydrate as preactHydrate,\n\toptions,\n\ttoChildArray,\n\tComponent\n} from 'preact';\nimport {\n\tuseCallback,\n\tuseContext,\n\tuseDebugValue,\n\tuseEffect,\n\tuseId,\n\tuseImperativeHandle,\n\tuseLayoutEffect,\n\tuseMemo,\n\tuseReducer,\n\tuseRef,\n\tuseState\n} from 'preact/hooks';\nimport {\n\tuseDeferredValue,\n\tuseInsertionEffect,\n\tuseSyncExternalStore,\n\tuseTransition\n} from './index';\n\nexport const REACT_ELEMENT_TYPE =\n\t(typeof Symbol != 'undefined' && Symbol.for && Symbol.for('react.element')) ||\n\t0xeac7;\n\nconst CAMEL_PROPS =\n\t/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/;\nconst ON_ANI = /^on(Ani|Tra|Tou|BeforeInp|Compo)/;\nconst CAMEL_REPLACE = /[A-Z0-9]/g;\nconst IS_DOM = typeof document !== 'undefined';\n\n// Input types for which onchange should not be converted to oninput.\n// type=\"file|checkbox|radio\", plus \"range\" in IE11.\n// (IE11 doesn't support Symbol, which we use here to turn `rad` into `ra` which matches \"range\")\nconst onChangeInputType = type =>\n\t(typeof Symbol != 'undefined' && typeof Symbol() == 'symbol'\n\t\t? /fil|che|rad/\n\t\t: /fil|che|ra/\n\t).test(type);\n\n// Some libraries like `react-virtualized` explicitly check for this.\nComponent.prototype.isReactComponent = {};\n\n// `UNSAFE_*` lifecycle hooks\n// Preact only ever invokes the unprefixed methods.\n// Here we provide a base \"fallback\" implementation that calls any defined UNSAFE_ prefixed method.\n// - If a component defines its own `componentDidMount()` (including via defineProperty), use that.\n// - If a component defines `UNSAFE_componentDidMount()`, `componentDidMount` is the alias getter/setter.\n// - If anything assigns to an `UNSAFE_*` property, the assignment is forwarded to the unprefixed property.\n// See https://github.com/preactjs/preact/issues/1941\n[\n\t'componentWillMount',\n\t'componentWillReceiveProps',\n\t'componentWillUpdate'\n].forEach(key => {\n\tObject.defineProperty(Component.prototype, key, {\n\t\tconfigurable: true,\n\t\tget() {\n\t\t\treturn this['UNSAFE_' + key];\n\t\t},\n\t\tset(v) {\n\t\t\tObject.defineProperty(this, key, {\n\t\t\t\tconfigurable: true,\n\t\t\t\twritable: true,\n\t\t\t\tvalue: v\n\t\t\t});\n\t\t}\n\t});\n});\n\n/**\n * Proxy render() since React returns a Component reference.\n * @param {import('./internal').VNode} vnode VNode tree to render\n * @param {import('./internal').PreactElement} parent DOM node to render vnode tree into\n * @param {() => void} [callback] Optional callback that will be called after rendering\n * @returns {import('./internal').Component | null} The root component reference or null\n */\nexport function render(vnode, parent, callback) {\n\t// React destroys any existing DOM nodes, see #1727\n\t// ...but only on the first render, see #1828\n\tif (parent._children == null) {\n\t\tparent.textContent = '';\n\t}\n\n\tpreactRender(vnode, parent);\n\tif (typeof callback == 'function') callback();\n\n\treturn vnode ? vnode._component : null;\n}\n\nexport function hydrate(vnode, parent, callback) {\n\tpreactHydrate(vnode, parent);\n\tif (typeof callback == 'function') callback();\n\n\treturn vnode ? vnode._component : null;\n}\n\nlet oldEventHook = options.event;\noptions.event = e => {\n\tif (oldEventHook) e = oldEventHook(e);\n\n\te.persist = empty;\n\te.isPropagationStopped = isPropagationStopped;\n\te.isDefaultPrevented = isDefaultPrevented;\n\treturn (e.nativeEvent = e);\n};\n\nfunction empty() {}\n\nfunction isPropagationStopped() {\n\treturn this.cancelBubble;\n}\n\nfunction isDefaultPrevented() {\n\treturn this.defaultPrevented;\n}\n\nconst classNameDescriptorNonEnumberable = {\n\tenumerable: false,\n\tconfigurable: true,\n\tget() {\n\t\treturn this.class;\n\t}\n};\n\nfunction handleDomVNode(vnode) {\n\tlet props = vnode.props,\n\t\ttype = vnode.type,\n\t\tnormalizedProps = {};\n\n\tlet isNonDashedType = type.indexOf('-') === -1;\n\tfor (let i in props) {\n\t\tlet value = props[i];\n\n\t\tif (\n\t\t\t(i === 'value' && 'defaultValue' in props && value == null) ||\n\t\t\t// Emulate React's behavior of not rendering the contents of noscript tags on the client.\n\t\t\t(IS_DOM && i === 'children' && type === 'noscript') ||\n\t\t\ti === 'class' ||\n\t\t\ti === 'className'\n\t\t) {\n\t\t\t// Skip applying value if it is null/undefined and we already set\n\t\t\t// a default value\n\t\t\tcontinue;\n\t\t}\n\n\t\tlet lowerCased = i.toLowerCase();\n\t\tif (i === 'defaultValue' && 'value' in props && props.value == null) {\n\t\t\t// `defaultValue` is treated as a fallback `value` when a value prop is present but null/undefined.\n\t\t\t// `defaultValue` for Elements with no value prop is the same as the DOM defaultValue property.\n\t\t\ti = 'value';\n\t\t} else if (i === 'download' && value === true) {\n\t\t\t// Calling `setAttribute` with a truthy value will lead to it being\n\t\t\t// passed as a stringified value, e.g. `download=\"true\"`. React\n\t\t\t// converts it to an empty string instead, otherwise the attribute\n\t\t\t// value will be used as the file name and the file will be called\n\t\t\t// \"true\" upon downloading it.\n\t\t\tvalue = '';\n\t\t} else if (lowerCased === 'translate' && value === 'no') {\n\t\t\tvalue = false;\n\t\t} else if (lowerCased[0] === 'o' && lowerCased[1] === 'n') {\n\t\t\tif (lowerCased === 'ondoubleclick') {\n\t\t\t\ti = 'ondblclick';\n\t\t\t} else if (\n\t\t\t\tlowerCased === 'onchange' &&\n\t\t\t\t(type === 'input' || type === 'textarea') &&\n\t\t\t\t!onChangeInputType(props.type)\n\t\t\t) {\n\t\t\t\tlowerCased = i = 'oninput';\n\t\t\t} else if (lowerCased === 'onfocus') {\n\t\t\t\ti = 'onfocusin';\n\t\t\t} else if (lowerCased === 'onblur') {\n\t\t\t\ti = 'onfocusout';\n\t\t\t} else if (ON_ANI.test(i)) {\n\t\t\t\ti = lowerCased;\n\t\t\t}\n\t\t} else if (isNonDashedType && CAMEL_PROPS.test(i)) {\n\t\t\ti = i.replace(CAMEL_REPLACE, '-$&').toLowerCase();\n\t\t} else if (value === null) {\n\t\t\tvalue = undefined;\n\t\t}\n\n\t\t// Add support for onInput and onChange, see #3561\n\t\t// if we have an oninput prop already change it to oninputCapture\n\t\tif (lowerCased === 'oninput') {\n\t\t\ti = lowerCased;\n\t\t\tif (normalizedProps[i]) {\n\t\t\t\ti = 'oninputCapture';\n\t\t\t}\n\t\t}\n\n\t\tnormalizedProps[i] = value;\n\t}\n\n\t// Add support for array select values: <select multiple value={[]} />\n\tif (\n\t\ttype == 'select' &&\n\t\tnormalizedProps.multiple &&\n\t\tArray.isArray(normalizedProps.value)\n\t) {\n\t\t// forEach() always returns undefined, which we abuse here to unset the value prop.\n\t\tnormalizedProps.value = toChildArray(props.children).forEach(child => {\n\t\t\tchild.props.selected =\n\t\t\t\tnormalizedProps.value.indexOf(child.props.value) != -1;\n\t\t});\n\t}\n\n\t// Adding support for defaultValue in select tag\n\tif (type == 'select' && normalizedProps.defaultValue != null) {\n\t\tnormalizedProps.value = toChildArray(props.children).forEach(child => {\n\t\t\tif (normalizedProps.multiple) {\n\t\t\t\tchild.props.selected =\n\t\t\t\t\tnormalizedProps.defaultValue.indexOf(child.props.value) != -1;\n\t\t\t} else {\n\t\t\t\tchild.props.selected =\n\t\t\t\t\tnormalizedProps.defaultValue == child.props.value;\n\t\t\t}\n\t\t});\n\t}\n\n\tif (props.class && !props.className) {\n\t\tnormalizedProps.class = props.class;\n\t\tObject.defineProperty(\n\t\t\tnormalizedProps,\n\t\t\t'className',\n\t\t\tclassNameDescriptorNonEnumberable\n\t\t);\n\t} else if (props.className && !props.class) {\n\t\tnormalizedProps.class = normalizedProps.className = props.className;\n\t} else if (props.class && props.className) {\n\t\tnormalizedProps.class = normalizedProps.className = props.className;\n\t}\n\n\tvnode.props = normalizedProps;\n}\n\nlet oldVNodeHook = options.vnode;\noptions.vnode = vnode => {\n\t// only normalize props on Element nodes\n\tif (typeof vnode.type === 'string') {\n\t\thandleDomVNode(vnode);\n\t}\n\n\tvnode.$$typeof = REACT_ELEMENT_TYPE;\n\n\tif (oldVNodeHook) oldVNodeHook(vnode);\n};\n\n// Only needed for react-relay\nlet currentComponent;\nconst oldBeforeRender = options._render;\noptions._render = function (vnode) {\n\tif (oldBeforeRender) {\n\t\toldBeforeRender(vnode);\n\t}\n\tcurrentComponent = vnode._component;\n};\n\nconst oldDiffed = options.diffed;\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions.diffed = function (vnode) {\n\tif (oldDiffed) {\n\t\toldDiffed(vnode);\n\t}\n\n\tconst props = vnode.props;\n\tconst dom = vnode._dom;\n\n\tif (\n\t\tdom != null &&\n\t\tvnode.type === 'textarea' &&\n\t\t'value' in props &&\n\t\tprops.value !== dom.value\n\t) {\n\t\tdom.value = props.value == null ? '' : props.value;\n\t}\n\n\tcurrentComponent = null;\n};\n\n// This is a very very private internal function for React it\n// is used to sort-of do runtime dependency injection.\nexport const __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = {\n\tReactCurrentDispatcher: {\n\t\tcurrent: {\n\t\t\treadContext(context) {\n\t\t\t\treturn currentComponent._globalContext[context._id].props.value;\n\t\t\t},\n\t\t\tuseCallback,\n\t\t\tuseContext,\n\t\t\tuseDebugValue,\n\t\t\tuseDeferredValue,\n\t\t\tuseEffect,\n\t\t\tuseId,\n\t\t\tuseImperativeHandle,\n\t\t\tuseInsertionEffect,\n\t\t\tuseLayoutEffect,\n\t\t\tuseMemo,\n\t\t\t// useMutableSource, // experimental-only and replaced by uSES, likely not worth supporting\n\t\t\tuseReducer,\n\t\t\tuseRef,\n\t\t\tuseState,\n\t\t\tuseSyncExternalStore,\n\t\t\tuseTransition\n\t\t}\n\t}\n};\n", "import {\n\tcreateElement,\n\trender as preactRender,\n\tcloneElement as preactCloneElement,\n\tcreateRef,\n\tComponent,\n\tcreateContext,\n\tFragment\n} from 'preact';\nimport {\n\tuseState,\n\tuseId,\n\tuseReducer,\n\tuseEffect,\n\tuseLayoutEffect,\n\tuseRef,\n\tuseImperativeHandle,\n\tuseMemo,\n\tuseCallback,\n\tuseContext,\n\tuseDebugValue\n} from 'preact/hooks';\nimport {\n\tuseInsertionEffect,\n\tstartTransition,\n\tuseDeferredValue,\n\tuseSyncExternalStore,\n\tuseTransition\n} from './hooks';\nimport { PureComponent } from './PureComponent';\nimport { memo } from './memo';\nimport { forwardRef } from './forwardRef';\nimport { Children } from './Children';\nimport { Suspense, lazy } from './suspense';\nimport { SuspenseList } from './suspense-list';\nimport { createPortal } from './portals';\nimport {\n\thydrate,\n\trender,\n\tREACT_ELEMENT_TYPE,\n\t__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED\n} from './render';\n\nconst version = '18.3.1'; // trick libraries to think we are react\n\n/**\n * Legacy version of createElement.\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component constructor\n */\nfunction createFactory(type) {\n\treturn createElement.bind(null, type);\n}\n\n/**\n * Check if the passed element is a valid (p)react node.\n * @param {*} element The element to check\n * @returns {boolean}\n */\nfunction isValidElement(element) {\n\treturn !!element && element.$$typeof === REACT_ELEMENT_TYPE;\n}\n\n/**\n * Check if the passed element is a Fragment node.\n * @param {*} element The element to check\n * @returns {boolean}\n */\nfunction isFragment(element) {\n\treturn isValidElement(element) && element.type === Fragment;\n}\n\n/**\n * Check if the passed element is a Memo node.\n * @param {*} element The element to check\n * @returns {boolean}\n */\nfunction isMemo(element) {\n\treturn (\n\t\t!!element &&\n\t\t!!element.displayName &&\n\t\t(typeof element.displayName === 'string' ||\n\t\t\telement.displayName instanceof String) &&\n\t\telement.displayName.startsWith('Memo(')\n\t);\n}\n\n/**\n * Wrap `cloneElement` to abort if the passed element is not a valid element and apply\n * all vnode normalizations.\n * @param {import('./internal').VNode} element The vnode to clone\n * @param {object} props Props to add when cloning\n * @param {Array<import('./internal').ComponentChildren>} rest Optional component children\n */\nfunction cloneElement(element) {\n\tif (!isValidElement(element)) return element;\n\treturn preactCloneElement.apply(null, arguments);\n}\n\n/**\n * Remove a component tree from the DOM, including state and event handlers.\n * @param {import('./internal').PreactElement} container\n * @returns {boolean}\n */\nfunction unmountComponentAtNode(container) {\n\tif (container._children) {\n\t\tpreactRender(null, container);\n\t\treturn true;\n\t}\n\treturn false;\n}\n\n/**\n * Get the matching DOM node for a component\n * @param {import('./internal').Component} component\n * @returns {import('./internal').PreactElement | null}\n */\nfunction findDOMNode(component) {\n\treturn (\n\t\t(component &&\n\t\t\t(component.base || (component.nodeType === 1 && component))) ||\n\t\tnull\n\t);\n}\n\n/**\n * Deprecated way to control batched rendering inside the reconciler, but we\n * already schedule in batches inside our rendering code\n * @template Arg\n * @param {(arg: Arg) => void} callback function that triggers the updated\n * @param {Arg} [arg] Optional argument that can be passed to the callback\n */\n// eslint-disable-next-line camelcase\nconst unstable_batchedUpdates = (callback, arg) => callback(arg);\n\n/**\n * In React, `flushSync` flushes the entire tree and forces a rerender. It's\n * implmented here as a no-op.\n * @template Arg\n * @template Result\n * @param {(arg: Arg) => Result} callback function that runs before the flush\n * @param {Arg} [arg] Optional argument that can be passed to the callback\n * @returns\n */\nconst flushSync = (callback, arg) => callback(arg);\n\n/**\n * Strict Mode is not implemented in Preact, so we provide a stand-in for it\n * that just renders its children without imposing any restrictions.\n */\nconst StrictMode = Fragment;\n\n// compat to react-is\nexport const isElement = isValidElement;\n\nexport * from 'preact/hooks';\nexport {\n\tversion,\n\tChildren,\n\trender,\n\thydrate,\n\tunmountComponentAtNode,\n\tcreatePortal,\n\tcreateElement,\n\tcreateContext,\n\tcreateFactory,\n\tcloneElement,\n\tcreateRef,\n\tFragment,\n\tisValidElement,\n\tisFragment,\n\tisMemo,\n\tfindDOMNode,\n\tComponent,\n\tPureComponent,\n\tmemo,\n\tforwardRef,\n\tflushSync,\n\tuseInsertionEffect,\n\tstartTransition,\n\tuseDeferredValue,\n\tuseSyncExternalStore,\n\tuseTransition,\n\t// eslint-disable-next-line camelcase\n\tunstable_batchedUpdates,\n\tStrictMode,\n\tSuspense,\n\tSuspenseList,\n\tlazy,\n\t__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED\n};\n\n// React copies the named exports to the default one.\nexport default {\n\tuseState,\n\tuseId,\n\tuseReducer,\n\tuseEffect,\n\tuseLayoutEffect,\n\tuseInsertionEffect,\n\tuseTransition,\n\tuseDeferredValue,\n\tuseSyncExternalStore,\n\tstartTransition,\n\tuseRef,\n\tuseImperativeHandle,\n\tuseMemo,\n\tuseCallback,\n\tuseContext,\n\tuseDebugValue,\n\tversion,\n\tChildren,\n\trender,\n\thydrate,\n\tunmountComponentAtNode,\n\tcreatePortal,\n\tcreateElement,\n\tcreateContext,\n\tcreateFactory,\n\tcloneElement,\n\tcreateRef,\n\tFragment,\n\tisValidElement,\n\tisElement,\n\tisFragment,\n\tisMemo,\n\tfindDOMNode,\n\tComponent,\n\tPureComponent,\n\tmemo,\n\tforwardRef,\n\tflushSync,\n\tunstable_batchedUpdates,\n\tStrictMode,\n\tSuspense,\n\tSuspenseList,\n\tlazy,\n\t__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED\n};\n", "export const Lang = {\n    en: {\n        loadingTitle: 'Log in with Ledger',\n        loadingTip0: 'Please connect to your Ledger device and open “Tron” App.',\n        loadingTip4: 'Preparing your Ledger device...',\n\n        checkTitle: 'Please check if the address below is the same one shown on your Ledger device',\n        checkTip0: 'If it is: press “Approve” button to confirm the address',\n        checkTip1: \"If it isn't: select “Reject” on your Ledger device and refresh this page\",\n        confirmTip: 'Please confirm on your Ledger',\n\n        selectTitle: 'Select account',\n        selectTip: 'Please select an account to use',\n\n        cancel: 'Cancel',\n        confirm: 'Confirm',\n\n        address: 'Address',\n        balance: 'Available Balance',\n        loadMore: 'Load More',\n    },\n    'zh-CN': {\n        loadingTitle: 'Ledger 登录',\n        loadingTip0: '请连接 Ledger 设备，并在设备上进入 “TRON” 应用',\n        loadingTip4: 'Ledger 设备准备中......',\n\n        checkTitle: '请确认以下地址与 Ledger 设备显示地址一致',\n        checkTip0: '如果一致：请按设备上的 Approve 按钮进行确认',\n        checkTip1: '如果不一致：请在 Ledger 设备中选择 Reject 按钮并刷新本页面',\n        confirmTip: '请在 Ledger 上确认',\n\n        selectTitle: '选择账户',\n        selectTip: '请选择要使用的钱包账户',\n\n        cancel: '取消',\n        confirm: '确认',\n\n        address: '地址',\n        balance: '可用余额',\n        loadMore: '加载更多账户',\n    },\n    'zh-TC': {\n        loadingTitle: 'Ledger 登錄',\n        loadingTip0: '請連接 Ledger 設備，並在設備上進入 “TRON” 應用',\n        loadingTip4: 'Ledger 設備準備中......',\n\n        checkTitle: '請確認以下地址與 Ledger 設備顯示地址一致',\n        checkTip0: '如果一致：請按設備上的 Approve 按鈕進行確認',\n        checkTip1: '如果不一致：請在 Ledger 設備中選擇 Reject 按鈕並刷新本頁面',\n        confirmTip: '請在 Ledger 上確認',\n\n        selectTitle: '選擇賬戶',\n        selectTip: '請選擇要使用的錢包賬戶',\n\n        cancel: '取消',\n        confirm: '確認',\n\n        address: '地址',\n        balance: '可用餘額',\n        loadMore: '加載更多賬戶',\n    },\n};\nexport function getLangText() {\n    const searchParams = new URLSearchParams(globalThis.location.search);\n    const searchParamsLang = searchParams.get('lang') as keyof typeof Lang;\n    const storageSettingLang = globalThis.localStorage.getItem('lang') as keyof typeof Lang;\n    const appLang = (searchParamsLang || storageSettingLang || '').toLowerCase();\n    const browserSettingLang = (globalThis.navigator.language || '').toLowerCase();\n    let browserLang;\n    if (['zh-tw', 'zh-hk', 'zh-tc'].includes(browserSettingLang)) {\n        browserLang = Lang['zh-TC'];\n    } else if (['zh', 'zh-cn'].includes(browserSettingLang)) {\n        browserLang = Lang['zh-CN'];\n    } else if (browserSettingLang.includes('en')) {\n        browserLang = Lang['en'];\n    }\n\n    let lang = browserLang;\n    if (appLang) {\n        if (['zh-tw', 'zh-hk', 'zh-tc'].includes(appLang)) {\n            lang = Lang['zh-TC'];\n        } else if (['zh', 'zh-cn'].includes(appLang)) {\n            lang = Lang['zh-CN'];\n        } else if (appLang.includes('en')) {\n            lang = Lang.en;\n        }\n    }\n    return lang || Lang.en;\n}\n", "import React from 'preact/compat';\nexport function LedgerIcon() {\n    return (\n        <div>\n            <img\n                style={{\n                    width: '5vw',\n                    marginBottom: '1vw',\n                }}\n                src=\"data:image/png;base64,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\"\n                alt=\"logo\"\n            />\n        </div>\n    );\n}\n", "import React from 'preact/compat';\n\nexport function LoadingIcon() {\n    return (\n        <div className=\"ledger-ant-spin ledger-ant-spin-lg ledger-ant-spin-spinning spin\">\n            <span className=\"ledger-ant-spin-dot\">\n                <i className=\"ledger-ant-spin-dot-item\"></i>\n                <i className=\"ledger-ant-spin-dot-item\"></i>\n                <i className=\"ledger-ant-spin-dot-item\"></i>\n                <i className=\"ledger-ant-spin-dot-item\"></i>\n            </span>\n        </div>\n    );\n}\n", "import React, { useMemo } from 'preact/compat';\nimport { getLangText } from './lang.js';\nimport { LedgerIcon } from './LedgerIcon.js';\nimport { LoadingIcon } from './LoadingIcon.js';\nexport function ConfirmContent(props: { address: string }) {\n    const langText = useMemo(() => getLangText(), []);\n    return (\n        <div style={{ textAlign: 'center' }} data-testid=\"confirm-content\">\n            <LedgerIcon></LedgerIcon>\n            <div className=\"ledger-connecting-pop\">\n                <ul className=\"ledger-connecting-pop-content\">\n                    <li className=\"title\" style={{ wordBreak: 'break-word' }}>\n                        {langText.checkTitle}\n                    </li>\n                    <li>\n                        <strong\n                            style={{ color: '#B0170D', textAlign: 'left', fontWeight: '600' }}\n                            data-testid=\"confirm-content-address\"\n                        >\n                            {props.address}\n                        </strong>\n                    </li>\n                    <li>{langText.checkTip0}</li>\n                    <li>{langText.checkTip1}</li>\n                </ul>\n                <div className=\"mt-4\">\n                    <LoadingIcon></LoadingIcon>\n                    <div>\n                        <div className=\"text-muted\">\n                            <span>{langText.confirmTip}</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n", "import React, { useMemo } from 'preact/compat';\nimport { getLangText } from './lang.js';\nimport { LedgerIcon } from './LedgerIcon.js';\nimport { LoadingIcon } from './LoadingIcon.js';\nexport function ConnectingContent() {\n    const langText = useMemo(() => getLangText(), []);\n    return (\n        <div style={{ textAlign: 'center' }} data-testid=\"connecting-content\">\n            <LedgerIcon></LedgerIcon>\n            <div className=\"ledger-connecting-pop\">\n                <ul className=\"ledger-connecting-pop-content\">\n                    <li className=\"title\">{langText.loadingTip0}</li>\n                </ul>\n                <div className=\"mt-4\">\n                    <LoadingIcon></LoadingIcon>\n                    <div>\n                        <div className=\"text-muted\">\n                            <span>{langText.loadingTip4}</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n", "import React from 'preact/compat';\nimport type { RenderableProps } from 'preact';\ntype ModalProps = RenderableProps<{\n    onClose: () => void;\n    title: string;\n    width?: number | string;\n}>;\n\nexport function Modal(props: ModalProps) {\n    return (\n        <div className=\"ledger-modal-root\">\n            <div className=\"ledger-modal-mask\"></div>\n            <div className=\"ledger-modal-wrap\">\n                <div className=\"ledger-modal\" style={{ width: props.width || '550px' }}>\n                    <div className=\"ledger-modal-content\">\n                        <button onClick={props.onClose} type=\"button\" aria-label=\"Close\" className=\"ledger-modal-close\">\n                            <span className=\"ledger-modal-close-x\">\n                                <i aria-label=\"icon: close\" className=\"icon icon-close ledger-modal-close-icon\">\n                                    <svg\n                                        viewBox=\"64 64 896 896\"\n                                        focusable=\"false\"\n                                        className=\"\"\n                                        data-icon=\"close\"\n                                        width=\"1em\"\n                                        height=\"1em\"\n                                        fill=\"currentColor\"\n                                        aria-hidden=\"true\"\n                                    >\n                                        <path d=\"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 0 0 203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z\"></path>\n                                    </svg>\n                                </i>\n                            </span>\n                        </button>\n                        <div className=\"ledger-modal-header\">\n                            <div className=\"ledger-modal-title\">{props.title}</div>\n                        </div>\n                        <div className=\"ledger-modal-body\">{props.children}</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n", "import type { RenderableProps } from 'preact';\nimport React from 'preact/compat';\nimport { useLayoutEffect } from 'preact/hooks';\nimport { useMemo } from 'preact/hooks';\nimport { useRef } from 'preact/hooks';\nimport { useEffect } from 'preact/hooks';\nimport { useState } from 'preact/hooks';\nimport type { Account, GetAccounts } from '../LedgerWallet.js';\nimport { getLangText } from './lang.js';\n\nexport type SelectAccountProps = RenderableProps<{\n    accounts: Account[];\n    selectedIndex: number;\n    onCancel: () => void;\n    onConfirm: (account: Account) => void;\n    getAccounts: GetAccounts;\n}>;\n\nexport function SelectAccount(props: SelectAccountProps) {\n    const [index, setIndex] = useState(0);\n    const [accounts, setAccounts] = useState<Account[]>([]);\n    const [loading, setLoading] = useState(false);\n\n    const loadBtnRef = useRef<HTMLButtonElement>(null);\n    const langText = useMemo(() => getLangText(), []);\n\n    useEffect(() => {\n        setAccounts([...props.accounts]);\n    }, [props.accounts]);\n\n    useEffect(() => {\n        setIndex(props.selectedIndex);\n    }, [props.selectedIndex]);\n\n    function onInput(e: any) {\n        setIndex(+e.target.value);\n    }\n\n    function onConfirm() {\n        const selected = accounts.find((item) => item.index === index);\n        props.onConfirm(selected || accounts?.[0]);\n    }\n    function onCancel() {\n        props.onCancel();\n    }\n\n    async function onLoadMore() {\n        setLoading(true);\n        const last = accounts[accounts.length - 1] || { index: -1 };\n        const from = last.index + 1;\n        const to = last.index + 6;\n        try {\n            const result = await props.getAccounts(from, to);\n            setAccounts((accounts) => [...accounts, ...result]);\n        } finally {\n            setLoading(false);\n        }\n    }\n    useLayoutEffect(() => {\n        loadBtnRef.current?.scrollIntoView?.();\n    }, [accounts]);\n    return (\n        <div style={{ paddingLeft: 40 }} className=\"ledger-select\" data-testid=\"select-account-content\">\n            <span className=\"title\">{langText.selectTip}</span>\n            <div className=\"ledger-select-list-wrap\">\n                <ul className=\"ledger-select-list\" data-testid=\"select-account-list\">\n                    {accounts.map((account, idx) => {\n                        return (\n                            <li key={idx} className=\"ledger-select-item\">\n                                <label htmlFor={`ledger-select-radio${idx}`}>\n                                    <input\n                                        className={account.index === index ? 'checked' : ''}\n                                        id={`ledger-select-radio${idx}`}\n                                        type=\"radio\"\n                                        name=\"selectedAddress\"\n                                        value={account.index}\n                                        checked={account.index === index}\n                                        onInput={onInput}\n                                    />\n                                    <span>{account.address}</span>\n                                </label>\n                            </li>\n                        );\n                    })}\n                </ul>\n                <div style={{ display: 'flex', justifyContent: 'flex-end' }}>\n                    <button\n                        data-testid=\"btn-load-more\"\n                        ref={loadBtnRef}\n                        style={{ marginTop: 10 }}\n                        disabled={loading}\n                        className=\"ledger-select-button\"\n                        onClick={onLoadMore}\n                    >\n                        <span style={{ marginRight: loading ? 10 : 0 }}>{langText.loadMore}</span>\n                        {loading ? (\n                            /* prettier-ignore */\n                            <svg width=\"18\" height=\"18\" viewBox=\"0 0 38 38\" xmlns=\"http://www.w3.org/2000/svg\" stroke=\"#fff\"><g fill=\"none\" fillRule=\"evenodd\"><g transform=\"translate(1 1)\" strokeWidth=\"2\"><circle strokeOpacity=\".5\" cx=\"18\" cy=\"18\" r=\"18\"/><path d=\"M36 18c0-9.94-8.06-18-18-18\"><animateTransform attributeName=\"transform\" type=\"rotate\" from=\"0 18 18\" to=\"360 18 18\" dur=\"1s\" repeatCount=\"indefinite\"/></path></g></g></svg>\n                        ) : null}\n                    </button>\n                </div>\n            </div>\n            <footer style={{ display: 'flex', justifyContent: 'flex-end' }}>\n                <button\n                    data-testid=\"btn-cancel\"\n                    style={{ marginRight: 10 }}\n                    className=\"ledger-select-button default-button\"\n                    onClick={onCancel}\n                >\n                    {langText.cancel}\n                </button>\n                <button\n                    data-testid=\"btn-confirm\"\n                    disabled={loading}\n                    className=\"ledger-select-button\"\n                    onClick={onConfirm}\n                >\n                    {langText.confirm}\n                </button>\n            </footer>\n        </div>\n    );\n}\n", "export const modalStyleSheetContent = `\n.ledger-modal-mask, .ledger-modal-wrap {\n    position: fixed;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    z-index: 1000;\n    font-family: 'PingFangSC-Regular', 'Arial', sans-serif, 'Droid Sans', 'Helvetica Neue';\n}\n.ledger-modal-mask {\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.45);\n}\n.ledger-modal-wrap {\n    overflow: auto;\n    outline: 0;\n}\n.ledger-modal {\n  position: relative;\n  margin: 0 auto;\n  padding-bottom: 24px;\n  line-height: 1.5;\n  top: 50px;\n  width: 600px;\n  color: rgba(0, 0, 0, 0.65);\n}\n.ledger-modal-content {\n  position: relative;\n  background-color: #fff;\n  background-clip: padding-box;\n  border: 0;\n  border-radius: 4px;\n  box-shadow: 0 4px 12px rgb(0 0 0 / 15%);\n  pointer-events: auto;\n}\n.ledger-modal-close {\n  -webkit-appearance: button;\n  position: absolute;\n  top: 0;\n  right: 0;\n  z-index: 10;\n  padding: 0;\n  color: rgba(0, 0, 0, 0.45);\n  font-weight: 700;\n  line-height: 1;\n  text-decoration: none;\n  background: transparent;\n  border: 0;\n  outline: 0;\n  cursor: pointer;\n  transition: color 0.3s;\n}\n.ledger-modal-close:focus,.ledger-modal-close:active,.ledger-modal-close:hover {\n  color: rgba(0, 0, 0, 0.75);\n  text-decoration: none;\n  border: none;\n  outline: none;\n}\n.ledger-modal-close-x {\n  display: block;\n  width: 56px;\n  height: 56px;\n  font-size: 16px;\n  font-style: normal;\n  line-height: 56px;\n  text-align: center;\n  text-transform: none;\n  text-rendering: auto;\n}\n.ledger-modal-close-x .icon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n}\n.ledger-modal-header {\n  padding: 16px 24px;\n  color: rgba(0, 0, 0, 0.65);\n  background: #fff;\n  border-bottom: 1px solid #e8e8e8;\n  border-radius: 4px 4px 0 0;\n}\n.ledger-select .title, .ledger-modal-title {\n  margin: 0;\n  color: rgba(0, 0, 0, 0.85);\n  font-weight: 500;\n  font-size: 18px;\n  line-height: 22px;\n  word-wrap: break-word;\n}\n.ledger-modal-body {\n  padding: 24px;\n  font-size: 14px;\n  line-height: 1.5;\n  word-wrap: break-word;\n  max-height: 650px;\n  overflow-y: auto;\n}\n\n\n// connecting content\n.ledger-connecting-pop ul {\n  margin: 0;\n}\n.ledger-connecting-pop-content {\n  padding-left: 8%;\n}\n.ledger-connecting-pop-content li, .ledger-select li {\n  display: flex;\n  margin: 10px 0 10px 0;\n  line-height: 25px;\n  word-break: break-all;\n  text-align: left;\n}\n.ledger-connecting-pop-content .title {\n  margin-bottom: 20px;\n  font-weight: bold;\n}\n.ledger-ant-spin {\n  box-sizing: border-box;\n  padding: 0;\n  font-size: 14px;\n  font-variant: tabular-nums;\n  line-height: 1.5;\n  list-style: none;\n  font-feature-settings: 'tnum';\n  color: #B0170D;\n  vertical-align: middle;\n  transition: transform 0.3s cubic-bezier(0.78, 0.14, 0.15, 0.86);\n  position: static;\n  opacity: 1;\n  margin: 2vw 0;\n  text-align: center;\n  display: block;\n}\n.ledger-ant-spin-dot {\n  position: relative;\n  display: inline-block;\n  font-size: 20px;\n  width: 1em;\n  height: 1em;\n  transform: rotate(45deg);\n  animation: antRotate 1.2s infinite linear;\n  font-size: 32px;\n}\n\n.ledger-ant-spin-dot-item {\n  position: absolute;\n  display: block;\n  width: 9px;\n  height: 9px;\n  background-color: #B0170D;\n  border-radius: 100%;\n  transform: scale(0.75);\n  transform-origin: 50% 50%;\n  opacity: 0.3;\n  animation: antSpinMove 1s infinite linear alternate;\n}\n.ledger-ant-spin-dot-item:nth-child(1) {\n  top: 0;\n  left: 0;\n}\n.ledger-ant-spin-dot-item:nth-child(2) {\n  top: 0;\n  right: 0;\n  animation-delay: 0.4s;\n}\n.ledger-ant-spin-dot-item:nth-child(3) {\n  right: 0;\n  bottom: 0;\n  animation-delay: 0.8s;\n}\n.ledger-ant-spin-dot-item:nth-child(4) {\n  bottom: 0;\n  left: 0;\n  animation-delay: 1.2s;\n}\n.ledger-ant-spin-lg .ledger-ant-spin-dot i {\n  width: 14px;\n  height: 14px;\n}\n@keyframes antRotate {\n  100% {\n    transform: rotate(405deg)\n  }\n}\n@keyframes antSpinMove {\n  100% {\n    opacity: 1;\n  }\n}\n\n.ledger-select {\n  text-align: left;\n}\n.ledger-select .title {\n  display: block;\n  margin-bottom: 10px;\n}\n.ledger-select-list-wrap {\n  width: 100%;\n  max-height: 400px;\n  overflow-y: auto;\n  margin: 0 0 20px 0;\n}\n.ledger-select-list {\n  margin-top: 0;\n  padding: 0;\n}\n.ledger-select-item {\n  font-size: 14px;\n  color: #2f2f2f;\n  line-height: 25px;\n  margin-top: 0;\n}\n.ledger-select-item:hover {\n  color: #6f6f6f;\n}\n.ledger-select-item label {\n  cursor: pointer;\n  width: 100%;\n  display: flex;\n}\n.ledger-select-item input {\n  width: 15px;\n  height: 25px;\n  margin: 0 10px 0 0;\n}\n.ledger-select-button {\n  display: inline-flex;\n  color: #fff;\n  cursor: pointer;\n  height: 36px;\n  background-color: #c23631;\n  border: none;\n  border-radius: 4px;\n  align-items: center;\n  padding: 0 18px;\n  font-family: DM Sans, Roboto, Helvetica Neue, Helvetica, Arial, sans-serif;\n  font-size: 14px;\n  font-weight: 500;\n  line-height: 36px;\n  user-select: none;\n  -webkit-tap-highlight-color: transparent;\n}\n.ledger-select-button[disabled] {\n  cursor: not-allowed;\n}\n.ledger-select-button.default-button {\n  background-color: #fff;\n  color: rgba(0, 0, 0, 0.65);\n  border: 1px solid #dcdfe6;\n}\n.ledger-select-button:focus {\n  outline: none;\n}\n.ledger-select-button:focus-visible {\n  outline: 2px solid white;\n}\n.ledger-select-button:hover {\n  opacity: 0.7;\n}\n`;\n", "import React, { render } from 'preact/compat';\nimport type { Account, GetAccounts } from '../LedgerWallet.js';\nimport { ConfirmContent } from './ConfirmContent.js';\nimport { ConnectingContent } from './ConnectingContent.js';\nimport { getLangText } from './lang.js';\nimport { Modal } from './Modal.js';\nimport { SelectAccount } from './SelectAccount.js';\nimport { modalStyleSheetContent } from './style.js';\n\nfunction prepareDomNode() {\n    const div = document.createElement('div');\n    const style = document.createElement('style');\n    style.innerHTML = modalStyleSheetContent;\n    document.body.append(style);\n    document.body.append(div);\n    function onClose() {\n        div.remove();\n        style.remove();\n    }\n    return {\n        onClose,\n        div,\n    };\n}\nexport function openConnectingModal() {\n    const { onClose, div } = prepareDomNode();\n    const langText = getLangText();\n    render(\n        <Modal title={langText.loadingTitle} onClose={onClose}>\n            <ConnectingContent></ConnectingContent>\n        </Modal>,\n        div\n    );\n\n    return onClose;\n}\n\nexport function openVerifyAddressModal(address: string) {\n    const { onClose, div } = prepareDomNode();\n    const langText = getLangText();\n    render(\n        <Modal width={550} title={langText.loadingTitle} onClose={onClose}>\n            <ConfirmContent address={address}></ConfirmContent>\n        </Modal>,\n        div\n    );\n\n    return onClose;\n}\n\nexport function openSelectAccountModal(options: {\n    accounts: Account[];\n    selectedIndex?: number;\n    getAccounts: GetAccounts;\n}): Promise<Account> {\n    const { onClose, div } = prepareDomNode();\n    const langText = getLangText();\n    return new Promise((resolve, reject) => {\n        function onConfirm(account: Account) {\n            resolve(account);\n            onClose();\n        }\n        function onCancel() {\n            reject(new Error('Operation is canceled.'));\n            onClose();\n        }\n        render(\n            <Modal title={langText.loadingTitle} onClose={onCancel}>\n                <SelectAccount\n                    accounts={options.accounts}\n                    selectedIndex={options.selectedIndex || 0}\n                    onConfirm={onConfirm}\n                    onCancel={onCancel}\n                    getAccounts={options.getAccounts}\n                ></SelectAccount>\n            </Modal>,\n            div\n        );\n    });\n}\n", "/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport Trx from '@ledgerhq/hw-app-trx';\nimport type Transport from '@ledgerhq/hw-transport';\nimport TransportWebHID from '@ledgerhq/hw-transport-webhid';\nimport type { BaseAdapterConfig, SignedTransaction, Transaction } from '@tronweb3/tronwallet-abstract-adapter';\nimport { openConnectingModal, openSelectAccountModal, openVerifyAddressModal } from './Modal/openModal.js';\n\nasync function wait(timeout: number) {\n    return new Promise((resolve) => {\n        setTimeout(resolve, timeout);\n    });\n}\nfunction isFunction(fn: unknown) {\n    return typeof fn === 'function';\n}\n\nexport type SelectAccount = (params: { accounts: Account[]; ledgerUtils: LedgerUtils }) => Promise<Account>;\n\nexport interface LedgerWalletConfig extends BaseAdapterConfig {\n    /**\n     * Initial total accounts to get once connection is created, default is 1\n     */\n    accountNumber?: number;\n    /**\n     * Hook function to call before connecting to ledger and geting accounts.\n     * By default, a modal will popup to reminder user to prepare the ledger and enter Tron app.\n     * You can specify a function to disable this modal.\n     */\n    beforeConnect?: () => Promise<unknown> | unknown;\n    /**\n     * Hook function to call after connecting to ledger and geting initial accounts.\n     * The function should return the selected account including the index of account.\n     * Following operations such as `signMessage` will use the selected account.\n     */\n    selectAccount?: SelectAccount;\n\n    /**\n     * Function to get derivate BIP44 path by index.\n     * Default is `44'/195'/${index}'/0/0`\n     */\n    getDerivationPath?: (index: number) => string;\n}\n/**\n * getAccounts from Ledger\n */\nexport type GetAccounts = (from: number, to: number) => Promise<Account[]>;\n\nexport type Account = {\n    /**\n     * The index to get BIP44 path.\n     */\n    index: number;\n    /**\n     * The BIP44 path to derivate address.\n     */\n    path: string;\n    /**\n     * The derivated address.\n     */\n    address: string;\n};\nexport interface LedgerUtils {\n    /**\n     * Get accounts from ledger by index. `from` is included and `to` is excluded.\n     * User can use the function to load more accounts.\n     */\n    getAccounts: GetAccounts;\n    /**\n     * Request to get an address with specified index using getDerivationPath(index) to get BIP44 path.\n     * If `display` is true, will request user to approve on ledger.\n     * The promise will resove if user approve and reject if user cancel the operation.\n     */\n    getAddress: (index: number, display: boolean) => Promise<{ publicKey: string; address: string }>;\n}\n\nconst defaultSelectAccount: SelectAccount = async function ({ accounts, ledgerUtils }) {\n    const account = await openSelectAccountModal({\n        accounts,\n        getAccounts: ledgerUtils.getAccounts,\n    });\n    const closeConfirm = openVerifyAddressModal(account.address);\n    try {\n        await ledgerUtils.getAddress(account.index, true);\n    } finally {\n        closeConfirm?.();\n    }\n\n    return account;\n};\nexport class LedgerWallet {\n    private accounts: Account[];\n    private app: Trx | null = null;\n    private transport: Transport | null = null;\n    private fetchState: 'Initial' | 'Fetching' | 'Finished' = 'Initial';\n    private selectedIndex = 0;\n    private config: LedgerWalletConfig;\n\n    private _address = '';\n    constructor(config: LedgerWalletConfig = {}) {\n        this.accounts = [];\n        const { accountNumber = 1 } = config;\n        (['beforeConnect', 'selectAccount', 'getDerivationPath'] as (keyof LedgerWalletConfig)[]).forEach((func) => {\n            if (config[func] && !isFunction(config[func])) {\n                throw new Error(`[Ledger]: ${func} must be a function!`);\n            }\n        });\n\n        if (accountNumber && !Number.isInteger(+accountNumber)) {\n            throw new Error('[Ledger]: accountNumber must be an integer!');\n        }\n        this.config = {\n            ...config,\n            accountNumber,\n        };\n    }\n\n    get address() {\n        return this._address;\n    }\n\n    async connect(options?: { account: Omit<Account, 'path'> }) {\n        if (options?.account && typeof options.account === 'object') {\n            const account = options.account;\n            this.selectedIndex = +account.index;\n            this._address = account.address;\n            if (account.index === undefined || account.address === undefined) {\n                console.warn(\n                    '[LedgerWallet] account parameter passed to connect() should have valid index and address property'\n                );\n            }\n            return;\n        }\n        const ledgerUtils = {\n            getAccounts: this.getAccounts,\n            getAddress: this.getAddress,\n        };\n        this.accounts = [];\n        this._address = '';\n        this.selectedIndex = 0;\n        const { accountNumber = 1, beforeConnect, selectAccount = defaultSelectAccount } = this.config;\n\n        let closeConnectingModal: (() => void) | null = null;\n        try {\n            if (beforeConnect) {\n                await beforeConnect();\n            } else {\n                closeConnectingModal = openConnectingModal();\n            }\n            await this.makeApp();\n\n            const firstAccount = await this.getAccount(0);\n            this.accounts[0] = firstAccount;\n\n            await this.cleanUp();\n            if (accountNumber > 1) {\n                await this.getAccounts(1, accountNumber);\n            }\n            closeConnectingModal?.();\n            const accounts = this.accounts.slice(0, accountNumber);\n            const selectedAccount = await selectAccount!({\n                accounts,\n                ledgerUtils,\n            });\n\n            this.selectedIndex = selectedAccount.index;\n            this._address = selectedAccount.address;\n        } finally {\n            await this.cleanUp();\n        }\n    }\n    disconnect() {\n        this.selectedIndex = 0;\n        this._address = '';\n    }\n    async signPersonalMessage(message: string) {\n        await this.waitForIdle();\n        try {\n            const index = this.selectedIndex;\n            await this.makeApp();\n            const path = this.getPathForIndex(index);\n            const hex = Buffer.from(message).toString('hex');\n            const res = await this.app!.signPersonalMessage(path, hex);\n            return res;\n        } finally {\n            await this.cleanUp();\n        }\n    }\n    async signTransaction(transaction: Transaction | SignedTransaction): Promise<SignedTransaction> {\n        await this.waitForIdle();\n        try {\n            const index = this.selectedIndex;\n            const path = this.getPathForIndex(index);\n            await this.makeApp();\n            let signedResponse;\n            try {\n                signedResponse = await this.app!.signTransaction(path, transaction.raw_data_hex, []);\n            } catch (e: any) {\n                if (/Too many bytes to encode/.test(e.message)) {\n                    signedResponse = await this.app!.signTransactionHash(path, transaction.txID);\n                } else {\n                    throw e;\n                }\n            }\n            let signature = (transaction as SignedTransaction).signature;\n            if (Array.isArray(signature)) {\n                if (!signature.includes(signedResponse)) signature.push(signedResponse);\n            } else {\n                signature = [signedResponse];\n            }\n            return {\n                ...transaction,\n                signature,\n            } as SignedTransaction;\n        } finally {\n            await this.cleanUp();\n        }\n    }\n    getAccounts = async (from: number, to: number): Promise<Account[]> => {\n        if (from < 0) {\n            throw new Error('getAccount parameter error: from cannot be smaller than 0.');\n        }\n        if (from >= to) {\n            throw new Error('getAccount parameter error: from cannot be bigger than to.');\n        }\n        if (this.fetchState === 'Fetching') {\n            await wait(500);\n            return this.getAccounts(from, to);\n        }\n        this.fetchState = 'Fetching';\n\n        // ledger can not get address concurrently.\n        await this.makeApp();\n        try {\n            const obj: Record<string, Account> = {};\n            for (let i = from; i < to; i++) {\n                const account = await this.getAccount(i);\n                obj[account.index] = account;\n            }\n            Object.keys(obj).forEach((key) => {\n                this.accounts[+key] = obj[key];\n            });\n            return this.accounts.slice(from, to);\n        } finally {\n            this.fetchState = 'Initial';\n            await this.cleanUp();\n        }\n    };\n\n    public getAddress = async (index: number, display = false): Promise<{ publicKey: string; address: string }> => {\n        try {\n            const path = this.getPathForIndex(index);\n            await this.makeApp();\n            return await this.app!.getAddress(path, display);\n        } finally {\n            await this.cleanUp();\n        }\n    };\n\n    private async getAccount(index: number) {\n        const path = this.getPathForIndex(index);\n        const { address } = await this.app!.getAddress(path);\n        return {\n            path,\n            address,\n            index,\n        };\n    }\n\n    private async waitForIdle() {\n        if (this.fetchState === 'Fetching') {\n            await wait(300);\n            await this.waitForIdle();\n        }\n    }\n    private getPathForIndex(index: number) {\n        return this.config.getDerivationPath ? this.config.getDerivationPath(index) : `44'/195'/${index}'/0/0`;\n    }\n    private async makeApp() {\n        if (this.transport && this.app) {\n            return;\n        }\n        this.transport = await TransportWebHID.create();\n        this.app = new Trx(this.transport);\n    }\n\n    private async cleanUp() {\n        this.app = null as unknown as Trx;\n        await this.transport?.close();\n        this.transport = null as unknown as Transport;\n    }\n}\n", "import {\n    Adapter,\n    AdapterState,\n    isInBrowser,\n    WalletNotFoundError,\n    WalletDisconnectedError,\n    WalletSignMessageError,\n    WalletSignTransactionError,\n    WalletConnectionError,\n    WalletDisconnectionError,\n    WalletReadyState,\n} from '@tronweb3/tronwallet-abstract-adapter';\n\nimport type { Transaction, SignedTransaction, AdapterName } from '@tronweb3/tronwallet-abstract-adapter';\nimport type { Account, LedgerUtils, LedgerWalletConfig } from './LedgerWallet.js';\nimport { LedgerWallet } from './LedgerWallet.js';\n\nconst isSupportedLedger = () => !!(globalThis.navigator && (globalThis.navigator as any).hid);\n\nexport type LedgerAdapterConfig = LedgerWalletConfig;\nexport const LedgerAdapterName = 'Ledger' as AdapterName<'Ledger'>;\n\nexport class LedgerAdapter extends Adapter {\n    name = LedgerAdapterName;\n    url = 'https://www.ledger.com/';\n    icon =\n        'data:image/png;base64,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';\n\n    private _readyState: WalletReadyState = WalletReadyState.Loading;\n    private _state: AdapterState = AdapterState.NotFound;\n    private _connecting: boolean;\n    private _address: string | null;\n    private config;\n\n    private _wallet: LedgerWallet;\n    constructor(config: LedgerAdapterConfig = {}) {\n        super();\n        this._connecting = false;\n        this._address = null;\n        this.config = config;\n        this._wallet = new LedgerWallet(config);\n        if (isSupportedLedger()) {\n            this._readyState = WalletReadyState.Found;\n            this._state = AdapterState.Disconnect;\n        } else {\n            this._readyState = WalletReadyState.NotFound;\n        }\n    }\n\n    get address() {\n        return this._address;\n    }\n\n    get state() {\n        return this._state;\n    }\n\n    get connecting() {\n        return this._connecting;\n    }\n\n    get readyState() {\n        return this._readyState;\n    }\n    get ledgerUtils(): LedgerUtils {\n        return {\n            getAccounts: this._wallet.getAccounts,\n            getAddress: this._wallet.getAddress,\n        };\n    }\n\n    async connect(options?: { account: Omit<Account, 'path'> }): Promise<void> {\n        try {\n            if (this.connected || this.connecting) return;\n            if (this.state === AdapterState.NotFound) {\n                if (this.config.openUrlWhenWalletNotFound !== false && isInBrowser()) {\n                    window.open(this.url, '_blank');\n                }\n                throw new WalletNotFoundError();\n            }\n            this._connecting = true;\n            try {\n                await this._wallet.connect(options);\n            } catch (e: any) {\n                // @todo: confirm to hidden ledger error message\n                // if (e.message?.includes('Incorrect length (0x6700)')) {\n                //     // This error code usually means that users don't have the right application opened on device\n                //     // see here  https://www.reddit.com/r/ledgerwallet/comments/mxcxo3/can_someone_help_with_the_problem_ledger_device/\n                //     throw new WalletConnectionError('Please prepare your ledger and enter Tron app.');\n                // }\n                throw new WalletConnectionError(`${e.message}.`);\n            }\n            this._address = this._wallet.address;\n            this._state = AdapterState.Connected;\n            this.emit('connect', this.address || '');\n            this.emit('stateChanged', this._state);\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        } finally {\n            this._connecting = false;\n        }\n    }\n\n    async disconnect(): Promise<void> {\n        if (this.state !== AdapterState.Connected) {\n            return;\n        }\n        try {\n            this._wallet.disconnect();\n            this._state = AdapterState.Disconnect;\n            this._address = null;\n            this.emit('disconnect');\n            this.emit('stateChanged', this._state);\n        } catch (e: any) {\n            this.emit('error', e);\n            throw new WalletDisconnectionError(e.message);\n        }\n    }\n\n    async signTransaction(transaction: Transaction): Promise<SignedTransaction> {\n        try {\n            if (this.state !== AdapterState.Connected) {\n                throw new WalletDisconnectedError();\n            }\n            try {\n                const signedTransaction = await this._wallet.signTransaction(transaction);\n                return signedTransaction;\n            } catch (e: any) {\n                throw new WalletSignTransactionError(e.message);\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    async signMessage(message: string): Promise<string> {\n        try {\n            if (this.state !== AdapterState.Connected) {\n                throw new WalletDisconnectedError();\n            }\n            try {\n                const signedResponse = await this._wallet.signPersonalMessage(message);\n                return signedResponse;\n            } catch (error: any) {\n                throw new WalletSignMessageError(error?.message, error);\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n}\n", "import { isInBrowser, isInMobileBrowser } from '@tronweb3/tronwallet-abstract-adapter';\n\nexport function supportTokenPocket() {\n    return !!window.tronWeb && typeof (window as any).tokenpocket !== 'undefined';\n}\n\n/**\n * Detect if in TokenPocketApp\n * There will be a `tokenpocket` object on window\n */\nexport function isInTokenPocket() {\n    return isInBrowser() && typeof (window as any).tokenpocket !== 'undefined';\n}\n\nexport function openTokenPocket() {\n    if (!supportTokenPocket() && isInMobileBrowser() && !isInTokenPocket()) {\n        const { origin, pathname, search, hash } = window.location;\n        const url = origin + pathname + search + hash;\n        const params = {\n            action: 'open',\n            actionId: Date.now() + '',\n            callbackUrl: 'http://someurl.com', // no need callback\n            blockchain: 'Tron',\n            chain: 'Tron',\n            url,\n            protocol: 'TokenPocket',\n            version: '1.0',\n        };\n        window.location.href = `tpdapp://open?params=${encodeURIComponent(JSON.stringify(params))}`;\n        return true;\n    }\n    return false;\n}\n", "import {\n    Adapter,\n    AdapterState,\n    isInBrowser,\n    WalletReadyState,\n    WalletSignMessageError,\n    WalletNotFoundError,\n    WalletDisconnectedError,\n    WalletSignTransactionError,\n    WalletGetNetworkError,\n    WalletConnectionError,\n    isInMobileBrowser,\n    WalletError,\n} from '@tronweb3/tronwallet-abstract-adapter';\nimport type {\n    Transaction,\n    SignedTransaction,\n    AdapterName,\n    BaseAdapterConfig,\n    Network,\n    TronWeb,\n} from '@tronweb3/tronwallet-abstract-adapter';\nimport { getNetworkInfoByTronWeb } from '@tronweb3/tronwallet-adapter-tronlink';\nimport type { Tron, TronAccountsChangedCallback } from '@tronweb3/tronwallet-adapter-tronlink';\nimport { openTokenPocket, supportTokenPocket } from './utils.js';\nimport type { TIP6963AnnounceProviderEvent } from '@tronweb3/tronwallet-abstract-adapter';\nimport {\n    TIP6963AnnounceProviderEventName,\n    TIP6963RequestProviderEventName,\n} from '@tronweb3/tronwallet-abstract-adapter';\n\nexport interface TokenPocketAdapterConfig extends BaseAdapterConfig {\n    /**\n     * Timeout in millisecond for checking if is in TokenPocket App.\n     * Default is 2 * 1000ms\n     */\n    checkTimeout?: number;\n    /**\n     * Set if open TokenPocket app using DeepLink.\n     * Default is true.\n     */\n    openAppWithDeeplink?: boolean;\n}\n\nexport const TokenPocketAdapterName = 'TokenPocket' as AdapterName<'TokenPocket'>;\n\nexport interface TokenPocketWallet {\n    ready: boolean;\n    tronWeb: TronWeb;\n    tron: Tron;\n}\n\ndeclare global {\n    interface Window {\n        tokenpocket?: TokenPocketWallet;\n    }\n}\n\nexport class TokenPocketAdapter extends Adapter {\n    name = TokenPocketAdapterName;\n    url = 'https://tokenpocket.pro/';\n    icon =\n        'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGc+CjxwYXRoIGQ9Ik0xMDQxLjUyIDBILTI3VjEwMjRIMTA0MS41MlYwWiIgZmlsbD0iIzI5ODBGRSIvPgo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfNDA4XzIyNSkiPgo8cGF0aCBkPSJNNDA2Ljc5NiA0MzguNjQzSDQwNi45MjdDNDA2Ljc5NiA0MzcuODU3IDQwNi43OTYgNDM2Ljk0IDQwNi43OTYgNDM2LjE1NFY0MzguNjQzWiIgZmlsbD0iIzI5QUVGRiIvPgo8cGF0aCBkPSJNNjY3LjYwMiA0NjMuNTMzSDUyMy4yNDlWNzI0LjA3NkM1MjMuMjQ5IDczNi4zODkgNTMzLjIwNCA3NDYuMzQ1IDU0NS41MTcgNzQ2LjM0NUg2NDUuMzMzQzY1Ny42NDcgNzQ2LjM0NSA2NjcuNjAyIDczNi4zODkgNjY3LjYwMiA3MjQuMDc2VjQ2My41MzNaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNDUzLjU2MyAyNzdINDQ4LjcxNkgxOTAuMjY5QzE3Ny45NTUgMjc3IDE2OCAyODYuOTU1IDE2OCAyOTkuMjY5VjM4OS42NTNDMTY4IDQwMS45NjcgMTc3Ljk1NSA0MTEuOTIyIDE5MC4yNjkgNDExLjkyMkgyNTAuOTE4SDI3NS4wMjFWNDM4LjY0NFY3MjQuNzMxQzI3NS4wMjEgNzM3LjA0NSAyODQuOTc2IDc0NyAyOTcuMjg5IDc0N0gzOTIuMTI4QzQwNC40NDEgNzQ3IDQxNC4zOTYgNzM3LjA0NSA0MTQuMzk2IDcyNC43MzFWNDM4LjY0NFY0MzYuMTU2VjQxMS45MjJINDM4LjQ5OUg0NDguMzIzSDQ1My4xN0M0OTAuMzcyIDQxMS45MjIgNTIwLjYzMSAzODEuNjYzIDUyMC42MzEgMzQ0LjQ2MUM1MjEuMDI0IDMwNy4yNTkgNDkwLjc2NSAyNzcgNDUzLjU2MyAyNzdaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNjY3LjczNSA0NjMuNTMzVjY0NS4zNUM2NzIuNzEzIDY0Ni41MjkgNjc3LjgyMSA2NDcuNDQ2IDY4My4wNjEgNjQ4LjIzMkM2OTAuMzk3IDY0OS4yOCA2OTcuOTk0IDY0OS45MzUgNzA1LjU5MiA2NTAuMDY2QzcwNS45ODUgNjUwLjA2NiA3MDYuMzc4IDY1MC4wNjYgNzA2LjkwMiA2NTAuMDY2VjUwNS40NUM2ODUuMDI2IDUwNC4wMDkgNjY3LjczNSA0ODUuODAxIDY2Ny43MzUgNDYzLjUzM1oiIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcl80MDhfMjI1KSIvPgo8cGF0aCBkPSJNNzA5Ljc4MSAyNzdDNjA2LjgyMiAyNzcgNTIzLjI0OSAzNjAuNTczIDUyMy4yNDkgNDYzLjUzM0M1MjMuMjQ5IDU1Mi4wODQgNTg0Ljk0NiA2MjYuMjI1IDY2Ny43MzMgNjQ1LjM1VjQ2My41MzNDNjY3LjczMyA0NDAuMzQ3IDY4Ni41OTYgNDIxLjQ4NCA3MDkuNzgxIDQyMS40ODRDNzMyLjk2NyA0MjEuNDg0IDc1MS44MyA0NDAuMzQ3IDc1MS44MyA0NjMuNTMzQzc1MS44MyA0ODMuMDUxIDczOC42IDQ5OS40MjUgNzIwLjUyMyA1MDQuMTRDNzE3LjExNyA1MDUuMDU3IDcxMy40NDkgNTA1LjU4MSA3MDkuNzgxIDUwNS41ODFWNjUwLjA2NkM3MTMuNDQ5IDY1MC4wNjYgNzE2Ljk4NiA2NDkuOTM1IDcyMC41MjMgNjQ5LjgwNEM4MTguNTA1IDY0NC4xNzEgODk2LjMxNCA1NjIuOTU2IDg5Ni4zMTQgNDYzLjUzM0M4OTYuNDQ1IDM2MC41NzMgODEyLjg3MiAyNzcgNzA5Ljc4MSAyNzdaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNzA5Ljc4IDY1MC4wNjZWNTA1LjU4MUM3MDguNzMzIDUwNS41ODEgNzA3LjgxNiA1MDUuNTgxIDcwNi43NjggNTA1LjQ1VjY1MC4wNjZDNzA3LjgxNiA2NTAuMDY2IDcwOC44NjQgNjUwLjA2NiA3MDkuNzggNjUwLjA2NloiIGZpbGw9IndoaXRlIi8+CjwvZz4KPC9nPgo8ZGVmcz4KPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDBfbGluZWFyXzQwOF8yMjUiIHgxPSI3MDkuODQ0IiB5MT0iNTU2LjgyNyIgeDI9IjY2Ny43NTMiIHkyPSI1NTYuODI3IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIHN0b3AtY29sb3I9IndoaXRlIi8+CjxzdG9wIG9mZnNldD0iMC45NjY3IiBzdG9wLWNvbG9yPSJ3aGl0ZSIgc3RvcC1vcGFjaXR5PSIwLjMyMzMiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSJ3aGl0ZSIgc3RvcC1vcGFjaXR5PSIwLjMiLz4KPC9saW5lYXJHcmFkaWVudD4KPGNsaXBQYXRoIGlkPSJjbGlwMF80MDhfMjI1Ij4KPHJlY3Qgd2lkdGg9IjcyOC40NDgiIGhlaWdodD0iNDcwIiBmaWxsPSJ3aGl0ZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTY4IDI3NykiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K';\n\n    config: Required<TokenPocketAdapterConfig>;\n    private _readyState: WalletReadyState = isInBrowser() ? WalletReadyState.Loading : WalletReadyState.NotFound;\n    private _state: AdapterState = AdapterState.Loading;\n    private _connecting: boolean;\n    private _wallet: TokenPocketWallet | null;\n    private _address: string | null;\n\n    constructor(config: TokenPocketAdapterConfig = {}) {\n        super();\n        const { checkTimeout = 2 * 1000, openUrlWhenWalletNotFound = true, openAppWithDeeplink = true } = config;\n        if (typeof checkTimeout !== 'number') {\n            throw new Error('[TokenPocketAdapter] config.checkTimeout should be a number');\n        }\n        this.config = {\n            checkTimeout,\n            openAppWithDeeplink,\n            openUrlWhenWalletNotFound,\n        };\n        this._connecting = false;\n        this._wallet = null;\n        this._address = null;\n\n        if (isInMobileBrowser() && supportTokenPocket()) {\n            this._readyState = WalletReadyState.Found;\n            this._updateWallet();\n        } else {\n            this._checkWallet().then(() => {\n                if (this.connected) {\n                    this.emit('connect', this.address || '');\n                }\n            });\n        }\n    }\n\n    get address() {\n        return this._address;\n    }\n\n    get state() {\n        return this._state;\n    }\n    get readyState() {\n        return this._readyState;\n    }\n\n    get connecting() {\n        return this._connecting;\n    }\n\n    /**\n     * Get network information.\n     * @returns {Network} Current network information.\n     */\n    async network(): Promise<Network> {\n        try {\n            await this._checkWallet();\n            if (this.state !== AdapterState.Connected) throw new WalletDisconnectedError();\n            const wallet = this._wallet;\n            if (!wallet || !wallet.tronWeb) throw new WalletDisconnectedError();\n            try {\n                return await getNetworkInfoByTronWeb(wallet.tronWeb);\n            } catch (e: any) {\n                throw new WalletGetNetworkError(e?.message, e);\n            }\n        } catch (e: any) {\n            this.emit('error', e);\n            throw e;\n        }\n    }\n\n    async connect(): Promise<void> {\n        try {\n            this.checkIfOpenApp();\n            if (this.connected || this.connecting) return;\n            await this._checkWallet();\n            if (this.readyState === WalletReadyState.NotFound) {\n                if (this.config.openUrlWhenWalletNotFound !== false && isInBrowser()) {\n                    window.open(this.url, '_blank');\n                }\n                throw new WalletNotFoundError();\n            }\n            if (!this._wallet) return;\n            this._connecting = true;\n            const wallet = this._wallet as TokenPocketWallet;\n            try {\n                const res = await wallet.tron.request({ method: 'eth_requestAccounts' });\n                if (!res?.[0]) {\n                    throw new WalletConnectionError('Request connect error.');\n                }\n                const address = res[0];\n\n                this.setAddress(address);\n                this.setState(AdapterState.Connected);\n                this.emit('connect', this.address || '');\n            } catch (e: any) {\n                if (e instanceof WalletError) {\n                    throw e;\n                } else {\n                    throw new WalletConnectionError(e?.message, e);\n                }\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        } finally {\n            this._connecting = false;\n        }\n    }\n\n    async disconnect(): Promise<void> {\n        if (this.state !== AdapterState.Connected) {\n            return;\n        }\n        this.setAddress(null);\n        this.setState(AdapterState.Disconnect);\n        this.emit('disconnect');\n    }\n\n    async signTransaction(transaction: Transaction, privateKey?: string): Promise<SignedTransaction> {\n        try {\n            const wallet = await this.checkAndGetWallet();\n            try {\n                return await wallet.tronWeb.trx.sign(transaction, privateKey);\n            } catch (error: any) {\n                if (error instanceof Error || (typeof error === 'object' && error.message)) {\n                    throw new WalletSignTransactionError(error.message, error);\n                } else if (typeof error === 'string') {\n                    throw new WalletSignTransactionError(error, new Error(error));\n                } else {\n                    throw new WalletSignTransactionError('Unknown error', error);\n                }\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    async multiSign(\n        transaction: Transaction,\n        privateKey?: string | false,\n        permissionId?: number\n    ): Promise<SignedTransaction> {\n        try {\n            const wallet = await this.checkAndGetWallet();\n            try {\n                return await wallet.tronWeb.trx.multiSign(transaction, privateKey, permissionId);\n            } catch (error: any) {\n                if (error instanceof Error || (typeof error === 'object' && error.message)) {\n                    throw new WalletSignTransactionError(error.message, error);\n                } else if (typeof error === 'string') {\n                    throw new WalletSignTransactionError(error, new Error(error));\n                } else {\n                    throw new WalletSignTransactionError('Unknown error', error);\n                }\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    async signMessage(message: string, privateKey?: string): Promise<string> {\n        try {\n            const wallet = await this.checkAndGetWallet();\n            try {\n                return await wallet.tronWeb.trx.signMessageV2(message, privateKey);\n            } catch (error: any) {\n                if (error instanceof Error || (typeof error === 'object' && error.message)) {\n                    throw new WalletSignMessageError(error.message, error);\n                } else if (typeof error === 'string') {\n                    throw new WalletSignMessageError(error, new Error(error));\n                } else {\n                    throw new WalletSignMessageError('Unknown error', error);\n                }\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    private onAccountsChanged: TronAccountsChangedCallback = (accounts) => {\n        const preAddr = this.address || '';\n        const curAddr = accounts?.[0] || '';\n        if (!curAddr) {\n            this.setAddress(null);\n            this.setState(AdapterState.Disconnect);\n        } else {\n            const address = curAddr as string;\n            this.setAddress(address);\n            this.setState(AdapterState.Connected);\n        }\n        this.emit('accountsChanged', this.address || '', preAddr);\n        if (!preAddr && this.address) {\n            this.emit('connect', this.address);\n        } else if (preAddr && !this.address) {\n            this.emit('disconnect');\n        }\n    };\n    private listenTronEvent() {\n        if (isInMobileBrowser()) {\n            return;\n        }\n        this.stopListenTronEvent();\n        const wallet = this._wallet;\n        if (!wallet || !wallet.tron) return;\n        wallet.tron.on('accountsChanged', this.onAccountsChanged);\n    }\n\n    private stopListenTronEvent() {\n        if (isInMobileBrowser()) {\n            return;\n        }\n        const wallet = this._wallet;\n        if (!wallet || !wallet.tron) return;\n        wallet.tron.removeListener('accountsChanged', this.onAccountsChanged);\n    }\n\n    private async checkAndGetWallet() {\n        this.checkIfOpenApp();\n        await this._checkWallet();\n        if (!this.connected) throw new WalletDisconnectedError();\n        const wallet = this._wallet;\n        if (!wallet || !wallet.tronWeb) throw new WalletDisconnectedError();\n        return wallet as TokenPocketWallet;\n    }\n\n    private checkIfOpenApp() {\n        if (this.config.openAppWithDeeplink === false) {\n            return;\n        }\n        if (openTokenPocket()) {\n            throw new WalletNotFoundError();\n        }\n    }\n\n    private checkReadyInterval: ReturnType<typeof setInterval> | null = null;\n    private checkForWalletReady() {\n        if (this.checkReadyInterval) {\n            return;\n        }\n        let times = 0;\n        const maxTimes = Math.floor(this.config.checkTimeout / 200);\n        const check = () => {\n            if (isInMobileBrowser() && window.tronWeb?.ready) {\n                this.checkReadyInterval && clearInterval(this.checkReadyInterval);\n                this.checkReadyInterval = null;\n                this._updateWallet();\n                this.emit('connect', this.address || '');\n            } else if (this._wallet?.tronWeb?.defaultAddress?.base58) {\n                this.checkReadyInterval && clearInterval(this.checkReadyInterval);\n                this.checkReadyInterval = null;\n                this._wallet.ready = true;\n                const address = this._wallet.tronWeb.defaultAddress.base58;\n                const state = address ? AdapterState.Connected : AdapterState.Disconnect;\n                this.setAddress(address);\n                this.setState(state);\n                this.emit('connect', this.address || '');\n            } else if (times > maxTimes) {\n                this.checkReadyInterval && clearInterval(this.checkReadyInterval);\n                this.checkReadyInterval = null;\n            } else {\n                times++;\n            }\n        };\n        this.checkReadyInterval = setInterval(check, 200);\n    }\n\n    private _checkPromise: Promise<boolean> | null = null;\n    /**\n     * check if wallet exists by interval, the promise only resolve when wallet detected or timeout\n     * @returns if wallet exists\n     */\n    private _checkWallet(): Promise<boolean> {\n        if (this.readyState === WalletReadyState.Found) {\n            return Promise.resolve(true);\n        }\n        if (this._checkPromise) {\n            return this._checkPromise;\n        }\n\n        if (isInBrowser() && !isInMobileBrowser()) {\n            this._checkPromise = new Promise((resolve) => {\n                const timer = setTimeout(() => {\n                    window.removeEventListener(TIP6963AnnounceProviderEventName, handler);\n                    this._updateWallet();\n                    if (supportTokenPocket()) {\n                        this._readyState = WalletReadyState.Found;\n                        resolve(true);\n                    } else {\n                        this._readyState = WalletReadyState.NotFound;\n                        resolve(false);\n                    }\n                    this.emit('readyStateChanged', this._readyState);\n                }, this.config.checkTimeout);\n                const handler = (event: TIP6963AnnounceProviderEvent) => {\n                    const { info, provider } = event.detail;\n                    if (info.name === 'TokenPocket') {\n                        this._wallet = {\n                            ready: !!provider.tronWeb?.defaultAddress?.base58,\n                            tron: provider as unknown as Tron,\n                            tronWeb: provider.tronWeb,\n                        };\n                        this.listenTronEvent();\n                        this._readyState = WalletReadyState.Found;\n                        const address = this._wallet.tronWeb.defaultAddress?.base58 || null;\n                        const state = address ? AdapterState.Connected : AdapterState.Disconnect;\n                        this.setState(state);\n                        this.setAddress(address);\n                        this.emit('readyStateChanged', this.readyState);\n                        window.removeEventListener(TIP6963AnnounceProviderEventName, handler);\n                        clearTimeout(timer);\n                        resolve(true);\n\n                        if (!this.connected) {\n                            this.checkForWalletReady();\n                        }\n                    }\n                };\n                window.addEventListener(TIP6963AnnounceProviderEventName, handler);\n                window.dispatchEvent(new Event(TIP6963RequestProviderEventName));\n            });\n            return this._checkPromise;\n        }\n        // Support TIP-6963 with wallet extension\n\n        const interval = 100;\n        const maxTimes = Math.floor(this.config.checkTimeout / interval);\n        let times = 0,\n            timer: ReturnType<typeof setInterval>;\n        this._checkPromise = new Promise((resolve) => {\n            const check = () => {\n                times++;\n                const isSupport = supportTokenPocket();\n                if (isSupport || times > maxTimes) {\n                    timer && clearInterval(timer);\n                    this._readyState = isSupport ? WalletReadyState.Found : WalletReadyState.NotFound;\n                    this._updateWallet();\n                    this.emit('readyStateChanged', this.readyState);\n                    resolve(isSupport);\n                }\n            };\n            timer = setInterval(check, interval);\n            check();\n        });\n        return this._checkPromise;\n    }\n\n    private _updateWallet = () => {\n        let state = this.state;\n        let address = this.address;\n        if (supportTokenPocket()) {\n            const tron = window.tokenpocket?.tron as Tron;\n            this._wallet = isInMobileBrowser()\n                ? ({\n                      tron,\n                      ready: window.tronWeb?.ready,\n                      tronWeb: window.tokenpocket?.tronWeb,\n                  } as TokenPocketWallet)\n                : {\n                      tron,\n                      ready: !!(tron?.tronWeb as TronWeb).defaultAddress?.base58 || false,\n                      tronWeb: tron?.tronWeb as TronWeb,\n                  };\n            address = this._wallet.tronWeb.defaultAddress?.base58 || null;\n            state = address ? AdapterState.Connected : AdapterState.Disconnect;\n            if (!address) {\n                this.checkForWalletReady();\n            }\n        } else {\n            this._wallet = null;\n            address = null;\n            state = AdapterState.NotFound;\n        }\n        this.setAddress(address);\n        this.setState(state);\n    };\n\n    private setAddress(address: string | null) {\n        this._address = address;\n    }\n\n    private setState(state: AdapterState) {\n        const preState = this.state;\n        if (state !== preState) {\n            this._state = state;\n            this.emit('stateChanged', state);\n        }\n    }\n}\n", "import { isInMobileBrowser } from '@tronweb3/tronwallet-abstract-adapter';\n\nexport function supportBitgetWallet() {\n    return !!window.tronLink && (window as any).isBitKeep;\n}\n\nexport function openBitgetWallet() {\n    if (isInMobileBrowser() && !supportBitgetWallet()) {\n        const { origin, pathname, search, hash } = window.location;\n        const url = origin + pathname + search + hash;\n        location.href = `https://bkcode.vip?action=dapp&url=${encodeURIComponent(url)}`;\n        return true;\n    }\n    return false;\n}\n", "import {\n    Adapter,\n    AdapterState,\n    isInBrowser,\n    WalletReadyState,\n    WalletSignMessageError,\n    WalletNotFoundError,\n    WalletDisconnectedError,\n    WalletSignTransactionError,\n    WalletConnectionError,\n    WalletGetNetworkError,\n    isInMobileBrowser,\n    WalletError,\n} from '@tronweb3/tronwallet-abstract-adapter';\nimport { getNetworkInfoByTronWeb } from '@tronweb3/tronwallet-adapter-tronlink';\nimport type { Tron, TronLinkWallet } from '@tronweb3/tronwallet-adapter-tronlink';\nimport type {\n    Transaction,\n    SignedTransaction,\n    AdapterName,\n    BaseAdapterConfig,\n    Network,\n    TronWeb,\n} from '@tronweb3/tronwallet-abstract-adapter';\nimport { openBitgetWallet, supportBitgetWallet } from './utils.js';\n\ndeclare global {\n    interface Window {\n        bitkeep: {\n            tron: Tron;\n            tronLink: TronLinkWallet;\n            tronWeb: TronWeb;\n        };\n    }\n}\n\nexport interface BitKeepAdapterConfig extends BaseAdapterConfig {\n    /**\n     * Timeout in millisecond for checking if Bitget Wallet is supported.\n     * Default is 2 * 1000ms\n     */\n    checkTimeout?: number;\n    /**\n     * Set if open Wallet's website url when wallet is not installed.\n     * Default is true.\n     */\n    openUrlWhenWalletNotFound?: boolean;\n    /**\n     * Set if open Bitget Wallet app using DeepLink.\n     * Default is true.\n     */\n    openAppWithDeeplink?: boolean;\n}\n\nexport const BitgetWalletAdapterName = 'Bitget Wallet' as AdapterName<'Bitget Wallet'>;\n\nexport class BitKeepAdapter extends Adapter {\n    name = BitgetWalletAdapterName;\n    url = 'https://web3.bitget.com';\n    icon =\n        'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiBmaWxsPSIjMDAxRjI5Ii8+CjxwYXRoIGQ9Ik0yMTkuOTQ4IDk1LjcwMjJDMjAxLjYyMyA5NS42OTI5IDE4My4zMyA5NS42ODM1IDE2NC45NDEgOTUuNzExNkMxNTMuODIyIDk1LjcxMTYgMTQ5LjY1MSAxMDkuNjcxIDE1Ny45MjEgMTE3LjkzOUwyODMuMDk4IDI0My4xMTdDMjg3LjAwNCAyNDYuNjkgMjg5LjQ0MSAyNTAuNTc0IDI4OS41MyAyNTUuNjkzQzI4OS40NDEgMjYwLjgxMiAyODcuMDA0IDI2NC42OTYgMjgzLjA5OCAyNjguMjY5TDE1Ny45MjEgMzkzLjQ0NkMxNDkuNjUxIDQwMS43MTUgMTUzLjgyMiA0MTUuNjc0IDE2NC45NDEgNDE1LjY3NEMxODMuMzMgNDE1LjcwMiAyMDEuNjIzIDQxNS42OTMgMjE5Ljk0OCA0MTUuNjgzQzIyOS4xMjIgNDE1LjY3OSAyMzguMzA1IDQxNS42NzQgMjQ3LjUxMSA0MTUuNjc0QzI1OS41NTUgNDE1LjY3NCAyNjYuNzIgNDA5LjI0IDI3My4xNTQgNDAyLjgwNUwzODYuMDQ3IDI4OS45MTJDMzk1LjA1NyAyODAuOTAyIDQwMy4xMTkgMjY4LjkzOSA0MDMuMDA5IDI1NS42OTNDNDAzLjExOSAyNDIuNDQ3IDM5NS4wNTcgMjMwLjQ4NCAzODYuMDQ3IDIyMS40NzRMMjczLjE1NCAxMDguNThDMjY2LjcyIDEwMi4xNDYgMjU5LjU1NSA5NS43MTE2IDI0Ny41MTEgOTUuNzExNkMyMzguMzA1IDk1LjcxMTYgMjI5LjEyMiA5NS43MDY5IDIxOS45NDggOTUuNzAyMloiIGZpbGw9IiMwMEYwRkYiLz4KPC9zdmc+Cg==';\n    config: Required<BitKeepAdapterConfig>;\n    private _readyState: WalletReadyState = WalletReadyState.Loading;\n    private _state: AdapterState = AdapterState.Loading;\n    private _connecting: boolean;\n    private _wallet: {\n        tronWeb: TronWeb;\n        tron: TronLinkWallet;\n    } | null;\n    private _address: string | null;\n\n    constructor(config: BitKeepAdapterConfig = {}) {\n        super();\n        const { checkTimeout = 2 * 1000, openUrlWhenWalletNotFound = true, openAppWithDeeplink = true } = config;\n        if (typeof checkTimeout !== 'number') {\n            throw new Error('[BitKeepAdapter] config.checkTimeout should be a number');\n        }\n        this.config = {\n            checkTimeout,\n            openUrlWhenWalletNotFound,\n            openAppWithDeeplink,\n        };\n        this._connecting = false;\n        this._wallet = null;\n        this._address = null;\n\n        if (!isInBrowser()) {\n            this._readyState = WalletReadyState.NotFound;\n            this.setState(AdapterState.NotFound);\n            return;\n        }\n        if (supportBitgetWallet()) {\n            this._readyState = WalletReadyState.Found;\n            this._updateWallet();\n        } else {\n            this._checkWallet().then(() => {\n                if (this.connected) {\n                    this.emit('connect', this.address || '');\n                }\n            });\n        }\n    }\n\n    get address() {\n        return this._address;\n    }\n\n    get state() {\n        return this._state;\n    }\n    get readyState() {\n        return this._readyState;\n    }\n\n    get connecting() {\n        return this._connecting;\n    }\n\n    /**\n     * Get network information.\n     * @returns {Network} Current network information.\n     */\n    async network(): Promise<Network> {\n        try {\n            await this._checkWallet();\n            if (this.state !== AdapterState.Connected) throw new WalletDisconnectedError();\n            const wallet = this._wallet;\n            if (!wallet || !wallet.tronWeb) throw new WalletDisconnectedError();\n            try {\n                return await getNetworkInfoByTronWeb(wallet.tronWeb);\n            } catch (e: any) {\n                throw new WalletGetNetworkError(e?.message, e);\n            }\n        } catch (e: any) {\n            this.emit('error', e);\n            throw e;\n        }\n    }\n\n    async connect(): Promise<void> {\n        try {\n            this.checkIfOpenApp();\n            if (this.connected || this.connecting) return;\n            await this._checkWallet();\n            if (this.readyState === WalletReadyState.NotFound) {\n                if (this.config.openUrlWhenWalletNotFound !== false && isInBrowser()) {\n                    window.open(this.url, '_blank');\n                }\n                throw new WalletNotFoundError();\n            }\n            const wallet = this._wallet;\n            if (!isInMobileBrowser()) {\n                if (!wallet) return;\n                this._connecting = true;\n                try {\n                    const res = await wallet.tron.request({ method: 'tron_requestAccounts' });\n                    if (res?.code !== 200) {\n                        throw new WalletConnectionError(\n                            // @ts-ignore\n                            res?.code === 40001 ? 'The connection request is canceled by user.' : res?.message\n                        );\n                    }\n                } catch (e: any) {\n                    if (e instanceof WalletError) {\n                        throw e;\n                    } else {\n                        throw new WalletConnectionError(e?.message, e);\n                    }\n                }\n            }\n            const address =\n                wallet?.tronWeb.defaultAddress?.base58 || window.bitkeep?.tronWeb?.defaultAddress?.base58 || '';\n            this.setAddress(address);\n            this.setState(AdapterState.Connected);\n            this.emit('connect', this.address || '');\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        } finally {\n            this._connecting = false;\n        }\n    }\n\n    async disconnect(): Promise<void> {\n        if (this.state !== AdapterState.Connected) {\n            return;\n        }\n        this.setAddress(null);\n        this.setState(AdapterState.Disconnect);\n        this.emit('disconnect');\n    }\n\n    async signTransaction(transaction: Transaction, privateKey?: string): Promise<SignedTransaction> {\n        try {\n            const wallet = await this.checkAndGetWallet();\n\n            try {\n                return await wallet.tronWeb.trx.sign(transaction, privateKey);\n            } catch (error: any) {\n                if (error instanceof Error) {\n                    throw new WalletSignTransactionError(error.message, error);\n                } else {\n                    throw new WalletSignTransactionError(error, new Error(error));\n                }\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    async multiSign(\n        transaction: Transaction,\n        privateKey?: string | false,\n        permissionId?: number\n    ): Promise<SignedTransaction> {\n        try {\n            const wallet = await this.checkAndGetWallet();\n            try {\n                return await wallet.tronWeb.trx.multiSign(transaction, privateKey, permissionId);\n            } catch (error: any) {\n                if (error instanceof Error) {\n                    throw new WalletSignTransactionError(error.message, error);\n                } else {\n                    throw new WalletSignTransactionError(error, new Error(error));\n                }\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    async signMessage(message: string, privateKey?: string): Promise<string> {\n        try {\n            const wallet = await this.checkAndGetWallet();\n            try {\n                return await wallet.tronWeb.trx.signMessageV2(message, privateKey);\n            } catch (error: any) {\n                if (error instanceof Error) {\n                    throw new WalletSignMessageError(error.message, error);\n                } else {\n                    throw new WalletSignMessageError(error, new Error(error));\n                }\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    private async checkAndGetWallet() {\n        this.checkIfOpenApp();\n        await this._checkWallet();\n        if (!this.connected) throw new WalletDisconnectedError();\n        const wallet = this._wallet;\n        if (!wallet || !wallet.tronWeb) throw new WalletDisconnectedError();\n        return wallet;\n    }\n\n    private checkReadyInterval: ReturnType<typeof setInterval> | null = null;\n    private checkForWalletReady() {\n        if (this.checkReadyInterval) {\n            return;\n        }\n        let times = 0;\n        const maxTimes = Math.floor(this.config.checkTimeout / 200);\n        const check = async () => {\n            if (this._wallet && this._wallet?.tron.ready) {\n                this.checkReadyInterval && clearInterval(this.checkReadyInterval);\n                this.checkReadyInterval = null;\n                await this._updateWallet();\n                this.emit('connect', this.address || '');\n            } else if (times > maxTimes) {\n                this.checkReadyInterval && clearInterval(this.checkReadyInterval);\n                this.checkReadyInterval = null;\n            } else {\n                times++;\n            }\n        };\n        this.checkReadyInterval = setInterval(check, 200);\n    }\n\n    private _checkPromise: Promise<boolean> | null = null;\n    /**\n     * check if wallet exists by interval, the promise only resolve when wallet detected or timeout\n     * @returns if wallet exists\n     */\n    private _checkWallet(): Promise<boolean> {\n        if (this.readyState === WalletReadyState.Found) {\n            return Promise.resolve(true);\n        }\n        if (this._checkPromise) {\n            return this._checkPromise;\n        }\n        const interval = 100;\n        const maxTimes = Math.floor(this.config.checkTimeout / interval);\n        let times = 0,\n            timer: ReturnType<typeof setInterval>;\n        this._checkPromise = new Promise((resolve) => {\n            const check = () => {\n                times++;\n                const isSupport = supportBitgetWallet();\n                if (isSupport || times > maxTimes) {\n                    timer && clearInterval(timer);\n                    this._readyState = isSupport ? WalletReadyState.Found : WalletReadyState.NotFound;\n                    this._updateWallet();\n                    this.emit('readyStateChanged', this.readyState);\n                    resolve(isSupport);\n                }\n            };\n            timer = setInterval(check, interval);\n            check();\n        });\n        return this._checkPromise;\n    }\n\n    private checkIfOpenApp() {\n        if (this.config.openAppWithDeeplink === false) {\n            return;\n        }\n        if (openBitgetWallet()) {\n            throw new WalletNotFoundError();\n        }\n    }\n\n    private _updateWallet = async () => {\n        let state = this.state;\n        let address = this.address;\n        if (supportBitgetWallet()) {\n            if (isInMobileBrowser()) {\n                const tron = window.bitkeep?.tronLink as unknown as TronLinkWallet;\n                this._wallet = {\n                    tron,\n                    tronWeb: tron?.tronWeb,\n                };\n            } else {\n                const tronWeb = window.bitkeep?.tronWeb as unknown as TronWeb;\n                this._wallet = {\n                    tron: window.bitkeep.tronLink as unknown as TronLinkWallet,\n                    tronWeb,\n                };\n            }\n\n            address = this._wallet.tron?.ready ? this._wallet.tronWeb.defaultAddress?.base58 || null : '';\n            state = this._wallet.tron?.ready ? AdapterState.Connected : AdapterState.Disconnect;\n            if (!this._wallet.tron?.ready) {\n                this.checkForWalletReady();\n            }\n        } else {\n            this._wallet = null;\n            address = null;\n            state = AdapterState.NotFound;\n        }\n        this.setAddress(address);\n        this.setState(state);\n    };\n\n    private setAddress(address: string | null) {\n        this._address = address;\n    }\n\n    private setState(state: AdapterState) {\n        const preState = this.state;\n        if (state !== preState) {\n            this._state = state;\n            this.emit('stateChanged', state);\n        }\n    }\n}\n", "import { isInMobileBrowser } from '@tronweb3/tronwallet-abstract-adapter';\n\nexport function supportOkxWallet() {\n    return !!(window.okxwallet && window.okxwallet.tronLink);\n}\n\nexport const isOKApp = typeof navigator !== 'undefined' && /OKApp/i.test(navigator.userAgent);\nexport function isInOKApp() {\n    if (typeof window !== 'undefined' && typeof window.navigator !== 'undefined') {\n        return /OKApp/i.test(window.navigator.userAgent);\n    }\n    return false;\n}\nexport function openOkxWallet() {\n    if (!isInOKApp() && isInMobileBrowser()) {\n        window.location.href = 'okx://wallet/dapp/url?dappUrl=' + encodeURIComponent(window.location.href);\n        return true;\n    }\n    return false;\n}\n", "import {\n    Adapter,\n    AdapterState,\n    isInBrowser,\n    WalletReadyState,\n    WalletSignMessageError,\n    WalletNotFoundError,\n    WalletDisconnectedError,\n    WalletConnectionError,\n    WalletSignTransactionError,\n    WalletGetNetworkError,\n} from '@tronweb3/tronwallet-abstract-adapter';\nimport type {\n    Transaction,\n    SignedTransaction,\n    AdapterName,\n    BaseAdapterConfig,\n    Network,\n} from '@tronweb3/tronwallet-abstract-adapter';\nimport type {\n    AccountsChangedEventData,\n    TronLinkMessageEvent,\n    TronLinkWallet,\n} from '@tronweb3/tronwallet-adapter-tronlink';\nimport { getNetworkInfoByTronWeb } from '@tronweb3/tronwallet-adapter-tronlink';\nimport { openOkxWallet, supportOkxWallet } from './utils.js';\n\ndeclare global {\n    interface Window {\n        okxwallet?: {\n            tronLink: TronLinkWallet;\n        };\n    }\n}\nexport interface OkxWalletAdapterConfig extends BaseAdapterConfig {\n    /**\n     * Timeout in millisecond for checking if OkxWallet wallet exists.\n     * Default is 2 * 1000ms\n     */\n    checkTimeout?: number;\n    /**\n     * Set if open OkxWallet app using DeepLink.\n     * Default is true.\n     */\n    openAppWithDeeplink?: boolean;\n}\n\nexport const OkxWalletAdapterName = 'OKX Wallet' as AdapterName<'OKX Wallet'>;\n\nexport class OkxWalletAdapter extends Adapter {\n    name = OkxWalletAdapterName;\n    url = 'https://okx.com';\n    icon =\n        'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiByeD0iOCIgZmlsbD0iYmxhY2siLz4KPHBhdGggZD0iTTIzLjU1ODMgMTUuODk2NUgxNi40NDc0QzE2LjE0NTMgMTUuODk2NSAxNS45MDA0IDE2LjE0MTQgMTUuOTAwNCAxNi40NDM1VjIzLjU1NDRDMTUuOTAwNCAyMy44NTY1IDE2LjE0NTMgMjQuMTAxNCAxNi40NDc0IDI0LjEwMTRIMjMuNTU4M0MyMy44NjA0IDI0LjEwMTQgMjQuMTA1MyAyMy44NTY1IDI0LjEwNTMgMjMuNTU0NFYxNi40NDM1QzI0LjEwNTMgMTYuMTQxNCAyMy44NjA0IDE1Ljg5NjUgMjMuNTU4MyAxNS44OTY1WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTE2LjQ0NzQgMTYuMzk2NUgyMy41NTgzQzIzLjU4NDIgMTYuMzk2NSAyMy42MDUzIDE2LjQxNzUgMjMuNjA1MyAxNi40NDM1VjIzLjU1NDRDMjMuNjA1MyAyMy41ODAzIDIzLjU4NDIgMjMuNjAxNCAyMy41NTgzIDIzLjYwMTRIMTYuNDQ3NEMxNi40MjE0IDIzLjYwMTQgMTYuNDAwNCAyMy41ODAzIDE2LjQwMDQgMjMuNTU0NFYxNi40NDM1QzE2LjQwMDQgMTYuNDE3NSAxNi40MjE0IDE2LjM5NjUgMTYuNDQ3NCAxNi4zOTY1WiIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLW9wYWNpdHk9IjAuMTUiLz4KPHBhdGggZD0iTTE1LjM1MDMgNy42OTE0MUg4LjIzOTM3QzcuOTM3MjggNy42OTE0MSA3LjY5MjM4IDcuOTM2MyA3LjY5MjM4IDguMjM4NFYxNS4zNDkzQzcuNjkyMzggMTUuNjUxNCA3LjkzNzI4IDE1Ljg5NjMgOC4yMzkzNyAxNS44OTYzSDE1LjM1MDNDMTUuNjUyMyAxNS44OTYzIDE1Ljg5NzIgMTUuNjUxNCAxNS44OTcyIDE1LjM0OTNWOC4yMzg0QzE1Ljg5NzIgNy45MzYzIDE1LjY1MjMgNy42OTE0MSAxNS4zNTAzIDcuNjkxNDFaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNOC4yMzkzNyA4LjE5MTQxSDE1LjM1MDNDMTUuMzc2MiA4LjE5MTQxIDE1LjM5NzIgOC4yMTI0NSAxNS4zOTcyIDguMjM4NFYxNS4zNDkzQzE1LjM5NzIgMTUuMzc1MiAxNS4zNzYyIDE1LjM5NjMgMTUuMzUwMyAxNS4zOTYzSDguMjM5MzdDOC4yMTM0MiAxNS4zOTYzIDguMTkyMzggMTUuMzc1MiA4LjE5MjM4IDE1LjM0OTNWOC4yMzg0QzguMTkyMzggOC4yMTI0NCA4LjIxMzQyIDguMTkxNDEgOC4yMzkzNyA4LjE5MTQxWiIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLW9wYWNpdHk9IjAuMTUiLz4KPHBhdGggZD0iTTMxLjc2MDQgNy42OTE0MUgyNC42NDk1QzI0LjM0NzQgNy42OTE0MSAyNC4xMDI1IDcuOTM2MyAyNC4xMDI1IDguMjM4NFYxNS4zNDkzQzI0LjEwMjUgMTUuNjUxNCAyNC4zNDc0IDE1Ljg5NjMgMjQuNjQ5NSAxNS44OTYzSDMxLjc2MDRDMzIuMDYyNSAxNS44OTYzIDMyLjMwNzQgMTUuNjUxNCAzMi4zMDc0IDE1LjM0OTNWOC4yMzg0QzMyLjMwNzQgNy45MzYzIDMyLjA2MjUgNy42OTE0MSAzMS43NjA0IDcuNjkxNDFaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMjQuNjQ5NSA4LjE5MTQxSDMxLjc2MDRDMzEuNzg2NCA4LjE5MTQxIDMxLjgwNzQgOC4yMTI0NSAzMS44MDc0IDguMjM4NFYxNS4zNDkzQzMxLjgwNzQgMTUuMzc1MiAzMS43ODY0IDE1LjM5NjMgMzEuNzYwNCAxNS4zOTYzSDI0LjY0OTVDMjQuNjIzNiAxNS4zOTYzIDI0LjYwMjUgMTUuMzc1MiAyNC42MDI1IDE1LjM0OTNWOC4yMzg0QzI0LjYwMjUgOC4yMTI0NCAyNC42MjM2IDguMTkxNDEgMjQuNjQ5NSA4LjE5MTQxWiIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLW9wYWNpdHk9IjAuMTUiLz4KPHBhdGggZD0iTTE1LjM1MDMgMjQuMDk5Nkg4LjIzOTM3QzcuOTM3MjggMjQuMDk5NiA3LjY5MjM4IDI0LjM0NDUgNy42OTIzOCAyNC42NDY2VjMxLjc1NzVDNy42OTIzOCAzMi4wNTk2IDcuOTM3MjggMzIuMzA0NSA4LjIzOTM3IDMyLjMwNDVIMTUuMzUwM0MxNS42NTI0IDMyLjMwNDUgMTUuODk3MyAzMi4wNTk2IDE1Ljg5NzMgMzEuNzU3NVYyNC42NDY2QzE1Ljg5NzMgMjQuMzQ0NSAxNS42NTI0IDI0LjA5OTYgMTUuMzUwMyAyNC4wOTk2WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTguMjM5MzcgMjQuNTk5NkgxNS4zNTAzQzE1LjM3NjIgMjQuNTk5NiAxNS4zOTczIDI0LjYyMDYgMTUuMzk3MyAyNC42NDY2VjMxLjc1NzVDMTUuMzk3MyAzMS43ODM0IDE1LjM3NjIgMzEuODA0NSAxNS4zNTAzIDMxLjgwNDVIOC4yMzkzN0M4LjIxMzQyIDMxLjgwNDUgOC4xOTIzOCAzMS43ODM0IDguMTkyMzggMzEuNzU3NVYyNC42NDY2QzguMTkyMzggMjQuNjIwNiA4LjIxMzQyIDI0LjU5OTYgOC4yMzkzNyAyNC41OTk2WiIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLW9wYWNpdHk9IjAuMTUiLz4KPHBhdGggZD0iTTMxLjc2MDQgMjQuMDk5NkgyNC42NDk1QzI0LjM0NzQgMjQuMDk5NiAyNC4xMDI1IDI0LjM0NDUgMjQuMTAyNSAyNC42NDY2VjMxLjc1NzVDMjQuMTAyNSAzMi4wNTk2IDI0LjM0NzQgMzIuMzA0NSAyNC42NDk1IDMyLjMwNDVIMzEuNzYwNEMzMi4wNjI1IDMyLjMwNDUgMzIuMzA3NCAzMi4wNTk2IDMyLjMwNzQgMzEuNzU3NVYyNC42NDY2QzMyLjMwNzQgMjQuMzQ0NSAzMi4wNjI1IDI0LjA5OTYgMzEuNzYwNCAyNC4wOTk2WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTI0LjY0OTUgMjQuNTk5NkgzMS43NjA0QzMxLjc4NjQgMjQuNTk5NiAzMS44MDc0IDI0LjYyMDYgMzEuODA3NCAyNC42NDY2VjMxLjc1NzVDMzEuODA3NCAzMS43ODM0IDMxLjc4NjQgMzEuODA0NSAzMS43NjA0IDMxLjgwNDVIMjQuNjQ5NUMyNC42MjM2IDMxLjgwNDUgMjQuNjAyNSAzMS43ODM0IDI0LjYwMjUgMzEuNzU3NVYyNC42NDY2QzI0LjYwMjUgMjQuNjIwNiAyNC42MjM2IDI0LjU5OTYgMjQuNjQ5NSAyNC41OTk2WiIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLW9wYWNpdHk9IjAuMTUiLz4KPC9zdmc+Cg==';\n\n    config: Required<OkxWalletAdapterConfig>;\n    private _readyState: WalletReadyState = isInBrowser() ? WalletReadyState.Loading : WalletReadyState.NotFound;\n    private _state: AdapterState = AdapterState.Loading;\n    private _connecting: boolean;\n    private _wallet: TronLinkWallet | null;\n    private _address: string | null;\n\n    constructor(config: OkxWalletAdapterConfig = {}) {\n        super();\n        const { checkTimeout = 2 * 1000, openUrlWhenWalletNotFound = true, openAppWithDeeplink = true } = config;\n        if (typeof checkTimeout !== 'number') {\n            throw new Error('[OkxWalletAdapter] config.checkTimeout should be a number');\n        }\n        this.config = {\n            checkTimeout,\n            openAppWithDeeplink,\n            openUrlWhenWalletNotFound,\n        };\n        this._connecting = false;\n        this._wallet = null;\n        this._address = null;\n\n        if (!isInBrowser()) {\n            this._readyState = WalletReadyState.NotFound;\n            this.setState(AdapterState.NotFound);\n            return;\n        }\n        if (supportOkxWallet()) {\n            this._readyState = WalletReadyState.Found;\n            this._updateWallet();\n        } else {\n            this._checkWallet().then(() => {\n                if (this.connected) {\n                    this.emit('connect', this.address || '');\n                }\n            });\n        }\n    }\n\n    get address() {\n        return this._address;\n    }\n\n    get state() {\n        return this._state;\n    }\n    get readyState() {\n        return this._readyState;\n    }\n\n    get connecting() {\n        return this._connecting;\n    }\n\n    /**\n     * Get network information used by OkxWallet.\n     * @returns {Network} Current network information.\n     */\n    async network(): Promise<Network> {\n        try {\n            await this._checkWallet();\n            if (this.state !== AdapterState.Connected) throw new WalletDisconnectedError();\n            const wallet = this._wallet;\n            if (!wallet || !wallet.tronWeb) throw new WalletDisconnectedError();\n            try {\n                return await getNetworkInfoByTronWeb(wallet.tronWeb);\n            } catch (e: any) {\n                throw new WalletGetNetworkError(e?.message, e);\n            }\n        } catch (e: any) {\n            this.emit('error', e);\n            throw e;\n        }\n    }\n\n    async connect(): Promise<void> {\n        try {\n            this.checkIfOpenOkxWallet();\n            if (this.connected || this.connecting) return;\n            await this._checkWallet();\n            if (this.state === AdapterState.NotFound) {\n                if (this.config.openUrlWhenWalletNotFound !== false && isInBrowser()) {\n                    window.open(this.url, '_blank');\n                }\n                throw new WalletNotFoundError();\n            }\n            if (!this._wallet) return;\n            this._connecting = true;\n            const wallet = this._wallet as TronLinkWallet;\n            try {\n                const res = await wallet.request({ method: 'tron_requestAccounts' });\n                if (!res) {\n                    throw new WalletConnectionError('Request connect error.');\n                }\n                if (res.code === 4000) {\n                    throw new WalletConnectionError(\n                        'The same DApp has already initiated a request to connect to OkxWallet, and the pop-up window has not been closed.'\n                    );\n                }\n                if (res.code === 4001) {\n                    throw new WalletConnectionError('The user rejected connection.');\n                }\n            } catch (error: any) {\n                throw new WalletConnectionError(error?.message, error);\n            }\n\n            const address = wallet.tronWeb.defaultAddress?.base58 || '';\n            this.setAddress(address);\n            this.setState(AdapterState.Connected);\n            this._listenEvent();\n            this.connected && this.emit('connect', this.address || '');\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        } finally {\n            this._connecting = false;\n        }\n    }\n\n    async disconnect(): Promise<void> {\n        this._stopListenEvent();\n        if (this.state !== AdapterState.Connected) {\n            return;\n        }\n        this.setAddress(null);\n        this.setState(AdapterState.Disconnect);\n        this.emit('disconnect');\n    }\n\n    async signTransaction(transaction: Transaction, privateKey?: string): Promise<SignedTransaction> {\n        try {\n            const wallet = await this.checkAndGetWallet();\n\n            try {\n                return await wallet.tronWeb.trx.sign(transaction, privateKey);\n            } catch (error: any) {\n                if (error instanceof Error || (typeof error === 'object' && error.message)) {\n                    throw new WalletSignTransactionError(error.message, error);\n                } else if (typeof error === 'string') {\n                    throw new WalletSignTransactionError(error, new Error(error));\n                } else {\n                    throw new WalletSignTransactionError('Unknown error', error);\n                }\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    async multiSign(\n        transaction: Transaction,\n        privateKey?: string | false,\n        permissionId?: number\n    ): Promise<SignedTransaction> {\n        try {\n            const wallet = await this.checkAndGetWallet();\n\n            try {\n                return await wallet.tronWeb.trx.multiSign(transaction, privateKey, permissionId);\n            } catch (error: any) {\n                if (error instanceof Error || (typeof error === 'object' && error.message)) {\n                    throw new WalletSignTransactionError(error.message, error);\n                } else if (typeof error === 'string') {\n                    throw new WalletSignTransactionError(error, new Error(error));\n                } else {\n                    throw new WalletSignTransactionError('Unknown error', error);\n                }\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    async signMessage(message: string, privateKey?: string): Promise<string> {\n        try {\n            const wallet = await this.checkAndGetWallet();\n            try {\n                return await wallet.tronWeb.trx.signMessageV2(message, privateKey);\n            } catch (error: any) {\n                if (error instanceof Error || (typeof error === 'object' && error.message)) {\n                    throw new WalletSignMessageError(error.message, error);\n                } else if (typeof error === 'string') {\n                    throw new WalletSignMessageError(error, new Error(error));\n                } else {\n                    throw new WalletSignMessageError('Unknown error', error);\n                }\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    private async checkAndGetWallet() {\n        this.checkIfOpenOkxWallet();\n        await this._checkWallet();\n        if (this.state !== AdapterState.Connected) throw new WalletDisconnectedError();\n        const wallet = this._wallet;\n        if (!wallet || !wallet.tronWeb) throw new WalletDisconnectedError();\n        return wallet as TronLinkWallet;\n    }\n\n    private _listenEvent() {\n        this._stopListenEvent();\n        window.addEventListener('message', this.messageHandler);\n    }\n\n    private _stopListenEvent() {\n        window.removeEventListener('message', this.messageHandler);\n    }\n\n    private messageHandler = (e: TronLinkMessageEvent) => {\n        const message = e.data?.message;\n        if (!message) {\n            return;\n        }\n        if (message.action === 'accountsChanged') {\n            setTimeout(() => {\n                const preAddr = this.address || '';\n                if ((this._wallet as TronLinkWallet)?.ready) {\n                    const address = (message.data as AccountsChangedEventData).address;\n                    this.setAddress(address);\n                    this.setState(AdapterState.Connected);\n                } else {\n                    this.setAddress(null);\n                    this.setState(AdapterState.Disconnect);\n                }\n                const address = this.address || '';\n                if (address !== preAddr) {\n                    this.emit('accountsChanged', this.address || '', preAddr);\n                }\n                if (!preAddr && this.address) {\n                    this.emit('connect', this.address);\n                } else if (preAddr && !this.address) {\n                    this.emit('disconnect');\n                }\n            }, 200);\n        } else if (message.action === 'connect') {\n            const isCurConnected = this.connected;\n            const preAddress = this.address || '';\n            const address = (this._wallet as TronLinkWallet).tronWeb?.defaultAddress?.base58 || '';\n            this.setAddress(address);\n            this.setState(AdapterState.Connected);\n            if (!isCurConnected) {\n                this.emit('connect', address);\n            } else if (address !== preAddress) {\n                this.emit('accountsChanged', this.address || '', preAddress);\n            }\n        } else if (message.action === 'disconnect') {\n            this.setAddress(null);\n            this.setState(AdapterState.Disconnect);\n            this.emit('disconnect');\n        }\n    };\n\n    private checkIfOpenOkxWallet() {\n        if (this.config.openAppWithDeeplink === false) {\n            return;\n        }\n        if (openOkxWallet()) {\n            throw new WalletNotFoundError();\n        }\n    }\n\n    private _checkPromise: Promise<boolean> | null = null;\n    /**\n     * check if wallet exists by interval, the promise only resolve when wallet detected or timeout\n     * @returns if OkxWallet exists\n     */\n    private _checkWallet(): Promise<boolean> {\n        if (this.readyState === WalletReadyState.Found) {\n            return Promise.resolve(true);\n        }\n        if (this._checkPromise) {\n            return this._checkPromise;\n        }\n        const interval = 100;\n        const maxTimes = Math.floor(this.config.checkTimeout / interval);\n        let times = 0,\n            timer: ReturnType<typeof setInterval>;\n        this._checkPromise = new Promise((resolve) => {\n            const check = () => {\n                times++;\n                const isSupport = supportOkxWallet();\n                if (isSupport || times > maxTimes) {\n                    timer && clearInterval(timer);\n                    this._readyState = isSupport ? WalletReadyState.Found : WalletReadyState.NotFound;\n                    this._updateWallet();\n                    this.emit('readyStateChanged', this.readyState);\n                    resolve(isSupport);\n                }\n            };\n            timer = setInterval(check, interval);\n            check();\n        });\n        return this._checkPromise;\n    }\n\n    private _updateWallet = () => {\n        let state = this.state;\n        let address = this.address;\n        if (supportOkxWallet()) {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            this._wallet = window.okxwallet!.tronLink;\n            this._listenEvent();\n            address = this._wallet.tronWeb?.defaultAddress?.base58 || null;\n            state = this._wallet.ready ? AdapterState.Connected : AdapterState.Disconnect;\n        } else {\n            this._wallet = null;\n            address = null;\n            state = AdapterState.NotFound;\n        }\n        this.setAddress(address);\n        this.setState(state);\n    };\n\n    private setAddress(address: string | null) {\n        this._address = address;\n    }\n\n    private setState(state: AdapterState) {\n        const preState = this.state;\n        if (state !== preState) {\n            this._state = state;\n            this.emit('stateChanged', state);\n        }\n    }\n}\n", "import { isInMobileBrowser } from '@tronweb3/tronwallet-abstract-adapter';\n\nexport function supportGateWallet() {\n    return !!(window.gatewallet && window.gatewallet.tronLink);\n}\n\nexport const isGateApp = typeof navigator !== 'undefined' && /GateApp/i.test(navigator.userAgent);\nexport function isInGateApp() {\n    if (typeof window !== 'undefined' && typeof window.navigator !== 'undefined') {\n        return /GateApp/i.test(window.navigator.userAgent);\n    }\n    return false;\n}\nexport function openGateWallet() {\n    if (!isInGateApp() && isInMobileBrowser()) {\n        window.location.href =\n            'https://gateio.onelink.me/DmA6/web3?dapp_url=' + encodeURIComponent(window.location.href);\n        return true;\n    }\n    return false;\n}\n", "import {\n    Adapter,\n    AdapterState,\n    isInBrowser,\n    WalletReadyState,\n    WalletSignMessageError,\n    WalletNotFoundError,\n    WalletDisconnectedError,\n    WalletConnectionError,\n    WalletSignTransactionError,\n    WalletGetNetworkError,\n} from '@tronweb3/tronwallet-abstract-adapter';\nimport type {\n    Transaction,\n    SignedTransaction,\n    AdapterName,\n    BaseAdapterConfig,\n    Network,\n    EventEmitter,\n} from '@tronweb3/tronwallet-abstract-adapter';\nimport type { TronWeb, TronLinkWallet, ReqestAccountsResponse } from '@tronweb3/tronwallet-adapter-tronlink';\nimport { getNetworkInfoByTronWeb } from '@tronweb3/tronwallet-adapter-tronlink';\nimport { openGateWallet, supportGateWallet, isGateApp } from './utils.js';\n\ninterface GateReqestAccountsResponseErr extends ReqestAccountsResponse {\n    rpcUrl?: string;\n    accountAddress?: string;\n    hex?: string;\n}\n\ntype GateReqestAccountsResponse = GateReqestAccountsResponseErr | Array<string>;\n\ntype GateAccountChangeEventRes = Array<string>;\n\ninterface TronTronWeb extends TronWeb {\n    ready: boolean;\n}\n\ninterface TronWallet extends EventEmitter {\n    request(config: Record<string, unknown>): Promise<GateReqestAccountsResponse | null>;\n    tronWeb: TronTronWeb;\n}\n\ninterface GateWallet extends EventEmitter {\n    tronLink: TronLinkWallet;\n    tron: TronWallet;\n}\n\ndeclare global {\n    interface Window {\n        gatewallet?: GateWallet;\n    }\n}\n\nexport interface GateWalletAdapterConfig extends BaseAdapterConfig {\n    /**\n     * Timeout in millisecond for checking if GateWallet wallet exists.\n     * Default is 2 * 1000ms\n     */\n    checkTimeout?: number;\n    /**\n     * Set if open GateWallet app using DeepLink.\n     * Default is true.\n     */\n    openAppWithDeeplink?: boolean;\n}\n\nexport const GateWalletAdapterName = 'Gate Wallet' as AdapterName<'Gate Wallet'>;\n\nexport class GateWalletAdapter extends Adapter {\n    name = GateWalletAdapterName;\n    url = 'https://gate.io';\n    icon =\n        'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPG1hc2sgaWQ9Im1hc2swXzQ1ODJfNzgxIiBzdHlsZT0ibWFzay10eXBlOmFscGhhIiBtYXNrVW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4PSIwIiB5PSIwIiB3aWR0aD0iNDAiIGhlaWdodD0iNDAiPgo8cGF0aCBkPSJNMCA4QzAgMy41ODE3MiAzLjU4MTcyIDAgOCAwSDMyQzM2LjQxODMgMCA0MCAzLjU4MTcyIDQwIDhWMzJDNDAgMzYuNDE4MyAzNi40MTgzIDQwIDMyIDQwSDhDMy41ODE3MiA0MCAwIDM2LjQxODMgMCAzMlY4WiIgZmlsbD0id2hpdGUiLz4KPC9tYXNrPgo8ZyBtYXNrPSJ1cmwoI21hc2swXzQ1ODJfNzgxKSI+CjxwYXRoIGQ9Ik0wIDhDMCAzLjU4MTcyIDMuNTgxNzIgMCA4IDBIMzJDMzYuNDE4MyAwIDQwIDMuNTgxNzIgNDAgOFYzMkM0MCAzNi40MTgzIDM2LjQxODMgNDAgMzIgNDBIOEMzLjU4MTcyIDQwIDAgMzYuNDE4MyAwIDMyVjhaIiBmaWxsPSIjMDA1MUQyIi8+CjwvZz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0zNSAyMEMzNSAyOC4yODQzIDI4LjI4NDMgMzUgMjAgMzVDMTEuNzE1NyAzNSA1IDI4LjI4NDMgNSAyMEM1IDExLjcxNTcgMTEuNzE1NyA1IDIwIDVWMTIuMDU4N0MyMCAxMi4wNTg3IDE5Ljk5OTkgMTIuMDU4NyAxOS45OTk5IDEyLjA1ODdDMTUuNjE0MSAxMi4wNTg3IDEyLjA1ODcgMTUuNjE0MSAxMi4wNTg3IDE5Ljk5OTlDMTIuMDU4NyAyNC4zODU3IDE1LjYxNDEgMjcuOTQxMSAxOS45OTk5IDI3Ljk0MTFDMjQuMzg1NiAyNy45NDExIDI3Ljk0MSAyNC4zODU3IDI3Ljk0MTEgMjBIMzVaIiBmaWxsPSJ3aGl0ZSIvPgo8cmVjdCB4PSIyMCIgeT0iMTIuMDU4NiIgd2lkdGg9IjcuOTQxMTgiIGhlaWdodD0iNy45NDExOCIgZmlsbD0iIzE0RTBBMSIvPgo8L3N2Zz4K';\n\n    config: Required<GateWalletAdapterConfig>;\n    private _readyState: WalletReadyState = isInBrowser() ? WalletReadyState.Loading : WalletReadyState.NotFound;\n    private _state: AdapterState = AdapterState.Loading;\n    private _connecting: boolean;\n    private _wallet: TronWallet | TronLinkWallet | null;\n    private _address: string | null;\n\n    constructor(config: GateWalletAdapterConfig = {}) {\n        super();\n        const { checkTimeout = 2 * 1000, openUrlWhenWalletNotFound = true, openAppWithDeeplink = true } = config;\n        if (typeof checkTimeout !== 'number') {\n            throw new Error('[GateWalletAdapter] config.checkTimeout should be a number');\n        }\n        this.config = {\n            checkTimeout,\n            openAppWithDeeplink,\n            openUrlWhenWalletNotFound,\n        };\n        this._connecting = false;\n        this._wallet = null;\n        this._address = null;\n\n        if (!isInBrowser()) {\n            this._readyState = WalletReadyState.NotFound;\n            this.setState(AdapterState.NotFound);\n            return;\n        }\n        if (supportGateWallet()) {\n            this._readyState = WalletReadyState.Found;\n            this._updateWallet();\n        } else {\n            this._checkWallet().then(() => {\n                if (this.connected) {\n                    this.emit('connect', this.address || '');\n                }\n            });\n        }\n    }\n\n    get address() {\n        return this._address;\n    }\n\n    get state() {\n        return this._state;\n    }\n    get readyState() {\n        return this._readyState;\n    }\n\n    get connecting() {\n        return this._connecting;\n    }\n\n    /**\n     * Get network information used by GateWallet.\n     * @returns {Network} Current network information.\n     */\n    async network(): Promise<Network> {\n        try {\n            await this._checkWallet();\n            if (this.state !== AdapterState.Connected) throw new WalletDisconnectedError();\n            const wallet = this._wallet;\n            if (!wallet || !wallet.tronWeb) throw new WalletDisconnectedError();\n            try {\n                return await getNetworkInfoByTronWeb(wallet.tronWeb);\n            } catch (e: any) {\n                throw new WalletGetNetworkError(e?.message, e);\n            }\n        } catch (e: any) {\n            this.emit('error', e);\n            throw e;\n        }\n    }\n\n    async connect(): Promise<void> {\n        try {\n            this.checkIfOpenGateWallet();\n            if (this.connected || this.connecting) return;\n            await this._checkWallet();\n            if (this.state === AdapterState.NotFound) {\n                if (this.config.openUrlWhenWalletNotFound !== false && isInBrowser()) {\n                    window.open(this.url, '_blank');\n                }\n                throw new WalletNotFoundError();\n            }\n            if (!this._wallet) return;\n            this._connecting = true;\n            const wallet = this._wallet;\n            let res: GateReqestAccountsResponse | undefined | null;\n            try {\n                const method = isGateApp ? 'tron_requestAccounts' : 'eth_requestAccounts';\n                res = await wallet.request({ method });\n                if (!res) {\n                    throw new WalletConnectionError('Request connect error.');\n                }\n                if ((res as GateReqestAccountsResponseErr).code === 4000) {\n                    throw new WalletConnectionError(\n                        'The same DApp has already initiated a request to connect to GateWallet, and the pop-up window has not been closed.'\n                    );\n                }\n                if ((res as GateReqestAccountsResponseErr).code === 4001) {\n                    throw new WalletConnectionError('The user rejected connection.');\n                }\n            } catch (error: any) {\n                throw new WalletConnectionError(error?.message, error);\n            }\n\n            const address = (isGateApp ? wallet.tronWeb.defaultAddress?.base58 : (res as Array<string>)[0]) || '';\n            this.setAddress(address);\n            this.setState(AdapterState.Connected);\n            this._listenEvent();\n            this.connected && this.emit('connect', this.address || '');\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        } finally {\n            this._connecting = false;\n        }\n    }\n\n    async disconnect(): Promise<void> {\n        this._stopListenEvent();\n        if (this.state !== AdapterState.Connected) {\n            return;\n        }\n        this.setAddress(null);\n        this.setState(AdapterState.Disconnect);\n        this.emit('disconnect');\n    }\n\n    async signTransaction(transaction: Transaction, privateKey?: string): Promise<SignedTransaction> {\n        try {\n            const wallet = await this.checkAndGetWallet();\n\n            try {\n                return await wallet.tronWeb.trx.sign(transaction, privateKey);\n            } catch (error: any) {\n                if (error instanceof Error || (typeof error === 'object' && error.message)) {\n                    throw new WalletSignTransactionError(error.message, error);\n                } else if (typeof error === 'string') {\n                    throw new WalletSignTransactionError(error, new Error(error));\n                } else {\n                    throw new WalletSignTransactionError('Unknown error', error);\n                }\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    async multiSign(\n        transaction: Transaction,\n        privateKey?: string | false,\n        permissionId?: number\n    ): Promise<SignedTransaction> {\n        try {\n            const wallet = await this.checkAndGetWallet();\n\n            try {\n                return await wallet.tronWeb.trx.multiSign(transaction, privateKey, permissionId);\n            } catch (error: any) {\n                if (error instanceof Error || (typeof error === 'object' && error.message)) {\n                    throw new WalletSignTransactionError(error.message, error);\n                } else if (typeof error === 'string') {\n                    throw new WalletSignTransactionError(error, new Error(error));\n                } else {\n                    throw new WalletSignTransactionError('Unknown error', error);\n                }\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    async signMessage(message: string, privateKey?: string): Promise<string> {\n        try {\n            const wallet = await this.checkAndGetWallet();\n            try {\n                return await wallet.tronWeb.trx.signMessageV2(message, privateKey);\n            } catch (error: any) {\n                if (error instanceof Error || (typeof error === 'object' && error.message)) {\n                    throw new WalletSignMessageError(error.message, error);\n                } else if (typeof error === 'string') {\n                    throw new WalletSignMessageError(error, new Error(error));\n                } else {\n                    throw new WalletSignMessageError('Unknown error', error);\n                }\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    private async checkAndGetWallet() {\n        this.checkIfOpenGateWallet();\n        await this._checkWallet();\n        if (this.state !== AdapterState.Connected) throw new WalletDisconnectedError();\n        const wallet = this._wallet;\n        if (!wallet || !wallet.tronWeb) throw new WalletDisconnectedError();\n        return wallet as TronLinkWallet;\n    }\n\n    private _listenEvent() {\n        this._stopListenEvent();\n        if (isGateApp) return;\n        (this._wallet as TronWallet).on('accountsChanged', this.onGateAccountChange);\n    }\n\n    private _stopListenEvent() {\n        if (isGateApp) return;\n        (this._wallet as TronWallet).off('accountsChanged', this.onGateAccountChange);\n    }\n\n    private onGateAccountChange = (res: GateAccountChangeEventRes) => {\n        setTimeout(() => {\n            const preAddr = this.address || '';\n            if (res.length !== 0) {\n                const address = res[0];\n                this.setAddress(address);\n                this.setState(AdapterState.Connected);\n            } else {\n                this.setAddress(null);\n                this.setState(AdapterState.Disconnect);\n            }\n            const address = this.address || '';\n            if (address !== preAddr) {\n                this.emit('accountsChanged', this.address || '', preAddr);\n            }\n            if (!preAddr && this.address) {\n                this.emit('connect', this.address);\n            } else if (preAddr && !this.address) {\n                this.emit('disconnect');\n            }\n        }, 200);\n    };\n\n    private checkIfOpenGateWallet() {\n        if (this.config.openAppWithDeeplink === false) {\n            return;\n        }\n        if (openGateWallet()) {\n            throw new WalletNotFoundError();\n        }\n    }\n\n    private _checkPromise: Promise<boolean> | null = null;\n    /**\n     * check if wallet exists by interval, the promise only resolve when wallet detected or timeout\n     * @returns if GateWallet exists\n     */\n    private _checkWallet(): Promise<boolean> {\n        if (this.readyState === WalletReadyState.Found) {\n            return Promise.resolve(true);\n        }\n        if (this._checkPromise) {\n            return this._checkPromise;\n        }\n        const interval = 100;\n        const maxTimes = Math.floor(this.config.checkTimeout / interval);\n        let times = 0,\n            timer: ReturnType<typeof setInterval>;\n        this._checkPromise = new Promise((resolve) => {\n            const check = () => {\n                times++;\n                const isSupport = supportGateWallet();\n                if (isSupport || times > maxTimes) {\n                    timer && clearInterval(timer);\n                    this._readyState = isSupport ? WalletReadyState.Found : WalletReadyState.NotFound;\n                    this._updateWallet();\n                    this.emit('readyStateChanged', this.readyState);\n                    resolve(isSupport);\n                }\n            };\n            timer = setInterval(check, interval);\n            check();\n        });\n        return this._checkPromise;\n    }\n\n    private _updateWallet = () => {\n        let state = this.state;\n        let address = this.address;\n        if (supportGateWallet()) {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            this._wallet = isGateApp ? window.gatewallet!.tronLink : window.gatewallet!.tron;\n            this._listenEvent();\n            address = this._wallet.tronWeb?.defaultAddress?.base58 || null;\n            const ready = isGateApp\n                ? (this._wallet as TronLinkWallet).ready\n                : (this._wallet.tronWeb as TronTronWeb).ready;\n            state = ready ? AdapterState.Connected : AdapterState.Disconnect;\n        } else {\n            this._wallet = null;\n            address = null;\n            state = AdapterState.NotFound;\n        }\n        this.setAddress(address);\n        this.setState(state);\n    };\n\n    private setAddress(address: string | null) {\n        this._address = address;\n    }\n\n    private setState(state: AdapterState) {\n        const preState = this.state;\n        if (state !== preState) {\n            this._state = state;\n            this.emit('stateChanged', state);\n        }\n    }\n}\n", "import { isInMobileBrowser } from '@tronweb3/tronwallet-abstract-adapter';\n\nexport function supportImToken() {\n    return !!(window as any).imToken && !!window.tronWeb;\n}\n\nexport function openImTokenApp() {\n    if (isInMobileBrowser() && !supportImToken()) {\n        const { origin, pathname, search, hash } = window.location;\n        const url = origin + pathname + search + hash;\n        location.href = `imtokenv2://navigate/DappView?url=${encodeURIComponent(url)}`;\n        return true;\n    }\n    return false;\n}\n", "import {\n    Adapter,\n    AdapterState,\n    isInBrowser,\n    WalletReadyState,\n    WalletSignMessageError,\n    WalletNotFoundError,\n    WalletDisconnectedError,\n    WalletSignTransactionError,\n    WalletGetNetworkError,\n} from '@tronweb3/tronwallet-abstract-adapter';\nimport { getNetworkInfoByTronWeb } from '@tronweb3/tronwallet-adapter-tronlink';\nimport type { TronLinkWallet } from '@tronweb3/tronwallet-adapter-tronlink';\nimport type {\n    Transaction,\n    SignedTransaction,\n    AdapterName,\n    BaseAdapterConfig,\n    Network,\n} from '@tronweb3/tronwallet-abstract-adapter';\nimport { openImTokenApp, supportImToken } from './utils.js';\n\nexport interface ImTokenAdapterConfig extends BaseAdapterConfig {\n    /**\n     * Timeout in millisecond for checking if imToken Wallet is supported.\n     * Default is 2 * 1000ms\n     */\n    checkTimeout?: number;\n    /**\n     * Set if open imToken Wallet app using DeepLink.\n     * Default is true.\n     */\n    openAppWithDeeplink?: boolean;\n}\n\nexport const ImTokenWalletAdapterName = 'imToken Wallet' as AdapterName<'imToken Wallet'>;\n\nexport class ImTokenAdapter extends Adapter {\n    name = ImTokenWalletAdapterName;\n    url = 'https://token.im/';\n    // prettier-ignore\n    icon = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEzIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMyA1MTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF84OTNfMjU5OSkiPgo8bWFzayBpZD0ibWFzazBfODkzXzI1OTkiIHN0eWxlPSJtYXNrLXR5cGU6bHVtaW5hbmNlIiBtYXNrVW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4PSIwIiB5PSIwIiB3aWR0aD0iNTEzIiBoZWlnaHQ9IjUxMiI+CjxwYXRoIGQ9Ik01MTIuMzE5IDBIMC4zMTkzMzZWNTEySDUxMi4zMTlWMFoiIGZpbGw9IndoaXRlIi8+CjwvbWFzaz4KPGcgbWFzaz0idXJsKCNtYXNrMF84OTNfMjU5OSkiPgo8cGF0aCBkPSJNMzk3Ljc0NiAwSDExNS43NDZDNTIuMjMzMyAwIDAuNzQ2MDk0IDUxLjQ4NzMgMC43NDYwOTQgMTE1VjM5N0MwLjc0NjA5NCA0NjAuNTEzIDUyLjIzMzMgNTEyIDExNS43NDYgNTEySDM5Ny43NDZDNDYxLjI1OSA1MTIgNTEyLjc0NiA0NjAuNTEzIDUxMi43NDYgMzk3VjExNUM1MTIuNzQ2IDUxLjQ4NzMgNDYxLjI1OSAwIDM5Ny43NDYgMFoiIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcl84OTNfMjU5OSkiLz4KPHBhdGggZD0iTTQxNy40MzYgMTU4LjI5MUM0MjguMDg0IDMwMi41MDcgMzM1LjM4MiAzNzAuNjcgMjUyLjI3NyAzNzcuOTM5QzE3NS4wMTQgMzg0LjY5NiAxMDIuMjg3IDMzNy4yMjEgOTUuOTA2NyAyNjQuMjc5QzkwLjY0MzYgMjA0LjAxNyAxMjcuODg5IDE3OC4zNjEgMTU3LjE1MiAxNzUuODA0QzE4Ny4yNDkgMTczLjE2NSAyMTIuNTQyIDE5My45MjEgMjE0LjczNiAyMTkuMDUyQzIxNi44NDkgMjQzLjIxMyAyMDEuNzczIDI1NC4yMTEgMTkxLjI4OCAyNTUuMTI2QzE4Mi45OTYgMjU1Ljg1MyAxNzIuNTY0IDI1MC44MTkgMTcxLjYyMiAyNDAuMDFDMTcwLjgxNCAyMzAuNzIyIDE3NC4zNDEgMjI5LjQ1NyAxNzMuNDc5IDIxOS41OUMxNzEuOTQ1IDIwMi4wMjQgMTU2LjYyNyAxOTkuOTc4IDE0OC4yNDEgMjAwLjcwNUMxMzguMDkyIDIwMS41OTQgMTE5LjY3OCAyMTMuNDM5IDEyMi4yNjIgMjQyLjk0NEMxMjQuODYgMjcyLjcwNSAxNTMuMzk2IDI5Ni4yMjEgMTkwLjgwMyAyOTIuOTVDMjMxLjE3MSAyODkuNDIzIDI1OS4yNzYgMjU3Ljk5MyAyNjEuMzkgMjEzLjkxQzI2MS4zNyAyMTEuNTc1IDI2MS44NjIgMjA5LjI2NCAyNjIuODMgMjA3LjEzOUwyNjIuODQzIDIwNy4wODZDMjYzLjI3OCAyMDYuMTYyIDI2My43ODcgMjA1LjI3NSAyNjQuMzY0IDIwNC40MzRDMjY1LjIyNiAyMDMuMTQyIDI2Ni4zMyAyMDEuNzE1IDI2Ny43NTYgMjAwLjE1M0MyNjcuNzcgMjAwLjExMyAyNjcuNzcgMjAwLjExMyAyNjcuNzk3IDIwMC4xMTNDMjY4LjgzMyAxOTguOTQyIDI3MC4wODUgMTk3LjY3NyAyNzEuNDk4IDE5Ni4zMTdDMjg5LjEzMiAxNzkuNjggMzUyLjYzOCAxNDAuNDQzIDQxMi42OTggMTUyLjg2N0M0MTMuOTY4IDE1My4xMzkgNDE1LjExNSAxNTMuODE0IDQxNS45NjkgMTU0Ljc5MkM0MTYuODIzIDE1NS43NyA0MTcuMzM3IDE1Ni45OTcgNDE3LjQzNiAxNTguMjkxWiIgZmlsbD0id2hpdGUiLz4KPC9nPgo8L2c+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXJfODkzXzI1OTkiIHgxPSI1MTIuNDQiIHkxPSI4Ni41MTkiIHgyPSIxOC4wMjE5IiB5Mj0iMjc5LjUwMiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgo8c3RvcCBzdG9wLWNvbG9yPSIjMENDNUZGIi8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzAwN0ZGRiIvPgo8L2xpbmVhckdyYWRpZW50Pgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzg5M18yNTk5Ij4KPHJlY3Qgd2lkdGg9IjUxMyIgaGVpZ2h0PSI1MTIiIGZpbGw9IndoaXRlIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg==';\n    config: Required<ImTokenAdapterConfig>;\n    private _readyState: WalletReadyState = WalletReadyState.Loading;\n    private _state: AdapterState = AdapterState.Loading;\n    private _connecting: boolean;\n    private _wallet: TronLinkWallet | null;\n    private _address: string | null;\n\n    constructor(config: ImTokenAdapterConfig = {}) {\n        super();\n        const { checkTimeout = 2 * 1000, openUrlWhenWalletNotFound = true, openAppWithDeeplink = true } = config;\n        if (typeof checkTimeout !== 'number') {\n            throw new Error('[ImTokenAdapter] config.checkTimeout should be a number');\n        }\n        this.config = {\n            checkTimeout,\n            openUrlWhenWalletNotFound,\n            openAppWithDeeplink,\n        };\n        this._connecting = false;\n        this._wallet = null;\n        this._address = null;\n\n        if (!isInBrowser()) {\n            this._readyState = WalletReadyState.NotFound;\n            this.setState(AdapterState.NotFound);\n            return;\n        }\n        if (supportImToken()) {\n            this._readyState = WalletReadyState.Found;\n            this._updateWallet();\n        } else {\n            this._checkWallet().then(() => {\n                if (this.connected) {\n                    this.emit('connect', this.address || '');\n                }\n            });\n        }\n    }\n\n    get address() {\n        return this._address;\n    }\n\n    get state() {\n        return this._state;\n    }\n    get readyState() {\n        return this._readyState;\n    }\n\n    get connecting() {\n        return this._connecting;\n    }\n\n    /**\n     * Get network information.\n     * @returns {Network} Current network information.\n     */\n    async network(): Promise<Network> {\n        try {\n            await this._checkWallet();\n            if (this.state !== AdapterState.Connected) throw new WalletDisconnectedError();\n            const wallet = this._wallet;\n            if (!wallet || !wallet.tronWeb) throw new WalletDisconnectedError();\n            try {\n                return await getNetworkInfoByTronWeb(wallet.tronWeb);\n            } catch (e: any) {\n                throw new WalletGetNetworkError(e?.message, e);\n            }\n        } catch (e: any) {\n            this.emit('error', e);\n            throw e;\n        }\n    }\n\n    async connect(): Promise<void> {\n        try {\n            this.checkIfOpenApp();\n            if (this.connected || this.connecting) return;\n            await this._checkWallet();\n            if (this.readyState === WalletReadyState.NotFound) {\n                if (this.config.openUrlWhenWalletNotFound !== false && isInBrowser()) {\n                    window.open(this.url, '_blank');\n                }\n                throw new WalletNotFoundError();\n            }\n            const wallet = this._wallet as TronLinkWallet;\n            const address = wallet.tronWeb.defaultAddress?.base58 || '';\n            this.setAddress(address);\n            this.setState(AdapterState.Connected);\n            this.emit('connect', this.address || '');\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        } finally {\n            this._connecting = false;\n        }\n    }\n\n    async disconnect(): Promise<void> {\n        if (this.state !== AdapterState.Connected) {\n            return;\n        }\n        this.setAddress(null);\n        this.setState(AdapterState.Disconnect);\n        this.emit('disconnect');\n    }\n\n    async signTransaction(transaction: Transaction, privateKey?: string): Promise<SignedTransaction> {\n        try {\n            const wallet = await this.checkAndGetWallet();\n\n            try {\n                return await wallet.tronWeb.trx.sign(transaction, privateKey);\n            } catch (error: any) {\n                if (error instanceof Error || (typeof error === 'object' && error.message)) {\n                    throw new WalletSignTransactionError(error.message, error);\n                } else if (typeof error === 'string') {\n                    throw new WalletSignTransactionError(error, new Error(error));\n                } else {\n                    throw new WalletSignTransactionError('Unknown error', error);\n                }\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    async multiSign(\n        transaction: Transaction,\n        privateKey?: string | false,\n        permissionId?: number\n    ): Promise<SignedTransaction> {\n        try {\n            const wallet = await this.checkAndGetWallet();\n            try {\n                return await wallet.tronWeb.trx.multiSign(transaction, privateKey, permissionId);\n            } catch (error: any) {\n                if (error instanceof Error || (typeof error === 'object' && error.message)) {\n                    throw new WalletSignTransactionError(error.message, error);\n                } else if (typeof error === 'string') {\n                    throw new WalletSignTransactionError(error, new Error(error));\n                } else {\n                    throw new WalletSignTransactionError('Unknown error', error);\n                }\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    async signMessage(message: string, privateKey?: string): Promise<string> {\n        try {\n            const wallet = await this.checkAndGetWallet();\n            try {\n                return await wallet.tronWeb.trx.signMessageV2(message, privateKey);\n            } catch (error: any) {\n                if (error instanceof Error || (typeof error === 'object' && error.message)) {\n                    throw new WalletSignMessageError(error.message, error);\n                } else if (typeof error === 'string') {\n                    throw new WalletSignMessageError(error, new Error(error));\n                } else {\n                    throw new WalletSignMessageError('Unknown error', error);\n                }\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    private async checkAndGetWallet() {\n        this.checkIfOpenApp();\n        await this._checkWallet();\n        if (!this.connected) throw new WalletDisconnectedError();\n        const wallet = this._wallet;\n        if (!wallet || !wallet.tronWeb) throw new WalletDisconnectedError();\n        return wallet as TronLinkWallet;\n    }\n\n    private checkReadyInterval: ReturnType<typeof setInterval> | null = null;\n    private checkForWalletReady() {\n        if (this.checkReadyInterval) {\n            return;\n        }\n        let times = 0;\n        const maxTimes = Math.floor(this.config.checkTimeout / 200);\n        const check = async () => {\n            if (this._wallet && this._wallet.ready) {\n                this.checkReadyInterval && clearInterval(this.checkReadyInterval);\n                this.checkReadyInterval = null;\n                await this._updateWallet();\n                this.emit('connect', this.address || '');\n            } else if (times > maxTimes) {\n                this.checkReadyInterval && clearInterval(this.checkReadyInterval);\n                this.checkReadyInterval = null;\n            } else {\n                times++;\n            }\n        };\n        this.checkReadyInterval = setInterval(check, 200);\n    }\n\n    private _checkPromise: Promise<boolean> | null = null;\n    /**\n     * check if wallet exists by interval, the promise only resolve when wallet detected or timeout\n     * @returns if wallet exists\n     */\n    private _checkWallet(): Promise<boolean> {\n        if (this.readyState === WalletReadyState.Found) {\n            return Promise.resolve(true);\n        }\n        if (this._checkPromise) {\n            return this._checkPromise;\n        }\n        const interval = 100;\n        const maxTimes = Math.floor(this.config.checkTimeout / interval);\n        let times = 0,\n            timer: ReturnType<typeof setInterval>;\n        this._checkPromise = new Promise((resolve) => {\n            const check = () => {\n                times++;\n                const isSupport = supportImToken();\n                if (isSupport || times > maxTimes) {\n                    timer && clearInterval(timer);\n                    this._readyState = isSupport ? WalletReadyState.Found : WalletReadyState.NotFound;\n                    this._updateWallet();\n                    this.emit('readyStateChanged', this.readyState);\n                    resolve(isSupport);\n                }\n            };\n            timer = setInterval(check, interval);\n            check();\n        });\n        return this._checkPromise;\n    }\n\n    private checkIfOpenApp() {\n        if (this.config.openAppWithDeeplink === false) {\n            return;\n        }\n        if (openImTokenApp()) {\n            throw new WalletNotFoundError();\n        }\n    }\n    private _updateWallet = async () => {\n        let state = this.state;\n        let address = this.address;\n        if (supportImToken()) {\n            this._wallet = {\n                ready: window.tronWeb?.ready || false,\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                tronWeb: window.tronWeb!,\n                request: () => Promise.resolve(null),\n            };\n            address = this._wallet.tronWeb.defaultAddress?.base58 || null;\n            state = this._wallet.ready ? AdapterState.Connected : AdapterState.Disconnect;\n            if (!this._wallet.ready) {\n                this.checkForWalletReady();\n            }\n        } else {\n            this._wallet = null;\n            address = null;\n            state = AdapterState.NotFound;\n        }\n        this.setAddress(address);\n        this.setState(state);\n    };\n\n    private setAddress(address: string | null) {\n        this._address = address;\n    }\n\n    private setState(state: AdapterState) {\n        const preState = this.state;\n        if (state !== preState) {\n            this._state = state;\n            this.emit('stateChanged', state);\n        }\n    }\n}\n", "import { isInMobileBrowser } from '@tronweb3/tronwallet-abstract-adapter';\n\nexport function supportFoxWallet() {\n    return (\n        !!isInMobileBrowser && !!(window.foxwallet && window.foxwallet.tronLink && window.foxwallet.tronLink.tronWeb)\n    );\n}\n\nexport function openFoxWallet() {\n    if (isInMobileBrowser() && !supportFoxWallet()) {\n        const { origin, pathname, search, hash } = window.location;\n        const url = origin + pathname + search + hash;\n        location.href = `foxwallet://dapp?url=${encodeURIComponent(url)}`;\n        return true;\n    }\n    return false;\n}\n", "import {\n    Adapter,\n    AdapterState,\n    isInBrowser,\n    WalletReadyState,\n    WalletSignMessageError,\n    WalletNotFoundError,\n    WalletDisconnectedError,\n    WalletSignTransactionError,\n    WalletGetNetworkError,\n    isInMobileBrowser,\n    WalletConnectionError,\n} from '@tronweb3/tronwallet-abstract-adapter';\nimport { getNetworkInfoByTronWeb } from '@tronweb3/tronwallet-adapter-tronlink';\nimport type { TronLinkWallet } from '@tronweb3/tronwallet-adapter-tronlink';\nimport type {\n    Transaction,\n    SignedTransaction,\n    AdapterName,\n    BaseAdapterConfig,\n    Network,\n} from '@tronweb3/tronwallet-abstract-adapter';\nimport { openFoxWallet, supportFoxWallet } from './utils.js';\n\ndeclare global {\n    interface Window {\n        foxwallet?: {\n            tronLink: TronLinkWallet;\n        };\n    }\n}\n\nexport interface FoxWalletAdapterConfig extends BaseAdapterConfig {\n    /**\n     * Timeout in millisecond for checking if Bitget Wallet is supported.\n     * Default is 2 * 1000ms\n     */\n    checkTimeout?: number;\n    /**\n     * Set if open Wallet's website url when wallet is not installed.\n     * Default is true.\n     */\n    openUrlWhenWalletNotFound?: boolean;\n    /**\n     * Set if open Bitget Wallet app using DeepLink.\n     * Default is true.\n     */\n    openAppWithDeeplink?: boolean;\n}\n\nexport const FoxWalletAdapterName = 'FoxWallet' as AdapterName<'FoxWallet'>;\n\nexport class FoxWalletAdapter extends Adapter {\n    name = FoxWalletAdapterName;\n    url = 'https://foxwallet.com/';\n    icon =\n        'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQxIiBoZWlnaHQ9IjE0MCIgdmlld0JveD0iMCAwIDE0MSAxNDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHg9IjAuNSIgd2lkdGg9IjE0MCIgaGVpZ2h0PSIxNDAiIHJ4PSI0IiBmaWxsPSJibGFjayIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTkwLjI5NDQgMzMuNTk2NUM4NC40OTMxIDMwLjUyNTMgODAuMDg5MyAyNS4xMzAyIDc4LjM1MDYgMTguNjQ2NUM3Ny44MTQzIDIwLjYyOSA3Ny41MzgxIDIyLjcwOSA3Ny41MzgxIDI0Ljg1NEM3Ny41MzgxIDI2LjUyNzcgNzcuNzE2OCAyOC4xNTI3IDc4LjA0MTggMjkuNzI5Qzc4LjA0MTggMjkuNzI5IDc4LjA0MTggMjkuNzI5IDc4LjA0MTggMjkuNzQ1M0M3OC4wNDE4IDI5Ljc2MTUgNzguMDU4MSAyOS43OTQgNzguMDU4MSAyOS44MTAzQzc4LjQ5NjggMzEuOTIyOCA3OS4yMTE4IDMzLjkyMTUgODAuMTcwNiAzNS43NzRDNzguMTIzMSAzNC4yNjI4IDc2LjMwMzEgMzIuNDU5IDc0Ljc3NTYgMzAuNDI3OEM3Mi43MjgxIDQ2LjMwNCA3OC40OTY4IDYyLjgzMDMgODkuMDQzMSA3My43MTc4QzEwMi44MDcgODkuNzQwMyA5MC4xMTU2IDExNi45MjcgNjguNjY1NiAxMTYuMjEyQzM4LjMxMDUgMTE2LjQ3MiAzMy4xMTA1IDcxLjc2NzggNjIuMjMwNiA2NC43NDc4TDYyLjIxNDMgNjQuNjY2NkM2OS45ODE4IDYyLjE0NzggNzMuNjIxOCA1Ny4wOTQgNzQuMjU1NiA1MC41MjlDNjMuMDQzMSA1OS42MTI4IDQ1LjMzMDUgNDguMzUxNSA0OS4wMDMxIDM0LjI0NjVDNi45MTU1IDU0Ljk2NTMgMjIuNTQ4IDEyMi4xNzUgNzAuMjU4MSAxMjEuMzQ3QzkxLjA0MTkgMTIxLjM0NyAxMDguNjI0IDEwNy41OTkgMTE0LjM5MyA4OC43MDAzQzEyMS4yODMgNjYuNjY1MyAxMTAuMTM2IDQzLjE4NCA5MC4yOTQ0IDMzLjU5NjVaIiBmaWxsPSIjMTJGRTc0Ii8+Cjwvc3ZnPgo=';\n    config: Required<FoxWalletAdapterConfig>;\n    private _readyState: WalletReadyState = WalletReadyState.Loading;\n    private _state: AdapterState = AdapterState.Loading;\n    private _connecting: boolean;\n    private _wallet: TronLinkWallet | null;\n    private _address: string | null;\n\n    constructor(config: FoxWalletAdapterConfig = {}) {\n        super();\n        const { checkTimeout = 2 * 1000, openUrlWhenWalletNotFound = true, openAppWithDeeplink = true } = config;\n        if (typeof checkTimeout !== 'number') {\n            throw new Error('[FoxWalletAdapter] config.checkTimeout should be a number');\n        }\n        this.config = {\n            checkTimeout,\n            openUrlWhenWalletNotFound,\n            openAppWithDeeplink,\n        };\n        this._connecting = false;\n        this._wallet = null;\n        this._address = null;\n        if (!isInMobileBrowser()) {\n            // Currently FoxWallet extension does not support Tron.\n            this._readyState = WalletReadyState.NotFound;\n            this.setState(AdapterState.NotFound);\n            return;\n        }\n        if (supportFoxWallet()) {\n            this._readyState = WalletReadyState.Found;\n            this._updateWallet();\n        } else {\n            this._checkWallet().then(() => {\n                if (this.connected) {\n                    this.emit('connect', this.address || '');\n                }\n            });\n        }\n    }\n\n    get address() {\n        return this._address;\n    }\n\n    get state() {\n        return this._state;\n    }\n    get readyState() {\n        return this._readyState;\n    }\n\n    get connecting() {\n        return this._connecting;\n    }\n\n    /**\n     * Get network information.\n     * @returns {Network} Current network information.\n     */\n    async network(): Promise<Network> {\n        try {\n            await this._checkWallet();\n            if (this.state !== AdapterState.Connected) throw new WalletDisconnectedError();\n            const wallet = this._wallet;\n            if (!wallet || !wallet.tronWeb) throw new WalletDisconnectedError();\n            try {\n                return await getNetworkInfoByTronWeb(wallet.tronWeb);\n            } catch (e: any) {\n                throw new WalletGetNetworkError(e?.message, e);\n            }\n        } catch (e: any) {\n            this.emit('error', e);\n            throw e;\n        }\n    }\n\n    async connect(): Promise<void> {\n        try {\n            this.checkIfOpenApp();\n            if (this.connected || this.connecting) return;\n            await this._checkWallet();\n            if (this.readyState === WalletReadyState.NotFound) {\n                if (this.config.openUrlWhenWalletNotFound !== false && isInBrowser()) {\n                    window.open(this.url, '_blank');\n                }\n                throw new WalletNotFoundError();\n            }\n            if (!this._wallet) return;\n            this._connecting = true;\n\n            const wallet = this._wallet as TronLinkWallet;\n            try {\n                const res = await wallet.request({ method: 'tron_requestAccounts' });\n                if (!res) {\n                    throw new WalletConnectionError('Request connect error.');\n                }\n                if (res.code === 4000) {\n                    throw new WalletConnectionError(\n                        'The same DApp has already initiated a request to connect to FoxWallet, and the pop-up window has not been closed.'\n                    );\n                }\n                if (res.code === 4001) {\n                    throw new WalletConnectionError('The user rejected connection.');\n                }\n            } catch (error: any) {\n                throw new WalletConnectionError(error?.message, error);\n            }\n\n            const address = wallet.tronWeb.defaultAddress?.base58 || '';\n            this.setAddress(address);\n            this.setState(AdapterState.Connected);\n            this.emit('connect', this.address || '');\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        } finally {\n            this._connecting = false;\n        }\n    }\n\n    async disconnect(): Promise<void> {\n        if (this.state !== AdapterState.Connected) {\n            return;\n        }\n        this.setAddress(null);\n        this.setState(AdapterState.Disconnect);\n        this.emit('disconnect');\n    }\n\n    async signTransaction(transaction: Transaction, privateKey?: string): Promise<SignedTransaction> {\n        try {\n            const wallet = await this.checkAndGetWallet();\n            try {\n                return await wallet.tronWeb.trx.sign(transaction, privateKey);\n            } catch (error: any) {\n                if (error instanceof Error) {\n                    throw new WalletSignTransactionError(error.message, error);\n                } else {\n                    throw new WalletSignTransactionError(error, new Error(error));\n                }\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    async multiSign(\n        transaction: Transaction,\n        privateKey?: string | false,\n        permissionId?: number\n    ): Promise<SignedTransaction> {\n        try {\n            const wallet = await this.checkAndGetWallet();\n            try {\n                return await wallet.tronWeb.trx.multiSign(transaction, privateKey, permissionId);\n            } catch (error: any) {\n                if (error instanceof Error) {\n                    throw new WalletSignTransactionError(error.message, error);\n                } else {\n                    throw new WalletSignTransactionError(error, new Error(error));\n                }\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    async signMessage(message: string, privateKey?: string): Promise<string> {\n        try {\n            const wallet = await this.checkAndGetWallet();\n            try {\n                return await wallet.tronWeb.trx.signMessageV2(message, privateKey);\n            } catch (error: any) {\n                if (error instanceof Error) {\n                    throw new WalletSignMessageError(error.message, error);\n                } else {\n                    throw new WalletSignMessageError(error, new Error(error));\n                }\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    private async checkAndGetWallet() {\n        this.checkIfOpenApp();\n        await this._checkWallet();\n        if (!this.connected) throw new WalletDisconnectedError();\n        const wallet = this._wallet;\n        if (!wallet || !wallet.tronWeb) throw new WalletDisconnectedError();\n        return wallet as TronLinkWallet;\n    }\n\n    private checkReadyInterval: ReturnType<typeof setInterval> | null = null;\n    private checkForWalletReady() {\n        if (this.checkReadyInterval) {\n            return;\n        }\n        let times = 0;\n        const maxTimes = Math.floor(this.config.checkTimeout / 200);\n        const check = async () => {\n            if (this._wallet?.tronWeb?.defaultAddress?.base58) {\n                this.checkReadyInterval && clearInterval(this.checkReadyInterval);\n                this.checkReadyInterval = null;\n                await this._updateWallet();\n                this.emit('connect', this.address || '');\n            } else if (times > maxTimes) {\n                this.checkReadyInterval && clearInterval(this.checkReadyInterval);\n                this.checkReadyInterval = null;\n            } else {\n                times++;\n            }\n        };\n        this.checkReadyInterval = setInterval(check, 200);\n    }\n\n    private _checkPromise: Promise<boolean> | null = null;\n    /**\n     * check if wallet exists by interval, the promise only resolve when wallet detected or timeout\n     * @returns if wallet exists\n     */\n    private _checkWallet(): Promise<boolean> {\n        if (this.readyState === WalletReadyState.Found) {\n            return Promise.resolve(true);\n        }\n        if (this._checkPromise) {\n            return this._checkPromise;\n        }\n        const interval = 100;\n        const maxTimes = Math.floor(this.config.checkTimeout / interval);\n        let times = 0,\n            timer: ReturnType<typeof setInterval>;\n        this._checkPromise = new Promise((resolve) => {\n            const check = () => {\n                times++;\n                const isSupport = supportFoxWallet();\n                if (isSupport || times > maxTimes) {\n                    timer && clearInterval(timer);\n                    this._readyState = isSupport ? WalletReadyState.Found : WalletReadyState.NotFound;\n                    this._updateWallet();\n                    this.emit('readyStateChanged', this.readyState);\n                    resolve(isSupport);\n                }\n            };\n            timer = setInterval(check, interval);\n            check();\n        });\n        return this._checkPromise;\n    }\n\n    private checkIfOpenApp() {\n        if (this.config.openAppWithDeeplink === false) {\n            return;\n        }\n        if (openFoxWallet()) {\n            throw new WalletNotFoundError();\n        }\n    }\n\n    private _updateWallet = () => {\n        let state = this.state;\n        let address = this.address;\n        if (supportFoxWallet()) {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            this._wallet = window.foxwallet!.tronLink;\n            address = this._wallet.tronWeb?.defaultAddress?.base58 || null;\n            state = address ? AdapterState.Connected : AdapterState.Disconnect;\n        } else {\n            this._wallet = null;\n            address = null;\n            state = AdapterState.NotFound;\n        }\n        if (isInMobileBrowser() && state === AdapterState.Disconnect) {\n            this.checkForWalletReady();\n        }\n        this.setAddress(address);\n        this.setState(state);\n    };\n\n    private setAddress(address: string | null) {\n        this._address = address;\n    }\n\n    private setState(state: AdapterState) {\n        const preState = this.state;\n        if (state !== preState) {\n            this._state = state;\n            this.emit('stateChanged', state);\n        }\n    }\n}\n", "import { isInMobileBrowser } from '@tronweb3/tronwallet-abstract-adapter';\n\nexport function supportBybitWallet() {\n    return !!(window.bybitWallet && window.bybitWallet.tronLink);\n}\n\nexport const isBybitApp = typeof navigator !== 'undefined' && /bybit_app/i.test(navigator.userAgent);\nexport function isInBybitApp() {\n    if (typeof window !== 'undefined' && typeof window.navigator !== 'undefined') {\n        return /bybit_app/i.test(window.navigator.userAgent);\n    }\n    return false;\n}\nexport function openBybitWallet() {\n    if (!isInBybitApp() && isInMobileBrowser()) {\n        window.location.href = `https://app.bybit.com/inapp?by_dp=${encodeURIComponent(\n            'bybitapp://open/route?targetUrl=by%3A%2F%2Fweb3%2Ftab%2Findex%3Findex%3D0'\n        )}&by_web_link=${encodeURIComponent(window.location.href)}`;\n\n        return true;\n    }\n    return false;\n}\n", "import {\n    Adapter,\n    AdapterState,\n    isInBrowser,\n    WalletReadyState,\n    WalletSignMessageError,\n    WalletNotFoundError,\n    WalletDisconnectedError,\n    WalletConnectionError,\n    WalletSignTransactionError,\n    WalletGetNetworkError,\n} from '@tronweb3/tronwallet-abstract-adapter';\nimport type {\n    Transaction,\n    SignedTransaction,\n    AdapterName,\n    BaseAdapterConfig,\n    Network,\n} from '@tronweb3/tronwallet-abstract-adapter';\nimport type {\n    AccountsChangedEventData,\n    TronLinkMessageEvent,\n    TronLinkWallet,\n} from '@tronweb3/tronwallet-adapter-tronlink';\nimport { getNetworkInfoByTronWeb } from '@tronweb3/tronwallet-adapter-tronlink';\nimport { openBybitWallet, supportBybitWallet } from './utils.js';\n\ndeclare global {\n    interface Window {\n        bybitWallet?: {\n            tronLink: TronLinkWallet;\n        };\n    }\n}\nexport interface BybitWalletAdapterConfig extends BaseAdapterConfig {\n    /**\n     * Timeout in millisecond for checking if BybitWallet wallet exists.\n     * Default is 2 * 1000ms\n     */\n    checkTimeout?: number;\n    /**\n     * Set if open BybitWallet app using DeepLink.\n     * Default is true.\n     */\n    openAppWithDeeplink?: boolean;\n}\n\nexport const BybitWalletAdapterName = 'Bybit Wallet' as AdapterName<'Bybit Wallet'>;\n\nexport class BybitWalletAdapter extends Adapter {\n    name = BybitWalletAdapterName;\n    url = 'https://bybit.com/web3';\n    icon =\n        'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTAgMTguN0MwIDguMzcyMjcgOC4zNzIyOCAwIDE4LjcgMEg2OS4zQzc5LjYyNzcgMCA4OCA4LjM3MjI4IDg4IDE4LjdWNjkuM0M4OCA3OS42Mjc3IDc5LjYyNzcgODggNjkuMyA4OEgxOC43QzguMzcyMjcgODggMCA3OS42Mjc3IDAgNjkuM1YxOC43WiIgZmlsbD0iIzQwNDM0NyIvPgo8cGF0aCBkPSJNNy41NzYxNyAyNi44MDY3QzYuNzg1MTYgMjQuMDc4NyA4LjQ3NzUgMjEuMjUzMSAxMS4yNTU5IDIwLjY2M0w1Ny42MDg3IDEwLjgxNzNDNTkuODA5IDEwLjM1IDYyLjA0NDMgMTEuNDQ0MyA2My4wMjQ3IDEzLjQ2ODlMODMuODQ0MyA1Ni40NjU3TDI1LjE3NzYgODcuNTEwMUw3LjU3NjE3IDI2LjgwNjdaIiBmaWxsPSJ1cmwoI3BhaW50MF9saW5lYXJfMzEyXzE3NTM0KSIvPgo8cGF0aCBkPSJNOC4xODI0MiAzMC4xNjE4QzcuMzUwNDkgMjcuMjgzOCA5LjI3OTI1IDI0LjM0MTMgMTIuMjUwMiAyMy45NTU5TDczLjY4NjUgMTUuOTg4MUM3Ni4yMzkxIDE1LjY1NzEgNzguNjExMSAxNy4zNjE4IDc5LjExMTEgMTkuODg2N0w4OC4wMDAzIDY0Ljc3NzFMMjQuNjg5MiA4Ny4yNjY1TDguMTgyNDIgMzAuMTYxOFoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0wIDM0LjIyMjJDMCAyOC44MjIxIDQuMzc3NjYgMjQuNDQ0NSA5Ljc3Nzc4IDI0LjQ0NDVINjguNDQ0NEM3OS4yNDQ3IDI0LjQ0NDUgODggMzMuMTk5OCA4OCA0NFY2OC40NDQ1Qzg4IDc5LjI0NDcgNzkuMjQ0NyA4OCA2OC40NDQ0IDg4SDE5LjU1NTZDOC43NTUzMiA4OCAwIDc5LjI0NDcgMCA2OC40NDQ1VjM0LjIyMjJaIiBmaWxsPSJibGFjayIvPgo8cGF0aCBkPSJNNTguMjIwMSA2MS4xOTU5VjQyLjg3NTVINjEuNzkzN1Y2MS4xOTU5SDU4LjIyMDFaIiBmaWxsPSIjRjdBNjAwIi8+CjxwYXRoIGQ9Ik0xNy40Mzk1IDY2LjY2MzdIOS43Nzc5NVY0OC4zNDM0SDE3LjEzMTNDMjAuNzA0OSA0OC4zNDM0IDIyLjc4NzQgNTAuMzUwNSAyMi43ODc0IDUzLjQ4OTNDMjIuNzg3NCA1NS41MjE1IDIxLjQ1MDQgNTYuODM0NSAyMC41MjU3IDU3LjI3MjFDMjEuNjMxNSA1Ny43ODY5IDIzLjA0NTYgNTguOTQzOCAyMy4wNDU2IDYxLjM4ODVDMjMuMDQ1NiA2NC44MTA4IDIwLjcwNDkgNjYuNjYzNyAxNy40Mzk1IDY2LjY2MzdaTTE2Ljg0ODEgNTEuNTM0M0gxMy4zNTE2VjU1Ljc1NDhIMTYuODQ4MUMxOC4zNjQyIDU1Ljc1NDggMTkuMjEzOCA1NC45MDY0IDE5LjIxMzggNTMuNjQ1NUMxOS4yMTM4IDUyLjM4MjYgMTguMzY2MiA1MS41MzQzIDE2Ljg0ODEgNTEuNTM0M1pNMTcuMDc5MyA1OC45NzA4SDEzLjM1MTZWNjMuNDcyOEgxNy4wNzkzQzE4LjY5OTQgNjMuNDcyOCAxOS40NyA2Mi40NDMyIDE5LjQ3IDYxLjIwOTJDMTkuNDcyIDU5Ljk3MzMgMTguNjk5NCA1OC45NzA4IDE3LjA3OTMgNTguOTcwOFoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0zMi44OTI1IDU5LjE1MDFWNjYuNjYzN0gyOS4zNDM5VjU5LjE1MDFMMjMuODQxOSA0OC4zNDM0SDI3LjcyMzhMMzEuMTQzMiA1NS43Mjc4TDM0LjUxMDcgNDguMzQzNEgzOC4zOTI2TDMyLjg5MjUgNTkuMTUwMVoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik00OC41NjMzIDY2LjY2MzdINDAuOTAxN1Y0OC4zNDM0SDQ4LjI1NTFDNTEuODI4NyA0OC4zNDM0IDUzLjkxMTIgNTAuMzUwNSA1My45MTEyIDUzLjQ4OTNDNTMuOTExMiA1NS41MjE1IDUyLjU3NDIgNTYuODM0NSA1MS42NDk1IDU3LjI3MjFDNTIuNzU1MyA1Ny43ODY5IDU0LjE2OTMgNTguOTQzOCA1NC4xNjkzIDYxLjM4ODVDNTQuMTY3NCA2NC44MTA4IDUxLjgyNjggNjYuNjYzNyA0OC41NjMzIDY2LjY2MzdaTTQ3Ljk3MTkgNTEuNTM0M0g0NC40NzUzVjU1Ljc1NDhINDcuOTcxOUM0OS40ODggNTUuNzU0OCA1MC4zMzc2IDU0LjkwNjQgNTAuMzM3NiA1My42NDU1QzUwLjMzNTcgNTIuMzgyNiA0OS40ODggNTEuNTM0MyA0Ny45NzE5IDUxLjUzNDNaTTQ4LjIwMzEgNTguOTcwOEg0NC40NzUzVjYzLjQ3MjhINDguMjAzMUM0OS44MjMyIDYzLjQ3MjggNTAuNTkzOCA2Mi40NDMyIDUwLjU5MzggNjEuMjA5MkM1MC41OTM4IDU5Ljk3MzQgNDkuODIxMyA1OC45NzA4IDQ4LjIwMzEgNTguOTcwOFoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik03My40MzkgNTEuNTM0M1Y2Ni42NjM3SDY5Ljg2NTRWNTEuNTM0M0g2NS4wODM5VjQ4LjM0MzRINzguMjIyNFY1MS41MzQzSDczLjQzOVoiIGZpbGw9IndoaXRlIi8+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXJfMzEyXzE3NTM0IiB4MT0iNy4zMzMwOCIgeTE9IjI1LjU5NCIgeDI9Ijg0LjYzODEiIHkyPSIyMS43MjE2IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIHN0b3AtY29sb3I9IiNGRkQ3NDgiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjRjdBNjAwIi8+CjwvbGluZWFyR3JhZGllbnQ+CjwvZGVmcz4KPC9zdmc+Cg==';\n\n    config: Required<BybitWalletAdapterConfig>;\n    private _readyState: WalletReadyState = isInBrowser() ? WalletReadyState.Loading : WalletReadyState.NotFound;\n    private _state: AdapterState = AdapterState.Loading;\n    private _connecting: boolean;\n    private _wallet: TronLinkWallet | null;\n    private _address: string | null;\n\n    constructor(config: BybitWalletAdapterConfig = {}) {\n        super();\n        const { checkTimeout = 2 * 1000, openUrlWhenWalletNotFound = true, openAppWithDeeplink = true } = config;\n        if (typeof checkTimeout !== 'number') {\n            throw new Error('[BybitWalletAdapter] config.checkTimeout should be a number');\n        }\n        this.config = {\n            checkTimeout,\n            openAppWithDeeplink,\n            openUrlWhenWalletNotFound,\n        };\n        this._connecting = false;\n        this._wallet = null;\n        this._address = null;\n\n        if (!isInBrowser()) {\n            this._readyState = WalletReadyState.NotFound;\n            this.setState(AdapterState.NotFound);\n            return;\n        }\n        if (supportBybitWallet()) {\n            this._readyState = WalletReadyState.Found;\n            this._updateWallet();\n        } else {\n            this._checkWallet().then(() => {\n                if (this.connected) {\n                    this.emit('connect', this.address || '');\n                }\n            });\n        }\n    }\n\n    get address() {\n        return this._address;\n    }\n\n    get state() {\n        return this._state;\n    }\n    get readyState() {\n        return this._readyState;\n    }\n\n    get connecting() {\n        return this._connecting;\n    }\n\n    /**\n     * Get network information used by BybitWallet.\n     * @returns {Network} Current network information.\n     */\n    async network(): Promise<Network> {\n        try {\n            await this._checkWallet();\n            if (this.state !== AdapterState.Connected) throw new WalletDisconnectedError();\n            const wallet = this._wallet;\n            if (!wallet || !wallet.tronWeb) throw new WalletDisconnectedError();\n            try {\n                return await getNetworkInfoByTronWeb(wallet.tronWeb);\n            } catch (e: any) {\n                throw new WalletGetNetworkError(e?.message, e);\n            }\n        } catch (e: any) {\n            this.emit('error', e);\n            throw e;\n        }\n    }\n\n    async connect(): Promise<void> {\n        try {\n            this.checkIfOpenBybitWallet();\n            if (this.connected || this.connecting) return;\n            await this._checkWallet();\n            if (this.state === AdapterState.NotFound) {\n                if (this.config.openUrlWhenWalletNotFound !== false && isInBrowser()) {\n                    window.open(this.url, '_blank');\n                }\n                throw new WalletNotFoundError();\n            }\n            if (!this._wallet) return;\n            this._connecting = true;\n            const wallet = this._wallet as TronLinkWallet;\n            try {\n                const res = await wallet.request({ method: 'tron_requestAccounts' });\n                if (!res) {\n                    throw new WalletConnectionError('Request connect error.');\n                }\n                if (res.code === 4000) {\n                    throw new WalletConnectionError(\n                        'The same DApp has already initiated a request to connect to BybitWallet, and the pop-up window has not been closed.'\n                    );\n                }\n                if (res.code === 4001) {\n                    throw new WalletConnectionError('The user rejected connection.');\n                }\n            } catch (error: any) {\n                throw new WalletConnectionError(error?.message, error);\n            }\n\n            const address = wallet.tronWeb.defaultAddress?.base58 || '';\n            this.setAddress(address);\n            this.setState(AdapterState.Connected);\n            this._listenEvent();\n            this.connected && this.emit('connect', this.address || '');\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        } finally {\n            this._connecting = false;\n        }\n    }\n\n    async disconnect(): Promise<void> {\n        this._stopListenEvent();\n        if (this.state !== AdapterState.Connected) {\n            return;\n        }\n        this.setAddress(null);\n        this.setState(AdapterState.Disconnect);\n        this.emit('disconnect');\n    }\n\n    async signTransaction(transaction: Transaction, privateKey?: string): Promise<SignedTransaction> {\n        try {\n            const wallet = await this.checkAndGetWallet();\n\n            try {\n                return await wallet.tronWeb.trx.sign(transaction, privateKey);\n            } catch (error: any) {\n                if (error instanceof Error || (typeof error === 'object' && error.message)) {\n                    throw new WalletSignTransactionError(error.message, error);\n                } else if (typeof error === 'string') {\n                    throw new WalletSignTransactionError(error, new Error(error));\n                } else {\n                    throw new WalletSignTransactionError('Unknown error', error);\n                }\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    async multiSign(\n        transaction: Transaction,\n        privateKey?: string | false,\n        permissionId?: number\n    ): Promise<SignedTransaction> {\n        try {\n            const wallet = await this.checkAndGetWallet();\n\n            try {\n                return await wallet.tronWeb.trx.multiSign(transaction, privateKey, permissionId);\n            } catch (error: any) {\n                if (error instanceof Error || (typeof error === 'object' && error.message)) {\n                    throw new WalletSignTransactionError(error.message, error);\n                } else if (typeof error === 'string') {\n                    throw new WalletSignTransactionError(error, new Error(error));\n                } else {\n                    throw new WalletSignTransactionError('Unknown error', error);\n                }\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    async signMessage(message: string, privateKey?: string): Promise<string> {\n        try {\n            const wallet = await this.checkAndGetWallet();\n            try {\n                return await wallet.tronWeb.trx.signMessageV2(message, privateKey);\n            } catch (error: any) {\n                if (error instanceof Error || (typeof error === 'object' && error.message)) {\n                    throw new WalletSignMessageError(error.message, error);\n                } else if (typeof error === 'string') {\n                    throw new WalletSignMessageError(error, new Error(error));\n                } else {\n                    throw new WalletSignMessageError('Unknown error', error);\n                }\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    private async checkAndGetWallet() {\n        this.checkIfOpenBybitWallet();\n        await this._checkWallet();\n        if (this.state !== AdapterState.Connected) throw new WalletDisconnectedError();\n        const wallet = this._wallet;\n        if (!wallet || !wallet.tronWeb) throw new WalletDisconnectedError();\n        return wallet as TronLinkWallet;\n    }\n\n    private _listenEvent() {\n        this._stopListenEvent();\n        window.addEventListener('message', this.messageHandler);\n    }\n\n    private _stopListenEvent() {\n        window.removeEventListener('message', this.messageHandler);\n    }\n\n    private messageHandler = (e: TronLinkMessageEvent) => {\n        const message = e.data?.message;\n        if (!message) {\n            return;\n        }\n        if (message.action === 'accountsChanged') {\n            setTimeout(() => {\n                const preAddr = this.address || '';\n                if ((this._wallet as TronLinkWallet)?.ready) {\n                    const address = (message.data as AccountsChangedEventData).address;\n                    this.setAddress(address);\n                    this.setState(AdapterState.Connected);\n                } else {\n                    this.setAddress(null);\n                    this.setState(AdapterState.Disconnect);\n                }\n                const address = this.address || '';\n                if (address !== preAddr) {\n                    this.emit('accountsChanged', this.address || '', preAddr);\n                }\n                if (!preAddr && this.address) {\n                    this.emit('connect', this.address);\n                } else if (preAddr && !this.address) {\n                    this.emit('disconnect');\n                }\n            }, 200);\n        } else if (message.action === 'connect') {\n            const isCurConnected = this.connected;\n            const preAddress = this.address || '';\n            const address = (this._wallet as TronLinkWallet).tronWeb?.defaultAddress?.base58 || '';\n            this.setAddress(address);\n            this.setState(AdapterState.Connected);\n            if (!isCurConnected) {\n                this.emit('connect', address);\n            } else if (address !== preAddress) {\n                this.emit('accountsChanged', this.address || '', preAddress);\n            }\n        } else if (message.action === 'disconnect') {\n            this.setAddress(null);\n            this.setState(AdapterState.Disconnect);\n            this.emit('disconnect');\n        }\n    };\n\n    private checkIfOpenBybitWallet() {\n        if (this.config.openAppWithDeeplink === false) {\n            return;\n        }\n        if (openBybitWallet()) {\n            throw new WalletNotFoundError();\n        }\n    }\n\n    private _checkPromise: Promise<boolean> | null = null;\n    /**\n     * check if wallet exists by interval, the promise only resolve when wallet detected or timeout\n     * @returns if BybitWallet exists\n     */\n    private _checkWallet(): Promise<boolean> {\n        if (this.readyState === WalletReadyState.Found) {\n            return Promise.resolve(true);\n        }\n        if (this._checkPromise) {\n            return this._checkPromise;\n        }\n        const interval = 100;\n        const maxTimes = Math.floor(this.config.checkTimeout / interval);\n        let times = 0,\n            timer: ReturnType<typeof setInterval>;\n        this._checkPromise = new Promise((resolve) => {\n            const check = () => {\n                times++;\n                const isSupport = supportBybitWallet();\n                if (isSupport || times > maxTimes) {\n                    timer && clearInterval(timer);\n                    this._readyState = isSupport ? WalletReadyState.Found : WalletReadyState.NotFound;\n                    this._updateWallet();\n                    this.emit('readyStateChanged', this.readyState);\n                    resolve(isSupport);\n                }\n            };\n            timer = setInterval(check, interval);\n            check();\n        });\n        return this._checkPromise;\n    }\n\n    private _updateWallet = () => {\n        let state = this.state;\n        let address = this.address;\n        if (supportBybitWallet()) {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            this._wallet = window.bybitWallet!.tronLink;\n            this._listenEvent();\n            address = this._wallet.tronWeb?.defaultAddress?.base58 || null;\n            state = this._wallet.ready ? AdapterState.Connected : AdapterState.Disconnect;\n        } else {\n            this._wallet = null;\n            address = null;\n            state = AdapterState.NotFound;\n        }\n        this.setAddress(address);\n        this.setState(state);\n    };\n\n    private setAddress(address: string | null) {\n        this._address = address;\n    }\n\n    private setState(state: AdapterState) {\n        const preState = this.state;\n        if (state !== preState) {\n            this._state = state;\n            this.emit('stateChanged', state);\n        }\n    }\n}\n", "import { isInBrowser } from '@tronweb3/tronwallet-abstract-adapter';\n\nexport function supportTomowallet() {\n    return isInBrowser() && !!window.tomo_wallet?.tron;\n}\n", "import {\n    Adapter,\n    AdapterState,\n    isInBrowser,\n    WalletReadyState,\n    WalletSignMessageError,\n    WalletNotFoundError,\n    WalletDisconnectedError,\n    WalletConnectionError,\n    WalletSignTransactionError,\n    WalletGetNetworkError,\n    isInMobileBrowser,\n} from '@tronweb3/tronwallet-abstract-adapter';\nimport type {\n    Transaction,\n    SignedTransaction,\n    AdapterName,\n    BaseAdapterConfig,\n    Network,\n} from '@tronweb3/tronwallet-abstract-adapter';\nimport { getNetworkInfoByTronWeb } from '@tronweb3/tronwallet-adapter-tronlink';\nimport type { Tron, TronWeb } from '@tronweb3/tronwallet-adapter-tronlink';\nimport { supportTomowallet } from './utils.js';\n\ndeclare global {\n    interface Window {\n        tomo_wallet?: {\n            tron?: Tron | undefined;\n        };\n    }\n}\nexport interface TomoWalletAdapterConfig extends BaseAdapterConfig {\n    /**\n     * Timeout in millisecond for checking if Tomo wallet exists.\n     * Default is 3 * 1000ms\n     */\n    checkTimeout?: number;\n    /**\n     * The icon of your dapp. Used when open Tomo app in mobile device browsers.\n     */\n    dappIcon?: string;\n    /**\n     * The name of your dapp. Used when open Tomo app in mobile device browsers.\n     */\n    dappName?: string;\n}\n\nexport const TomoWalletAdapterName = 'Tomo Wallet' as AdapterName<'Tomo Wallet'>;\n\nexport class TomoWalletAdapter extends Adapter {\n    name = TomoWalletAdapterName;\n    url = 'https://tomo.inc/';\n    icon =\n        'data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDI0MCAyNDAiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCI+Cgk8dGl0bGU+ZmF2aWNvbjwvdGl0bGU+Cgk8ZGVmcz4KCQk8aW1hZ2UgIHdpZHRoPSIyMzQiIGhlaWdodD0iMTYzIiBpZD0iaW1nMSIgaHJlZj0iZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFPb0FBQUNqQ0FNQUFBQ3pIWExZQUFBQUFYTlNSMElCMmNrc2Z3QUFBdUpRVEZSRkFBQUEvejZmL3oyYS96bWMvd0NBL3oyZC9qeWMvanljL2p5ZC96eWQvd0QvLzBDZi9qdWMvanliLzBDQS9qeWMvVHlkL1R1Yy96eWMvejJjL3p5Yy9qeWMvanljL3oyYi96eWQvanljL2p5Yy96dWQvenFaL2p5Yy9qeWMvenVkL3pPWi96eWQvanljL2p5Yy9qeWMvVHVjL3oyYy96cVgvanljL2p5Yy9qMmMvejJjL3ptcS96dWIvanliL2p5Yy96eWIvenFhL2p5Yi9qeWIvanljL3oyZS95dXEvanljL2p1Yy96NmIvVDJiL2oyYy96T1ovenVjL2p5Yy96MmMvenliL3p5ZS9qeWMvanlkL3p5Yy96eWEvanljL3p1Yi9qdWQvejJaL2p5Yy96cWQvenVkL3p5Yy96dWMvem1jL1R5Yy9UeWMvenlXL2p5Yy9UeWMvVHljL2p5ZC9UeWQvanVjL3ptaC96eWMvMENiL3p5Wi96dWQvejZlL3pxYy96eWIvanljLzBDZi96dWMvenliL3oyYy96dWIvejZhLzFXcS96eWMvejJiLzBhaS9UeWIvanljL2oyZC9qeWQvVHljL1R5Yy9UeWMvejJiL1R1Yi9UeWQvanljL2p1Yy9qeWIvanljL3p5Yi9qeWMvanljL3oyZS96MmUvenliL3p5ZS96NmIvMENmLzBTWi9qMmMvanljL2p5Yy9qeWMvanljL2p5Yy9qeWMvVHljL1QyYi9UMmMvVDJkL1R1Yy96dWQvenVkL3p1Yy9qeWMvanliL3p5Yy96MmQvenliL3o2Yi9qeWMvanljL3ptWi96eWEvenVkL3oyYy8wbVMvejJkL2p5Yy9qeWQvVHVjL1R5Yy9qeWMvVHlkL3pxYy9UMmMvejZmL2p5Yy9UeWIvenVhL3oyYi9qeWQvenlkL1QyYy96MmQvejJkL3p1ZC9qeWMvMENWL2p5Yy96eWIvenVkLzBDWi9qeWMvanljL2oyYy96MmMvejZjL2p5Yy9UeWQvanljL3oyYy9UdWIvejJlL2p5Yy9qeWMvanljL3plYi96eWQvemFoL2p5Yy96dWIvenFkL3oyYy9qeWMvenliL2p5Yy96dWQvanljL1R5ZC9qMmMvejJiL1R5Yy9qdWMvVHlkL2p5Yy96dWQvemVrLzBDZi96eWUvejZjL2p5Yy9UdWMvVHlkL2oyYy9UeWIvVDJiL3p5Yi9qeWMvVHljL3p5Yy9UeWMvenViL3oyYy9qeWMvVHViL1R5Yy96eWMvVDJjL3p5Yy96dWIvenFhL1R5YlVCc29qd0FBQVBaMFVrNVRBQ1ZISkFKZzJQL1hYZ0VJc0s0RXRKU2JkM1pWL2Y1Y1BQZjVRU1BxN1NjS2NzZjA0Wjg3RnR6aXhuRUpPT1MvUURYMndQVXlCdDNCUW8vYkJWL0NRMjVFdzhWTlRQeFN2Um5FUmtsSWJCS0ppQkhlbllPem50OGJieHdlY0IwZmM4Z2dkR1prUFRvRGFta0xnTzdLdUtlVmhFK0ZmOC9PemN4NDVlTXFQek1pSVJBUDdPdmEyY20zdHFXa2s0S0JUalI1MU5KaWJXc3A0TlVvSm1nMkIyVzY2YU9pKzZZc3FDMnFxU3N1cXkrR2VuVU44QXptZTFzVTh1KzVXRDc2aDlOK2toWG5zdmdYVVJPOGZUbEw4Vm5XR3VpWnRWU1FySkd0Vmc0WU56SFJqb3l4bkpkaDBKcDhtRXBRODRxTlhhQmFSVENoUTZnNlhRQUFEbnhKUkVGVWVKemRYWGxjVk5VWG41dG9PdFNNcVFtRi9sUndDeGpDSlVORmdhelVJSlhLY2tITFVFUk5zMXd5RTNmTG9sREJCWE1YTTQwVURTdzBLMzVtbHY2UTNETUZBbE16YmRFK2JwOG8rTTA0OCtZdDk3NDU3OTYzeVBEOUErNDc3N3o3em5mZWR1KzU1NTZMVE1ZRElSUDY5emFjMXVnVCtpRGtPS2Y5NzNXRHoydzBWVjlVNFNyVnFieG03S2tOcG1wQk45M2x1bFYvR1hwdWc2bld2eUhZTVA5cDZMbU5wZHBBZk0vZTlidVJKemVVYWlNa3ZtV3Q2RmNEejI0a1ZYLzBoMFRTRUowejd2UUdVbTJDTG1JeVAxUnUyUG0xb3RyYy9xSDh5NHJRS1ZtTk51Z25nclJGMVkreVI3U3U4dm5OY2lkQ3h6U3d6NlFaVlJ0eVdkd1dIU0pyaEY0bjM2c0JaaGttNFZVbm5ZWEF1dCtydE00SmJhaTJROGZkNWRBTEpFNCs5ZjZXT2JiT2pYOEkwZ0IvL2hld29mK3BzczRGVGFoMkVsL0tkdWhiVEtYTFFkbWpPK3pEUkoyclJCZXlJOXJMYkJzUFRhaDJPeUFSUEl6K0t4WkU0K1I1ZEM0UWI4ZWdieVFhZDl3d3FZY21WQ1B3aHlrUzdSWnNQU2FsTG9LbC9VN0Jsbi80VjVoR3FQdzlvUnhhVU8xZFNHck05a0E3dUdMYytlTUVCUjRoQWJsY01mWW02VjYxZFB5TTJUbzN0S0RhWnlkWkhsa3YzL0hHNll1dWU3cW1Ea1Q1b3EzMmZ6NjlTa3ZJQ2owL1VXR2ZDMXBRN2I1ZmJrOGNRaFYxU284cXFNTVdXT0Z6QjhxUjIvM3dIaWJMUk5DQUt2bisxUmFXUno5VVhZY0dWQWR0VVY4SENPbGJtZ0VhVUgzaUMvVjFnT2o2cGVvcTFGTWR2TXNJWjRMMThRMXFxMUJQTmFSWWRSVks4R3lXMmhyVVV3MlcrVDVvakVqVmo0bHFxa1B6cjZpdFFoR3N2ZGVwckVFMTFSZlVmd1dVNFg1U2Q1Y0dxcWtPMjZpMkJvVUlLRlZaZ1ZxcVJ0Mi85anM0YnJXNkN0UlNUVlQ5RFZDTWhGWHFqbGRKMWZ5UGNYNDRkSWU2VVI2VmxnNVgvYldqd05BVnFnNVhSeldwU0VtdlJTdllPaXhYYzdneXFwWm12NWorZVBCSTNIYVJOQmx0ay9xdzlVVklSR1dtU05BM0wreHdBOU45NVlxYXBrcW9qa0hvZlZmUnovdzRzaVBuN0xpaU9yYXZaZnlnT3FKRjNORy8yNmMzaWEreVk5ZDFiaGdrcVc1MkdYeXNBcW9EbXk1U1k1MGhHSDhHYnNuQVZFUGpGbWhoak01NE5SMGNtSWFwVG4xUEUxdjBCdnpWQmFtYVgzbFhHMXQweHFTNWtBWklOZVVkYlV6UkhmN1FtQjVJdFhPUlJxYm9qZGRtQXdvZzFSaDhSS1Y2b2dzK0tDQUdTSFhHZkkxTTBSdGgwSEFkU0hYbVd4cVpvamVtemdBVVFLcXo1MmxraXQ2WWxnSW93QitiU0dqQXBYb2dhaS9VeFlPYkVIUG5hR09MenBqK0JxUUJVMzF6bGlhbTZJMlpyME1hTU5YNTBPTmVQVEJvRGFRQlUzMTd1aWFtNkkwNWt5RU5tR3JxTkUxTTBSdnpKa0lhTU5YNldvUmM2STgzSjBBYU1OVTA4SG12RnBqL0NxUUJVelZvcEUwdDRKRTZtQ29XbEZROUFZYzJ3VlFYdnFhSktYcWoyMjVJQTZicWIyellPU3VheWNlc3VnQlRYUVIrc0tvRnBvQ05PcGlxbC9UTkc0SHg0akRWOUVtYW1LSTM0Q2tQSUZXZkJXQXpwRnJndmNtcU8zRWoxbXRraTk1SUd3TW9RRlNUQ2owSGZWWWZnT04wbnFrbWg2MzBGcVoycm9tSE16M3Q5MFExczZUbE9JM04wUmZ4VFlPUzVmZktVcDMxNDJVallnZTFSc2FSVURtMlpLb3YzdlJLbms1a0hIbHdCRWxPb1BwOGhSZnpkQ0xqU0M0K2dpT2xhdWRaYUZRa2txN0lPQkkrWEN3UlVRM3RiazB6MGh5ZDhXckxCY0taV1VLcXRocy9HMjJOemtpdi9TSy9JYUE2WThOWjQ0M1JHU0V2OFZ4NXFtdDJ5czZIOEdLRVY3bWRLRHpWVmFOdml5MTZZL2tMWEltbnVpN3BkbGlpTzNoWE9FODFUSDdPckRjamZoTlg0cW5PZzJJSnZCTXJobklsbnVyck5lbVR5bU5rT2xmaXFVN011QzJtNkkwKzJWeUpwMXFyaDNjTWo5TWg2b1M3c1NCb1FtUU5KK2w2T1ZZbHVJc0NxbWpEaXdSZDcwYlVqM3dQUjlnR2ZoY01KL0E2ckJ6Q2w0VlUwV00xN1dtTjZpL29wSXM2Y1J1SEdXMkx6cGdyZE5lTHFHYW1HSnZzU1c5WTBnY0t0c1JlaVBITGpMVkZaNndaSk53U1U2MVpsMVY4VWFXK3BVM1BHMm1MemhpMVVMUXBvWnFTV1hNdXEyWHhjNkp0cWNmd295R21tb0lOL2NYYlVxb2ZqNm9wbDlXNjdHbXhBSE41Yngwb2xYZ3BzcDZWQ0RDcU9RTU1Na1Z2YklxWENQQ0JETU5tVk91TG9CTlNDVTQxL2xORFRORWJtL3RKSlRoVlExS3k2SStGbzZRU25PcDI2ZVBzbmNqdUk1WGdWR3RJOXdhUEQ4YW81cUtucFNLdlJGS3ZXSWtFbzlwZmc5UmMxUUlqRmtzRVVxcFBEbUIxTU9WY3V3dmxuS2xuTW8zY3UzcFY1aytwVHpMV2s0ZVdKNk9TdkZvbVV6M2ZySmVXdmM3cWljL3ZVU2tXU0tqMnZNUVV2R1BwTUdCWWxWaVU3QmVUVEo5MVpSYzZseWlPS2pPdnY3aVlMZmRQeUwzaTlIUmlxaUVYV1ZyQTZWTjdmVURjTVdQak5acGt4N1lGeDhuUktiVkdkU0lHY2dDd05CWmROeUhWNU1HUE1sUVlIdmFEZkpyTW9jVy9LaDJmVHJyd2NxVHN6dWErN3o5Q2FaY0R1ejhRQkcwSnFEYi9yUUpYaHBCYnZORnpQdENFMFRGSzZyR21OWmNuNmtEbzB0clJpcTF5bzNhak1uZVpwL3BkQWNNMHFka240SVJQKzBmQXc1a3pQL0dVbE5TSmxDME16K3lzNkFpdTZLYTZJaitQdXA3ODdLVksxQTRnenhmTVpQcndUdWxIa0FTZjc1Nmdqek9LNjhVOTVoelZnL24wTC9XVVpRb3pjU2YvNnJFTFllMmFTMG9SVEVBUmlvQ1ZKRWk2eDhYTVJmWFFqV2pxT2c2a0tjOVdWdS9UWHJMN21nUitycmllemZQb3gvWUw2b1hmK3Ura21qNlgvczdvdUN5TVFqc205SDJaUFJPRGFCb3RLeUk2VW1nN1laMTJLd0RXUWRXeXJ3UDE0YWIwcitueVo2SEpDNG55dGxrMHY1ajl1cDVtbURwOHNNdGZ0Nmo2SG1oUGYvQ1dDN1Nqc1pFTG44TS9zWDVUeGlsOFROMncvYzZ3QmtQUmdXRjJxdVphY2duRlBlSDdZUHBqZXFmZEZMOVZwdjlldHBXK21xWGdSRDhDRHJlMVUvM2lDWVlqajdSaE9NamU0QmorZFRiM3BzODVIdnNRMnpJdlRMN3FZNjBRVTJUTHJrbnNjd0tibkU5c2h5by9hc3FlS3E5NERVTUduWkhwcUtRelEvaHZlN2h0b3lmOEx0TWZZOTJLU2grZ1A4eCs0OTlXbUtNWnd0Q0RFVU9PbG9JVkt2TkVxc1pENWZTMzRrbjAxRlhxQUloK202blBvelhlZ2JLWVlGaGRpa3dQbnFROHlKcnhIS3lrTTJMQmlibFN4T1FqK3R4Uk8xZzY4RnFqalBacjk4QWhlMnVwdkRYZFFmdkRLYytpQjJqVHVwNytqNk5oYUI2cHFOZkpvZUVvMmVja3QyM2w4ZUJMZisramZwQncrQ1MyYVJ5RnBxMnJrdG5mNUJKVmRhT1hYM2YyYkJyV29uaWh6WmFiWnI5amJaR3prV3ViRnRxU3loQWMrNk5jSEpPN3kzamdhZTVnNjcrT1pyT3pFM2U2dS9Ma29YTExWVFNaUHRaZHJscXFLalF6Y25PZ3UxelE3SDZpempibDc4WUdlMW81L3JtNjVyYkwrQkpZTWxoRzdsNldyRWtWYkJXbXFwbmhlelpJdU1WUE5CQmlmM2VsdGZtdGRUb2JPWWZMeW5jVitxZno0NGh0ZEhPRWVMbWRRVm0wblRNZWtya2hCV2RJRnpBaG15QWtvY1ZFMXgzbWRxUHRIYXJNVVZSMkgxRjhvcDFFc0YzZXd3S2dPRVp5aDVIekN5bWNheEN3bnZQaENhWVVIVllVZFZmN0tsR01MVlRFbmxBZHp5UzloUFRrSyt1UjFXbFl4aFVGTG0rZkVpVWYySEova3JUdkRXbnowcEpMNzl4elloL21JMjlKR2tpeTNpUUlwVGdWeEQ5SG9qR2J0YlZoajlaYnI1S2toUDdSWnl3akR3NTBMWlJLRG9ZUzFKN0pKUWpGaU9vbmZPckZ3MU1MTjRDNXVmR0Jkd2VLT21NaUZwZk1MWXpGZkl2RWg4YkRjbXd1MkJMR0N6Y2xnNDRqZDBPalNSUGVKRWxiNDVPQUkxaER4Z2RnMHhDSlhTa3d1MWRJcFRnQnQzUW9lVFNVVWZpTUgwazYrR05NZEMvckZGRzhxelV1bGFCMnNTbFF6NUNWNG0wcFZaODVNejFYUUg1V1RZdWxxY25ndklKeWFJamRyc0drUlIxYm5mRmNEYllpQVJZTHNlY3h6elU4aVY4L0IxcWNsd2pJTjdvU0RCMFZMUmJzNmsxS3o3SWJHTkhhMWxzaXdLakdBUU1vZXg4aWluM1R4Tmt5Sm0wbzgxeVBCNXhwSmQ0K2V5OUpxdzZRazZWQ0VncUJVeVc4WUVUb0tGMXYwWVhWYndoN0RBWFBnMG10NU9HYklocnBQVVIwOUptRGdZOUZhK2wrak9wdkFaNXJpRm9xMDBHN2RKWnZNNXpQR2s5V1VvYnZsZ3RDT3N0YkUrTXptbDBBS3NHU3BXRlV3V2pLUjNmSTdNanN3TFUyMjA1UkdWVHMrM09JNng3SjZTc1R0WEMrQlZBSEZrOHBwZXI3Q3VuRkxnUVcrc1RELzZ2MTNVeDdZajhIRytKelVxRkltc0YxejVVbE5JNU9ERnNpbzNBUGxFa3FjTElrZ2xCS3RiQXJVSU9waDVvZ1dwOUdGWmxER3QrOFlqcS9vTys4dmVQWU03ZWErNEQ1RHI2UmpNUktxSmFXZzMwdlMyL21YamY2STBvMDZOM2c2c1A3R0pmaldZM0Z3R0xJYnhZbzJoWlRuWE5JUWV3SDY5SmVKWFZQNGIvanJFMXN5NmRJUDBna3hJV0wvSGxpcXRrSkpoZ3ZzNjJ2RUZOTTlPbFlUelpuaUlDTGpJWmVLUTZJcDUrSU8zRWpGWjJIcVNFL29senVxQjFUNlVjd0x4TmI0aGhFYmlraDFZL25LMXRlS1psaGZadnBLK1dIOVM5YXFhdWJyTXlFQm9zRnJsVUIxZEFsanlzN2p6V0FlazMxME9XZU91cm5HbEZXTjBIK2d5ZkdyakY4R2lJQjFXT0s0MXlDeW1qZm01N2pGOFpuME5YWEtYNm1VdFdmRzd1TFBGWE01K2NCMU91TUE1TjN3QVZheEtDWlNjR1BNTG1wenVvU3AvejR3bXVVUHJJOHp4TUM2TzdnbFc5UjlQcno5bkY5QjQ1cThoNnFzTXdkdmVnODJ0OTcvbW1pWlpZTEoyTE5EMVN2eGFCVExsTTVxZ3EvTTI3NDBxMFFCemh0MTlKMEQ5NmJTblZxZHpKU2p1bzR5b1gxb2paUzNYT2Y5UGUwbCt4bWtBRjFDaXpPK2U2aTZtdWxqV1pyMkFaYUZVaUlNZmQ1aWd5OFpGRmUwNFNqdEEyWWdwUE9MbzZMNml4NlQ5Q1c0RUJZeVkyZVJmTE52NlBCeWgvOHVEZWlLYzdxUkgvbkNMdUxLc3NDUGJiNk5MRVhpYmx5dzlVQmxXV0thMWxTbjJFYTBGYW53ODFGMWJ5QUlXZHNWQkJOR29rVFo4bVRqUHJsS1k0MDlFbWRRbkZDRHVIN25mKzUxMUpCVDRaS1RCK3UydzRyY2FpVm5ZeGYySmw5bFk5M0RQeVQ1dlhneGxoWFJDSkhkZWRkVEtOSmsxNjdtMEo3MFF1bG91K3JKV2hyVytVOXVOT2JtZFpMeW1uVXlWbHd0NVppZjJITDcxd2NTZE9vOC8yeTFhQnV0MXhQRFlyR05yNUs0YytZc1kwMmxNd0oyOTNjcmNDM2dXMGhiTmtwODF0M29XdkJtcExqdjMxcTBERllUNENybVcrekpYR0lpM1cveHdROUc4c2U4OTNZQkcwbHVQTEZ0ODh3MmFFVWk0YXpqZFZ1dTNJdW52K0YvZytRN0hZb0dCOGk3d0FBQUFCSlJVNUVya0pnZ2c9PSIvPgoJPC9kZWZzPgoJPHN0eWxlPgoJPC9zdHlsZT4KCTx1c2UgaWQ9IkJhY2tncm91bmQiIGhyZWY9IiNpbWcxIiB4PSIzIiB5PSIzMSIvPgo8L3N2Zz4=';\n\n    config: Required<TomoWalletAdapterConfig>;\n    private _readyState: WalletReadyState = isInBrowser() ? WalletReadyState.Loading : WalletReadyState.NotFound;\n    private _state: AdapterState = AdapterState.Loading;\n    private _connecting: boolean;\n    private _wallet: Tron | null;\n    private _address: string | null;\n\n    constructor(config: TomoWalletAdapterConfig = {}) {\n        super();\n        const { checkTimeout = 3 * 1000, dappIcon = '', dappName = '', openUrlWhenWalletNotFound = true } = config;\n        if (typeof checkTimeout !== 'number') {\n            throw new Error('[TomoWalletAdapter] config.checkTimeout should be a number');\n        }\n        this.config = {\n            checkTimeout,\n            openUrlWhenWalletNotFound,\n            dappIcon,\n            dappName,\n        };\n        this._connecting = false;\n        this._wallet = null;\n        this._address = null;\n\n        if (!isInBrowser()) {\n            this._readyState = WalletReadyState.NotFound;\n            this.setState(AdapterState.NotFound);\n            return;\n        }\n        if (isInMobileBrowser() && supportTomowallet()) {\n            this._readyState = WalletReadyState.Found;\n            this._updateWallet();\n        } else {\n            this._checkWallet().then(() => {\n                if (this.connected) {\n                    this.emit('connect', this.address || '');\n                }\n            });\n        }\n    }\n\n    get address() {\n        return this._address;\n    }\n\n    get state() {\n        return this._state;\n    }\n    get readyState() {\n        return this._readyState;\n    }\n\n    get connecting() {\n        return this._connecting;\n    }\n\n    /**\n     * Get network information used by Tomo.\n     * @returns {Network} Current network information.\n     */\n    async network(): Promise<Network> {\n        try {\n            await this._checkWallet();\n            if (this.state !== AdapterState.Connected) throw new WalletDisconnectedError();\n            const tronWeb = this._wallet?.tronWeb;\n            if (!tronWeb) throw new WalletDisconnectedError();\n            try {\n                return await getNetworkInfoByTronWeb(tronWeb);\n            } catch (e: any) {\n                throw new WalletGetNetworkError(e?.message, e);\n            }\n        } catch (e: any) {\n            this.emit('error', e);\n            throw e;\n        }\n    }\n\n    async connect(): Promise<void> {\n        try {\n            if (this.connected || this.connecting) return;\n            await this._checkWallet();\n            if (this.state === AdapterState.NotFound) {\n                if (this.config.openUrlWhenWalletNotFound !== false && isInBrowser()) {\n                    window.open(this.url, '_blank');\n                }\n                throw new WalletNotFoundError();\n            }\n            if (!this._wallet) return;\n            this._connecting = true;\n            if (supportTomowallet()) {\n                const wallet = this._wallet;\n                try {\n                    const res = await wallet.request({ method: 'eth_requestAccounts' });\n                    if (!res) {\n                        // 1. wallet is locked\n                        throw new WalletConnectionError('Tomo wallet is locked or no wallet account is avaliable.');\n                    }\n                } catch (error: any) {\n                    throw new WalletConnectionError(error?.message, error);\n                }\n\n                const address = (wallet.tronWeb && wallet.tronWeb.defaultAddress?.base58) || '';\n                this.setAddress(address);\n                this.setState(AdapterState.Connected);\n            } else {\n                throw new WalletConnectionError('Cannot connect wallet.');\n            }\n            this.connected && this.emit('connect', this.address || '');\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        } finally {\n            this._connecting = false;\n        }\n    }\n\n    async disconnect(): Promise<void> {\n        if (this.state !== AdapterState.Connected) {\n            return;\n        }\n        this.setAddress(null);\n        this.setState(AdapterState.Disconnect);\n        this.emit('disconnect');\n    }\n\n    async signTransaction(transaction: Transaction, privateKey?: string): Promise<SignedTransaction> {\n        try {\n            const wallet = await this.checkAndGetWallet();\n\n            try {\n                return await wallet.tronWeb.trx.sign(transaction, privateKey);\n            } catch (error: any) {\n                if (error instanceof Error) {\n                    throw new WalletSignTransactionError(error.message, error);\n                } else {\n                    throw new WalletSignTransactionError(error, new Error(error));\n                }\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    async multiSign(\n        transaction: Transaction,\n        privateKey?: string | false,\n        permissionId?: number\n    ): Promise<SignedTransaction> {\n        try {\n            const wallet = await this.checkAndGetWallet();\n\n            try {\n                return await wallet.tronWeb.trx.multiSign(transaction, privateKey, permissionId);\n            } catch (error: any) {\n                if (error instanceof Error) {\n                    throw new WalletSignTransactionError(error.message, error);\n                } else {\n                    throw new WalletSignTransactionError(error, new Error(error));\n                }\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    async signMessage(message: string, privateKey?: string): Promise<string> {\n        try {\n            const wallet = await this.checkAndGetWallet();\n            try {\n                return await wallet.tronWeb.trx.signMessageV2(message, privateKey);\n            } catch (error: any) {\n                if (error instanceof Error) {\n                    throw new WalletSignMessageError(error.message, error);\n                } else {\n                    throw new WalletSignMessageError(error, new Error(error));\n                }\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    private async checkAndGetWallet() {\n        await this._checkWallet();\n        if (this.state !== AdapterState.Connected) throw new WalletDisconnectedError();\n        const wallet = this._wallet;\n        if (!wallet || !wallet.tronWeb) throw new WalletDisconnectedError();\n        return wallet as Tron & { tronWeb: TronWeb };\n    }\n\n    private _checkPromise: Promise<boolean> | null = null;\n    /**\n     * check if wallet exists by interval, the promise only resolve when wallet detected or timeout\n     * @returns if wallet exists\n     */\n    private _checkWallet(): Promise<boolean> {\n        if (this.readyState === WalletReadyState.Found) {\n            return Promise.resolve(true);\n        }\n        if (this._checkPromise) {\n            return this._checkPromise;\n        }\n        const interval = 100;\n        const checkTronTimes = Math.floor(2000 / interval);\n        const maxTimes = Math.floor(this.config.checkTimeout / interval);\n        let times = 0,\n            timer: ReturnType<typeof setInterval>;\n        this._checkPromise = new Promise((resolve) => {\n            const check = () => {\n                times++;\n                const isSupport = times < checkTronTimes && !!isInMobileBrowser() && supportTomowallet();\n                if (isSupport || times > maxTimes) {\n                    timer && clearInterval(timer);\n                    this._readyState = isSupport ? WalletReadyState.Found : WalletReadyState.NotFound;\n                    this._updateWallet();\n                    this.emit('readyStateChanged', this.readyState);\n                    resolve(isSupport);\n                }\n            };\n            timer = setInterval(check, interval);\n            check();\n        });\n        return this._checkPromise;\n    }\n\n    private listenToEvents() {\n        this.stopEventListening();\n        // @ts-ignore\n        this._wallet?.on('accountsChanged', this.onAccountsChanged);\n    }\n\n    private stopEventListening() {\n        if (this._wallet) {\n            this._wallet.removeListener('accountsChanged', this.onAccountsChanged);\n        }\n    }\n\n    private onAccountsChanged = (account: string) => {\n        if (this._state === AdapterState.Disconnect) {\n            return;\n        }\n        const preAddr = this.address || '';\n        if (account !== preAddr) {\n            this.setAddress(account);\n            this.emit('accountsChanged', this.address || '', preAddr);\n        }\n        if (!preAddr && this.address) {\n            this.emit('connect', this.address);\n        } else if (preAddr && !this.address) {\n            this.emit('disconnect');\n        }\n    };\n\n    private _updateWallet = () => {\n        let state = this.state;\n        let address = this.address;\n        if (isInMobileBrowser()) {\n            if (window.tomo_wallet?.tron) {\n                this._wallet = window.tomo_wallet.tron;\n                this.listenToEvents();\n            }\n            address = (this._wallet?.tronWeb && this._wallet?.tronWeb?.defaultAddress?.base58) || null;\n            state = address ? AdapterState.Connected : AdapterState.Disconnect;\n        } else {\n            console.error('[TomoWalletAdapter] Only supported in mobile app for now');\n            this._wallet = null;\n            address = null;\n            state = AdapterState.NotFound;\n        }\n        // In Tomo Wallet App, account should be connected\n        if (isInMobileBrowser() && state === AdapterState.Disconnect) {\n            this.checkForWalletReadyForApp();\n        }\n        this.setAddress(address);\n        this.setState(state);\n    };\n\n    private checkReadyInterval: ReturnType<typeof setInterval> | null = null;\n    private checkForWalletReadyForApp() {\n        if (this.checkReadyInterval) {\n            return;\n        }\n        let times = 0;\n        const maxTimes = Math.floor(this.config.checkTimeout / 200);\n        const check = () => {\n            if (window.tomo_wallet?.tron?.tronWeb && window.tomo_wallet?.tron?.tronWeb?.defaultAddress) {\n                this.checkReadyInterval && clearInterval(this.checkReadyInterval);\n                this.checkReadyInterval = null;\n                this._updateWallet();\n                this.emit('connect', this.address || '');\n            } else if (times > maxTimes) {\n                this.checkReadyInterval && clearInterval(this.checkReadyInterval);\n                this.checkReadyInterval = null;\n            } else {\n                times++;\n            }\n        };\n        this.checkReadyInterval = setInterval(check, 200);\n    }\n    private setAddress(address: string | null) {\n        this._address = address;\n    }\n\n    private setState(state: AdapterState) {\n        const preState = this.state;\n        if (state !== preState) {\n            this._state = state;\n            this.emit('stateChanged', state);\n        }\n    }\n}\n", "import { isInMobileBrowser } from '@tronweb3/tronwallet-abstract-adapter';\n\nexport function supportTrust() {\n    return typeof window !== 'undefined' && !!(window.trustwallet && window.trustwallet.tronLink);\n}\n\nexport const isTrustApp = function () {\n    if (typeof window !== 'undefined' && typeof window.navigator !== 'undefined') {\n        return /Trust/i.test(window.navigator.userAgent);\n    }\n    return false;\n};\nexport function openTrustWallet() {\n    if (!isTrustApp() && isInMobileBrowser()) {\n        window.location.href = 'https://link.trustwallet.com/open_url?url=' + encodeURIComponent(window.location.href);\n        return true;\n    }\n\n    return false;\n}\n", "import {\n    Adapter,\n    AdapterState,\n    isInBrowser,\n    WalletReadyState,\n    WalletSignMessageError,\n    WalletNotFoundError,\n    WalletDisconnectedError,\n    WalletConnectionError,\n    WalletSignTransactionError,\n    WalletGetNetworkError,\n} from '@tronweb3/tronwallet-abstract-adapter';\nimport type {\n    Transaction,\n    SignedTransaction,\n    AdapterName,\n    BaseAdapterConfig,\n    Network,\n} from '@tronweb3/tronwallet-abstract-adapter';\nimport type {\n    AccountsChangedEventData,\n    TronLinkMessageEvent,\n    TronLinkWallet,\n} from '@tronweb3/tronwallet-adapter-tronlink';\nimport { getNetworkInfoByTronWeb } from '@tronweb3/tronwallet-adapter-tronlink';\nimport { openTrustWallet, supportTrust } from './utils.js';\n\ndeclare global {\n    interface Window {\n        trustwallet?: {\n            tronLink: TronLinkWallet;\n        };\n    }\n}\n\nexport interface TrustAdapterConfig extends BaseAdapterConfig {\n    /**\n     * Timeout in millisecond for checking if Trust wallet exists.\n     * Default is 2 * 1000ms\n     */\n    checkTimeout?: number;\n\n    /**\n     * Set if open app using DeepLink.\n     * Default is true.\n     */\n    openAppWithDeeplink?: boolean;\n}\n\nexport const TrustAdapterName = 'Trust' as AdapterName<'Trust'>;\n\nexport class TrustAdapter extends Adapter {\n    name = TrustAdapterName;\n    url = 'https://trustwallet.com';\n    icon =\n        'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTgiIGhlaWdodD0iNjUiIHZpZXdCb3g9IjAgMCA1OCA2NSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTAgOS4zODk0OUwyOC44OTA3IDBWNjUuMDA0MkM4LjI1NDUgNTYuMzM2OSAwIDM5LjcyNDggMCAzMC4zMzUzVjkuMzg5NDlaIiBmaWxsPSIjMDUwMEZGIi8+CjxwYXRoIGQ9Ik01Ny43ODIyIDkuMzg5NDlMMjguODkxNSAwVjY1LjAwNDJDNDkuNTI3NyA1Ni4zMzY5IDU3Ljc4MjIgMzkuNzI0OCA1Ny43ODIyIDMwLjMzNTNWOS4zODk0OVoiIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcl8yMjAxXzY5NDIpIi8+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXJfMjIwMV82OTQyIiB4MT0iNTEuMzYxNSIgeTE9Ii00LjE1MjkzIiB4Mj0iMjkuNTM4NCIgeTI9IjY0LjUxNDciIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agb2Zmc2V0PSIwLjAyMTEyIiBzdG9wLWNvbG9yPSIjMDAwMEZGIi8+CjxzdG9wIG9mZnNldD0iMC4wNzYyNDIzIiBzdG9wLWNvbG9yPSIjMDA5NEZGIi8+CjxzdG9wIG9mZnNldD0iMC4xNjMwODkiIHN0b3AtY29sb3I9IiM0OEZGOTEiLz4KPHN0b3Agb2Zmc2V0PSIwLjQyMDA0OSIgc3RvcC1jb2xvcj0iIzAwOTRGRiIvPgo8c3RvcCBvZmZzZXQ9IjAuNjgyODg2IiBzdG9wLWNvbG9yPSIjMDAzOEZGIi8+CjxzdG9wIG9mZnNldD0iMC45MDI0NjUiIHN0b3AtY29sb3I9IiMwNTAwRkYiLz4KPC9saW5lYXJHcmFkaWVudD4KPC9kZWZzPgo8L3N2Zz4K';\n\n    config: Required<TrustAdapterConfig>;\n\n    private _readyState: WalletReadyState = isInBrowser() ? WalletReadyState.Loading : WalletReadyState.NotFound;\n    private _state: AdapterState = AdapterState.Loading;\n    private _connecting: boolean;\n    private _wallet: TronLinkWallet | null;\n    private _address: string | null;\n\n    constructor(config: TrustAdapterConfig = {}) {\n        super();\n        const { checkTimeout = 2 * 1000, openUrlWhenWalletNotFound = true, openAppWithDeeplink = true } = config;\n\n        if (typeof checkTimeout !== 'number') {\n            throw new Error('[TrustAdapter] config.checkTimeout should be a number');\n        }\n\n        this.config = {\n            checkTimeout,\n            openAppWithDeeplink,\n            openUrlWhenWalletNotFound,\n        };\n        this._connecting = false;\n        this._wallet = null;\n        this._address = null;\n\n        if (!isInBrowser()) {\n            this._readyState = WalletReadyState.NotFound;\n            this.setState(AdapterState.NotFound);\n            return;\n        }\n        if (supportTrust()) {\n            this._readyState = WalletReadyState.Found;\n            this._updateWallet();\n        } else {\n            this._checkWallet().then(() => {\n                if (this.connected) {\n                    this.emit('connect', this.address || '');\n                }\n            });\n        }\n    }\n\n    get address() {\n        return this._address;\n    }\n\n    get state() {\n        return this._state;\n    }\n\n    get readyState() {\n        return this._readyState;\n    }\n\n    get connecting() {\n        return this._connecting;\n    }\n\n    /**\n     * Get network information used by Trust.\n     * @returns {Network} Current network information.\n     */\n    async network(): Promise<Network> {\n        try {\n            await this._checkWallet();\n            if (this.state !== AdapterState.Connected) throw new WalletDisconnectedError();\n            const wallet = this._wallet;\n            if (!wallet || !wallet.tronWeb) throw new WalletDisconnectedError();\n            try {\n                return await getNetworkInfoByTronWeb(wallet.tronWeb);\n            } catch (e: any) {\n                throw new WalletGetNetworkError(e?.message, e);\n            }\n        } catch (e: any) {\n            this.emit('error', e);\n            throw e;\n        }\n    }\n\n    async connect(): Promise<void> {\n        try {\n            this.checkIfopenTrustWallet();\n            if (this.connected || this.connecting) return;\n            await this._checkWallet();\n            if (this.state === AdapterState.NotFound) {\n                if (this.config.openUrlWhenWalletNotFound !== false && isInBrowser()) {\n                    window.open(this.url, '_blank');\n                }\n                throw new WalletNotFoundError();\n            }\n            if (!this._wallet) return;\n            this._connecting = true;\n            const wallet = this._wallet as TronLinkWallet;\n            try {\n                const res = await wallet.request({ method: 'tron_requestAccounts' });\n                if (!res) {\n                    throw new WalletConnectionError('Request connect error.');\n                }\n                if (res.code === 4000) {\n                    throw new WalletConnectionError(\n                        'The same DApp has already initiated a request to connect to trustwallet, and the pop-up window has not been closed.'\n                    );\n                }\n                if (res.code === 4001) {\n                    throw new WalletConnectionError('The user rejected connection.');\n                }\n            } catch (error: any) {\n                throw new WalletConnectionError(error?.message, error);\n            }\n\n            const address = wallet.tronWeb.defaultAddress?.base58 || '';\n            this.setAddress(address);\n            this.setState(AdapterState.Connected);\n            this._listenEvent();\n            this.connected && this.emit('connect', this.address || '');\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        } finally {\n            this._connecting = false;\n        }\n    }\n\n    async disconnect(): Promise<void> {\n        this._stopListenEvent();\n        if (this.state !== AdapterState.Connected) {\n            return;\n        }\n        this.setAddress(null);\n        this.setState(AdapterState.Disconnect);\n        this.emit('disconnect');\n    }\n\n    async signTransaction(transaction: Transaction, privateKey?: string): Promise<SignedTransaction> {\n        try {\n            const wallet = await this.checkAndGetWallet();\n\n            try {\n                return await wallet.tronWeb.trx.sign(transaction, privateKey);\n            } catch (error: any) {\n                if (error instanceof Error || (typeof error === 'object' && error.message)) {\n                    throw new WalletSignTransactionError(error.message, error);\n                } else if (typeof error === 'string') {\n                    throw new WalletSignTransactionError(error, new Error(error));\n                } else {\n                    throw new WalletSignTransactionError('Unknown error', error);\n                }\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    async multiSign(\n        transaction: Transaction,\n        privateKey?: string | false,\n        permissionId?: number\n    ): Promise<SignedTransaction> {\n        try {\n            const wallet = await this.checkAndGetWallet();\n\n            try {\n                return await wallet.tronWeb.trx.multiSign(transaction, privateKey, permissionId);\n            } catch (error: any) {\n                if (error instanceof Error || (typeof error === 'object' && error.message)) {\n                    throw new WalletSignTransactionError(error.message, error);\n                } else if (typeof error === 'string') {\n                    throw new WalletSignTransactionError(error, new Error(error));\n                } else {\n                    throw new WalletSignTransactionError('Unknown error', error);\n                }\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    async signMessage(message: string, privateKey?: string): Promise<string> {\n        try {\n            const wallet = await this.checkAndGetWallet();\n            try {\n                return await wallet.tronWeb.trx.signMessageV2(message, privateKey);\n            } catch (error: any) {\n                if (error instanceof Error || (typeof error === 'object' && error.message)) {\n                    throw new WalletSignMessageError(error.message, error);\n                } else if (typeof error === 'string') {\n                    throw new WalletSignMessageError(error, new Error(error));\n                } else {\n                    throw new WalletSignMessageError('Unknown error', error);\n                }\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    private async checkAndGetWallet() {\n        this.checkIfopenTrustWallet();\n        await this._checkWallet();\n        if (this.state !== AdapterState.Connected) throw new WalletDisconnectedError();\n        const wallet = this._wallet;\n        if (!wallet || !wallet.tronWeb) throw new WalletDisconnectedError();\n        return wallet as TronLinkWallet;\n    }\n\n    private _listenEvent() {\n        this._stopListenEvent();\n        window.addEventListener('message', this.messageHandler);\n    }\n\n    private _stopListenEvent() {\n        window.removeEventListener('message', this.messageHandler);\n    }\n\n    private messageHandler = (e: TronLinkMessageEvent) => {\n        const message = e.data?.message;\n        if (!message) {\n            return;\n        }\n        if (message.action === 'accountsChanged') {\n            setTimeout(() => {\n                const preAddr = this.address || '';\n                if ((this._wallet as TronLinkWallet)?.ready) {\n                    const address = (message.data as AccountsChangedEventData).address;\n                    this.setAddress(address);\n                    this.setState(AdapterState.Connected);\n                } else {\n                    this.setAddress(null);\n                    this.setState(AdapterState.Disconnect);\n                }\n                const address = this.address || '';\n                if (address !== preAddr) {\n                    this.emit('accountsChanged', this.address || '', preAddr);\n                }\n                if (!preAddr && this.address) {\n                    this.emit('connect', this.address);\n                } else if (preAddr && !this.address) {\n                    this.emit('disconnect');\n                }\n            }, 200);\n        } else if (message.action === 'connect') {\n            const isCurConnected = this.connected;\n            const preAddress = this.address || '';\n            const address = (this._wallet as TronLinkWallet).tronWeb?.defaultAddress?.base58 || '';\n            this.setAddress(address);\n            this.setState(AdapterState.Connected);\n            if (!isCurConnected) {\n                this.emit('connect', address);\n            } else if (address !== preAddress) {\n                this.emit('accountsChanged', this.address || '', preAddress);\n            }\n        } else if (message.action === 'disconnect') {\n            this.setAddress(null);\n            this.setState(AdapterState.Disconnect);\n            this.emit('disconnect');\n        }\n    };\n\n    private checkIfopenTrustWallet() {\n        if (this.config.openAppWithDeeplink === false) {\n            return;\n        }\n        if (openTrustWallet()) {\n            throw new WalletNotFoundError();\n        }\n    }\n\n    private _checkPromise: Promise<boolean> | null = null;\n    /**\n     * check if wallet exists by interval, the promise only resolve when wallet detected or timeout\n     * @returns if trustwallet exists\n     */\n    private _checkWallet(): Promise<boolean> {\n        if (this.readyState === WalletReadyState.Found) {\n            return Promise.resolve(true);\n        }\n        if (this._checkPromise) {\n            return this._checkPromise;\n        }\n        const interval = 100;\n        const maxTimes = Math.floor(this.config.checkTimeout / interval);\n        let times = 0,\n            timer: ReturnType<typeof setInterval>;\n        this._checkPromise = new Promise((resolve) => {\n            const check = () => {\n                times++;\n                const isSupport = supportTrust();\n                if (isSupport || times > maxTimes) {\n                    timer && clearInterval(timer);\n                    this._readyState = isSupport ? WalletReadyState.Found : WalletReadyState.NotFound;\n                    this._updateWallet();\n                    this.emit('readyStateChanged', this.readyState);\n                    resolve(isSupport);\n                }\n            };\n            timer = setInterval(check, interval);\n            check();\n        });\n        return this._checkPromise;\n    }\n\n    private _updateWallet = () => {\n        let state = this.state;\n        let address = this.address;\n        if (supportTrust()) {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            this._wallet = window.trustwallet!.tronLink;\n            this._listenEvent();\n            address = this._wallet.tronWeb?.defaultAddress?.base58 || null;\n            state = this._wallet.ready ? AdapterState.Connected : AdapterState.Disconnect;\n        } else {\n            this._wallet = null;\n            address = null;\n            state = AdapterState.NotFound;\n        }\n        this.setAddress(address);\n        this.setState(state);\n    };\n\n    private setAddress(address: string | null) {\n        this._address = address;\n    }\n\n    private setState(state: AdapterState) {\n        const preState = this.state;\n        if (state !== preState) {\n            this._state = state;\n            this.emit('stateChanged', state);\n        }\n    }\n}\n", "import { isInBrowser } from '@tronweb3/tronwallet-abstract-adapter';\n\nexport function supportGuarda() {\n    return isInBrowser() && typeof window.guarda !== 'undefined';\n}\n", "import {\n    Adapter,\n    AdapterState,\n    isInBrowser,\n    WalletReadyState,\n    WalletSignMessageError,\n    WalletNotFoundError,\n    WalletDisconnectedError,\n    WalletSignTransactionError,\n    WalletGetNetworkError,\n    WalletConnectionError,\n    WalletError,\n} from '@tronweb3/tronwallet-abstract-adapter';\nimport type {\n    Transaction,\n    SignedTransaction,\n    AdapterName,\n    BaseAdapterConfig,\n    Network,\n    TronWeb,\n} from '@tronweb3/tronwallet-abstract-adapter';\nimport { getNetworkInfoByTronWeb } from '@tronweb3/tronwallet-adapter-tronlink';\nimport type { Tron } from '@tronweb3/tronwallet-adapter-tronlink';\nimport { supportGuarda } from './utils.js';\n\nexport interface GuardaAdapterConfig extends BaseAdapterConfig {\n    checkTimeout?: number;\n    openUrlWhenWalletNotFound?: boolean;\n}\n\nexport const GuardaAdapterName = 'Guarda' as AdapterName<'Guarda'>;\n\nexport interface GuardaWallet {\n    ready: boolean;\n    tronWeb: TronWeb;\n    tron: Tron;\n}\n\ndeclare global {\n    interface Window {\n        guarda?: GuardaWallet;\n    }\n}\n\nexport class GuardaAdapter extends Adapter {\n    name = GuardaAdapterName;\n    url = 'https://guarda.com?install=guarda-extensional';\n    icon =\n        'data:image/svg+xml;utf8,<svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M42.988 4.81415C43.0306 4.86441 43.0563 4.92697 43.0613 4.99278C43.0877 5.31552 45.4233 37.3313 23.6002 44.7878C23.5347 44.8103 23.4636 44.8103 23.398 44.7878C1.57567 37.3313 3.91123 5.31552 3.93695 4.99278C3.9422 4.92717 3.96786 4.86486 4.01029 4.81465C4.05273 4.76445 4.10979 4.72891 4.17343 4.71304L23.4251 0.00861373C23.4738 -0.00287124 23.5244 -0.00287124 23.573 0.00861373L42.8241 4.71304C42.888 4.72848 42.9454 4.7639 42.988 4.81415ZM39.4448 8.23253C39.4795 8.27324 39.5006 8.32385 39.5051 8.37725H39.5073C39.5287 8.64049 41.4392 34.7784 23.582 40.865C23.5296 40.885 23.4716 40.885 23.4192 40.865C5.56132 34.7784 7.47248 8.64049 7.49393 8.37725C7.49807 8.32385 7.51897 8.27309 7.55364 8.23238C7.5883 8.19168 7.63494 8.16303 7.68682 8.15057L23.4377 4.30758C23.4776 4.29755 23.5193 4.29755 23.5592 4.30758L39.3115 8.15057C39.3634 8.16318 39.41 8.19188 39.4448 8.23253Z\" fill=\"%23798CE5\"/><path d=\"M23.2759 10.0442L12.7734 12.6047C12.7388 12.6136 12.7078 12.6331 12.6847 12.6604C12.6617 12.6878 12.6477 12.7218 12.6448 12.7575C12.6312 12.9332 11.3574 30.3588 23.2609 34.417C23.2966 34.4284 23.3352 34.4284 23.3709 34.417C35.2745 30.3581 34.0014 12.9332 33.987 12.7568C33.9843 12.721 33.9704 12.6869 33.9471 12.6595C33.9239 12.6322 33.8926 12.613 33.8577 12.6047L23.3559 10.0435C23.3297 10.0365 23.3022 10.0365 23.2759 10.0435\" fill=\"%23798CE5\"/></svg>';\n\n    config: Required<GuardaAdapterConfig>;\n    private _readyState: WalletReadyState = isInBrowser() ? WalletReadyState.Loading : WalletReadyState.NotFound;\n    private _state: AdapterState = AdapterState.Loading;\n    private _connecting: boolean;\n    private _wallet: GuardaWallet | null;\n    private _address: string | null;\n\n    constructor(config: GuardaAdapterConfig = {}) {\n        super();\n\n        const { checkTimeout = 2 * 1000, openUrlWhenWalletNotFound = true } = config;\n        if (typeof checkTimeout !== 'number') {\n            throw new Error('[GuardaAdapter] config.checkTimeout should be a number');\n        }\n        this.config = {\n            checkTimeout,\n            openUrlWhenWalletNotFound,\n        };\n        this._connecting = false;\n        this._wallet = null;\n        this._address = null;\n\n        if (supportGuarda()) {\n            this._readyState = WalletReadyState.Found;\n            this._updateWallet();\n        } else {\n            this._checkWallet().then(() => {\n                if (this.connected) {\n                    this.emit('connect', this.address || '');\n                }\n            });\n        }\n    }\n\n    get address() {\n        return this._address;\n    }\n\n    get state() {\n        return this._state;\n    }\n\n    get readyState() {\n        return this._readyState;\n    }\n\n    get connecting() {\n        return this._connecting;\n    }\n\n    async network(): Promise<Network> {\n        try {\n            await this._checkWallet();\n\n            if (this.state !== AdapterState.Connected) throw new WalletDisconnectedError();\n\n            const wallet = this._wallet;\n            if (!wallet || !wallet.tronWeb) throw new WalletDisconnectedError();\n\n            try {\n                const networkInfo = await getNetworkInfoByTronWeb(wallet.tronWeb);\n                return networkInfo;\n            } catch (err: any) {\n                throw new WalletGetNetworkError(err?.message, err);\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    async connect(): Promise<void> {\n        try {\n            if (this.connected || this.connecting) {\n                return;\n            }\n\n            await this._checkWallet();\n\n            if (this.readyState === WalletReadyState.NotFound) {\n                if (this.config.openUrlWhenWalletNotFound !== false && isInBrowser()) {\n                    window.open(this.url, '_blank');\n                }\n                throw new WalletNotFoundError();\n            }\n\n            if (!this._wallet) {\n                return;\n            }\n\n            this._connecting = true;\n            const wallet = this._wallet as GuardaWallet;\n\n            try {\n                const res = await wallet.tron.request({ method: 'eth_requestAccounts' });\n                if (!res?.[0]) {\n                    throw new WalletConnectionError('Request connect error.');\n                }\n                const address = res[0];\n                this.setAddress(address);\n                this.setState(AdapterState.Connected);\n                this.emit('connect', this.address || '');\n            } catch (error: any) {\n                if (error instanceof WalletError) {\n                    throw error;\n                } else {\n                    throw new WalletConnectionError(error?.message, error);\n                }\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        } finally {\n            this._connecting = false;\n        }\n    }\n\n    async disconnect(): Promise<void> {\n        if (this.state !== AdapterState.Connected) {\n            return;\n        }\n        this.setAddress(null);\n        this.setState(AdapterState.Disconnect);\n        this.emit('disconnect');\n    }\n\n    async signTransaction(transaction: Transaction): Promise<SignedTransaction> {\n        try {\n            const wallet = await this.checkAndGetWallet();\n            try {\n                const signedTx = await wallet.tronWeb.trx.sign(transaction);\n                return signedTx;\n            } catch (error: any) {\n                if (error instanceof Error) {\n                    throw new WalletSignTransactionError(error.message, error);\n                } else {\n                    throw new WalletSignTransactionError(error, new Error(error));\n                }\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    async signMessage(message: string): Promise<string> {\n        try {\n            const wallet = await this.checkAndGetWallet();\n            try {\n                const signature = await wallet.tronWeb.trx.signMessage(message);\n                return signature;\n            } catch (error: any) {\n                if (error instanceof Error) {\n                    throw new WalletSignMessageError(error.message, error);\n                } else {\n                    throw new WalletSignMessageError(error, new Error(error));\n                }\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    private async checkAndGetWallet() {\n        await this._checkWallet();\n        if (this.state !== AdapterState.Connected) {\n            throw new WalletDisconnectedError();\n        }\n        const wallet = this._wallet;\n        if (!wallet || !wallet.tronWeb) {\n            throw new WalletDisconnectedError();\n        }\n        return wallet;\n    }\n\n    private _checkPromise: Promise<boolean> | null = null;\n\n    private _checkWallet(): Promise<boolean> {\n        if (this.readyState === WalletReadyState.Found) {\n            return Promise.resolve(true);\n        }\n        if (this._checkPromise) {\n            return this._checkPromise;\n        }\n        const interval = 100;\n        const maxTimes = Math.floor(this.config.checkTimeout / interval);\n        let times = 0,\n            timer: ReturnType<typeof setInterval>;\n\n        this._checkPromise = new Promise((resolve) => {\n            const check = () => {\n                times++;\n                const isSupport = supportGuarda();\n                if (isSupport || times > maxTimes) {\n                    timer && clearInterval(timer);\n                    this._readyState = isSupport ? WalletReadyState.Found : WalletReadyState.NotFound;\n                    this._updateWallet();\n                    this.emit('readyStateChanged', this.readyState);\n                    resolve(isSupport);\n                }\n            };\n            timer = setInterval(check, interval);\n            check();\n        });\n        return this._checkPromise;\n    }\n\n    private _updateWallet = () => {\n        if (!isInBrowser()) {\n            return;\n        }\n        const guarda = window.guarda;\n        if (supportGuarda() && guarda) {\n            this._wallet = guarda;\n            this.setState(AdapterState.Disconnect);\n        } else {\n            this._wallet = null;\n            this.setState(AdapterState.NotFound);\n        }\n    };\n\n    private setAddress(address: string | null) {\n        this._address = address;\n    }\n\n    private setState(state: AdapterState) {\n        this._state = state;\n        this.emit('stateChanged', state);\n    }\n}\n", "import {\n    Adapter,\n    AdapterState,\n    isInBrowser,\n    WalletReadyState,\n    WalletSignMessageError,\n    WalletNotFoundError,\n    WalletDisconnectedError,\n    WalletConnectionError,\n    WalletSignTransactionError,\n    type Network,\n    WalletGetNetworkError,\n    NetworkType,\n} from '@tronweb3/tronwallet-abstract-adapter';\nimport type {\n    Transaction,\n    SignedTransaction,\n    AdapterName,\n    BaseAdapterConfig,\n} from '@tronweb3/tronwallet-abstract-adapter';\n\ndeclare global {\n    interface Window {\n        binancew3w?: {\n            tron: any;\n        };\n        isBinance: boolean;\n    }\n}\n\nexport interface BinanceWalletAdapterConfig extends BaseAdapterConfig {\n    /**\n     * Timeout in millisecond for checking if Binance Wallet exists.\n     * Default is 2 * 1000ms\n     */\n    checkTimeout?: number;\n}\n\nexport const BinanceWalletAdapterName = 'Binance Wallet' as AdapterName<'Binance Wallet'>;\n\nconst chainIdNetworkMap: Record<string, NetworkType> = {\n    '0x2b6653dc': NetworkType.Mainnet,\n    '0x94a9059e': NetworkType.Shasta,\n    '0xcd8690dc': NetworkType.Nile,\n};\n\nexport class BinanceWalletAdapter extends Adapter {\n    name = BinanceWalletAdapterName;\n    url = 'https://www.binance.com/en/binancewallet';\n    icon =\n        'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMzAiIHZpZXdCb3g9IjAgMCAzMCAzMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjMwIiBoZWlnaHQ9IjMwIiBmaWxsPSIjMEIwRTExIi8+CjxwYXRoIGQ9Ik01IDE1TDcuMjU4MDYgMTIuNzQxOUw5LjUxNjEzIDE1TDcuMjU4MDYgMTcuMjU4MUw1IDE1WiIgZmlsbD0iI0YwQjkwQiIvPgo8cGF0aCBkPSJNOC44NzA5NyAxMS4xMjlMMTUgNUwyMS4xMjkgMTEuMTI5TDE4Ljg3MSAxMy4zODcxTDE1IDkuNTE2MTNMMTEuMTI5IDEzLjM4NzFMOC44NzA5NyAxMS4xMjlaIiBmaWxsPSIjRjBCOTBCIi8+CjxwYXRoIGQ9Ik0xMi43NDE5IDE1TDE1IDEyLjc0MTlMMTcuMjU4MSAxNUwxNSAxNy4yNTgxTDEyLjc0MTkgMTVaIiBmaWxsPSIjRjBCOTBCIi8+CjxwYXRoIGQ9Ik0xMS4xMjkgMTYuNjEyOUw4Ljg3MDk3IDE4Ljg3MUwxNSAyNUwyMS4xMjkgMTguODcxTDE4Ljg3MSAxNi42MTI5TDE1IDIwLjQ4MzlMMTEuMTI5IDE2LjYxMjlaIiBmaWxsPSIjRjBCOTBCIi8+CjxwYXRoIGQ9Ik0yMC40ODM5IDE1TDIyLjc0MTkgMTIuNzQxOUwyNSAxNUwyMi43NDE5IDE3LjI1ODFMMjAuNDgzOSAxNVoiIGZpbGw9IiNGMEI5MEIiLz4KPC9zdmc+Cg==';\n\n    config: Required<BinanceWalletAdapterConfig>;\n    private _readyState: WalletReadyState = isInBrowser() ? WalletReadyState.Loading : WalletReadyState.NotFound;\n    private _state: AdapterState = AdapterState.Loading;\n    private _connecting: boolean;\n    private _provider: any;\n    private _address: string | null;\n\n    constructor(config: BinanceWalletAdapterConfig = {}) {\n        super();\n        const { checkTimeout = 2 * 1000, openUrlWhenWalletNotFound = true } = config;\n        if (typeof checkTimeout !== 'number') {\n            throw new Error('[BinanceWalletAdapter] config.checkTimeout should be a number');\n        }\n        this.config = {\n            checkTimeout,\n            openUrlWhenWalletNotFound,\n        };\n        this._connecting = false;\n        this._provider = null;\n        this._address = null;\n\n        if (!isInBrowser()) {\n            this._readyState = WalletReadyState.NotFound;\n            this.setState(AdapterState.NotFound);\n            return;\n        }\n\n        this._checkWallet().then(() => {\n            if (this.connected) {\n                this.emit('connect', this.address || '');\n                this._listenEvent();\n            }\n        });\n    }\n\n    get address() {\n        return this._address;\n    }\n\n    get state() {\n        return this._state;\n    }\n\n    get readyState() {\n        return this._readyState;\n    }\n\n    get connecting() {\n        return this._connecting;\n    }\n\n    /**\n     * Get network information used by Binance Wallet.\n     * @returns {Network} Current network information.\n     */\n    async network(): Promise<Network> {\n        try {\n            await this._checkWallet();\n            if (this.state !== AdapterState.Connected) throw new WalletDisconnectedError();\n            try {\n                const chainId = this._provider.getChainId();\n                return {\n                    networkType: chainIdNetworkMap[chainId] || NetworkType.Unknown,\n                    chainId,\n                    fullNode: '',\n                    solidityNode: '',\n                    eventServer: '',\n                };\n            } catch (e: any) {\n                throw new WalletGetNetworkError(e?.message, e);\n            }\n        } catch (e: any) {\n            this.emit('error', e);\n            throw e;\n        }\n    }\n\n    async connect(): Promise<void> {\n        try {\n            if (this.connected || this.connecting) return;\n            await this._checkWallet();\n            if (this.state === AdapterState.NotFound) {\n                if (this.config.openUrlWhenWalletNotFound !== false && isInBrowser()) {\n                    window.open(this.url, '_blank');\n                }\n                throw new WalletNotFoundError();\n            }\n\n            this._connecting = true;\n            try {\n                const { address } = await this._provider.getAccount();\n                this.setAddress(address);\n                this.setState(AdapterState.Connected);\n                this.emit('connect', address);\n                this._listenEvent();\n            } catch (error: any) {\n                throw new WalletConnectionError(error?.message, error);\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        } finally {\n            this._connecting = false;\n        }\n    }\n\n    async disconnect(): Promise<void> {\n        if (this.state !== AdapterState.Connected) {\n            return;\n        }\n        await this._provider.disconnect();\n        this.setAddress(null);\n        this.setState(AdapterState.Disconnect);\n        this.emit('disconnect');\n        this._stopListenEvent();\n    }\n\n    async signMessage(message: string): Promise<string> {\n        try {\n            if (this.state !== AdapterState.Connected) throw new WalletDisconnectedError();\n            try {\n                return await this._provider.signMessageV2(message);\n            } catch (error: any) {\n                throw new WalletSignMessageError(error?.message, error);\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    async signTransaction(transaction: Transaction): Promise<SignedTransaction> {\n        try {\n            if (this.state !== AdapterState.Connected) throw new WalletDisconnectedError();\n            try {\n                return await this._provider.signTransaction(transaction);\n            } catch (error: any) {\n                throw new WalletSignTransactionError(error?.message, error);\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    private _onAccountsChanged = (address: string[]) => {\n        const preAddr = this.address || '';\n        this.setAddress(address[0]);\n        this.emit('accountsChanged', this.address || '', preAddr);\n    };\n    private _listenEvent() {\n        this._stopListenEvent();\n        this._provider.on('accountsChanged', this._onAccountsChanged);\n    }\n    private _stopListenEvent() {\n        this._provider.removeListener('accountsChanged', this._onAccountsChanged);\n    }\n\n    private _checkPromise: Promise<boolean> | null = null;\n    private async _checkWallet(): Promise<boolean> {\n        if (this.readyState === WalletReadyState.Found) {\n            return true;\n        }\n        if (this._checkPromise) {\n            return this._checkPromise;\n        }\n\n        const interval = 100;\n        const maxTimes = Math.floor(this.config.checkTimeout / interval);\n        let times = 0;\n        let timer: ReturnType<typeof setInterval>;\n\n        this._checkPromise = new Promise((resolve) => {\n            const check = () => {\n                times++;\n                const isSupport = !!window.binancew3w?.tron;\n                if (isSupport || times > maxTimes) {\n                    timer && clearInterval(timer);\n                    this._readyState = isSupport ? WalletReadyState.Found : WalletReadyState.NotFound;\n                    this._updateProvider();\n                    this.emit('readyStateChanged', this.readyState);\n                    resolve(isSupport);\n                }\n            };\n            timer = setInterval(check, interval);\n            check();\n        });\n\n        return this._checkPromise;\n    }\n\n    private _updateProvider = () => {\n        let state = this.state;\n        let address = this.address;\n\n        if (window.binancew3w?.tron) {\n            this._provider = window.binancew3w.tron;\n            address = null; // Will be set when connected\n            state = AdapterState.Disconnect;\n        } else {\n            this._provider = null;\n            address = null;\n            state = AdapterState.NotFound;\n        }\n\n        this.setAddress(address);\n        this.setState(state);\n    };\n\n    private setAddress(address: string | null) {\n        this._address = address;\n    }\n\n    private setState(state: AdapterState) {\n        const preState = this.state;\n        if (state !== preState) {\n            this._state = state;\n            this.emit('stateChanged', state);\n        }\n    }\n}\n", "export const PARSE_ERROR = 'PARSE_ERROR'\nexport const INVALID_REQUEST = 'INVALID_REQUEST'\nexport const METHOD_NOT_FOUND = 'METHOD_NOT_FOUND'\nexport const INVALID_PARAMS = 'INVALID_PARAMS'\nexport const INTERNAL_ERROR = 'INTERNAL_ERROR'\nexport const SERVER_ERROR = 'SERVER_ERROR'\n\nexport const RESERVED_ERROR_CODES = [-32700, -32600, -32601, -32602, -32603]\nexport const SERVER_ERROR_CODE_RANGE = [-32000, -32099]\n\nexport const STANDARD_ERROR_MAP = {\n  [PARSE_ERROR]: { code: -32700, message: 'Parse error' },\n  [INVALID_REQUEST]: { code: -32600, message: 'Invalid Request' },\n  [METHOD_NOT_FOUND]: { code: -32601, message: 'Method not found' },\n  [INVALID_PARAMS]: { code: -32602, message: 'Invalid params' },\n  [INTERNAL_ERROR]: { code: -32603, message: 'Internal error' },\n  [SERVER_ERROR]: { code: -32000, message: 'Server error' },\n}\n\nexport const DEFAULT_ERROR = SERVER_ERROR\n", "import {\n  ErrorResponse,\n  JsonRpcFailure,\n  JsonRpcValidation,\n} from '@binance/w3w-types'\n\nimport {\n  SERVER_ERROR_CODE_RANGE,\n  RESERVED_ERROR_CODES,\n  STANDARD_ERROR_MAP,\n  DEFAULT_ERROR,\n} from './constants'\n\nexport function isServerErrorCode(code: number): boolean {\n  return (\n    code <= SERVER_ERROR_CODE_RANGE[0] && code >= SERVER_ERROR_CODE_RANGE[1]\n  )\n}\n\nexport function isReservedErrorCode(code: number): boolean {\n  return RESERVED_ERROR_CODES.includes(code)\n}\n\nexport function isValidErrorCode(code: number): boolean {\n  return typeof code === 'number'\n}\n\nexport function getError(type: string): ErrorResponse {\n  if (!Object.keys(STANDARD_ERROR_MAP).includes(type)) {\n    return STANDARD_ERROR_MAP[DEFAULT_ERROR]\n  }\n  return STANDARD_ERROR_MAP[type]\n}\n\nexport function getErrorByCode(code: number): ErrorResponse {\n  const match = Object.values(STANDARD_ERROR_MAP).find((e) => e.code === code)\n  if (!match) {\n    return STANDARD_ERROR_MAP[DEFAULT_ERROR]\n  }\n  return match\n}\n\nexport function validateJsonRpcError(\n  response: JsonRpcFailure\n): JsonRpcValidation {\n  if (typeof response.error.code === 'undefined') {\n    return { valid: false, error: 'Missing code for JSON-RPC error' }\n  }\n  if (typeof response.error.message === 'undefined') {\n    return { valid: false, error: 'Missing message for JSON-RPC error' }\n  }\n  if (!isValidErrorCode(response.error.code)) {\n    return {\n      valid: false,\n      // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n      error: `Invalid error code type for JSON-RPC: ${response.error.code}`,\n    }\n  }\n  if (isReservedErrorCode(response.error.code)) {\n    const error = getErrorByCode(response.error.code)\n    if (\n      error.message !== STANDARD_ERROR_MAP[DEFAULT_ERROR].message &&\n      response.error.message === error.message\n    ) {\n      return {\n        valid: false,\n        error: `Invalid error code message for JSON-RPC: ${response.error.code}`,\n      }\n    }\n  }\n  return { valid: true }\n}\n\nexport function parseConnectionError(\n  e: Error,\n  url: string,\n  type: string\n): Error {\n  return e.message.includes('getaddrinfo ENOTFOUND') ||\n    e.message.includes('connect ECONNREFUSED')\n    ? new Error(`Unavailable ${type} RPC url at ${url}`)\n    : e\n}\n", "import {\n  Any,\n  ErrorResponse,\n  JsonRpcFailure,\n  JsonRpcRequest,\n  JsonRpcSuccess,\n} from '@binance/w3w-types'\n\nimport { INTERNAL_ERROR, SERVER_ERROR } from './constants'\nimport { getError, getErrorByCode, isReservedErrorCode } from './error'\n\nexport function payloadId(): number {\n  const date = Date.now() * Math.pow(10, 3)\n  const extra = Math.floor(Math.random() * Math.pow(10, 3))\n  return date + extra\n}\n\nexport function uuid(): string {\n  const result: string = ((a?: Any, b?: Any) => {\n    for (\n      b = a = '';\n      a++ < 36;\n      b +=\n        (a * 51) & 52\n          ? (a ^ 15 ? 8 ^ (Math.random() * (a ^ 20 ? 16 : 4)) : 4).toString(16)\n          : '-'\n    ) {\n      // empty\n    }\n    return b\n  })()\n  return result\n}\n\nexport function formatJsonRpcRequest<T = any>(\n  method: string,\n  params: T,\n  id?: number\n): JsonRpcRequest<T> {\n  return {\n    id: id || payloadId(),\n    jsonrpc: '2.0',\n    method,\n    params: params || [],\n  } as JsonRpcRequest<T>\n}\n\nexport function formatJsonRpcResult<T = any>(\n  id: number,\n  result: T\n): JsonRpcSuccess<T> {\n  return {\n    id,\n    jsonrpc: '2.0',\n    result,\n  }\n}\n\nexport function formatJsonRpcError(\n  id: number,\n  error?: string | ErrorResponse,\n  data?: string\n): JsonRpcFailure {\n  return {\n    id,\n    jsonrpc: '2.0',\n    error: formatErrorMessage(error, data),\n  }\n}\n\nexport function formatErrorMessage(\n  error?: string | ErrorResponse,\n  data?: string\n): ErrorResponse {\n  if (typeof error === 'undefined') {\n    return getError(INTERNAL_ERROR)\n  }\n  if (typeof error === 'string') {\n    error = {\n      ...getError(SERVER_ERROR),\n      message: error,\n    }\n  }\n  if (typeof data !== 'undefined') {\n    error.data = data\n  }\n  if (isReservedErrorCode(error.code)) {\n    error = getErrorByCode(error.code)\n  }\n  return error\n}\n", "import {\n  JsonRpcFailure,\n  JsonRpcPayload,\n  JsonRpcResponse,\n  JsonRpcSuccess,\n} from '@binance/w3w-types'\n\nexport function isJsonRpcPayload(payload: any): payload is JsonRpcPayload {\n  return (\n    typeof payload === 'object' &&\n    'id' in payload &&\n    'jsonrpc' in payload &&\n    payload.jsonrpc === '2.0'\n  )\n}\n\nexport function isJsonRpcResponse<T = any>(\n  payload: JsonRpcPayload\n): payload is JsonRpcResponse<T> {\n  return (\n    isJsonRpcPayload(payload) &&\n    (isJsonRpcSuccess(payload) || isJsonRpcError(payload))\n  )\n}\nexport function isJsonRpcSuccess<T = any>(\n  payload: JsonRpcPayload\n): payload is JsonRpcSuccess<T> {\n  return 'result' in payload\n}\n\nexport function isJsonRpcError(\n  payload: JsonRpcPayload\n): payload is JsonRpcFailure {\n  return 'error' in payload\n}\n", "const HTTP_REGEX = '^https?:'\n\nconst WS_REGEX = '^wss?:'\n\nfunction getUrlProtocol(url: string): string | undefined {\n  const matches = url.match(new RegExp(/^\\w+:/, 'gi'))\n  if (!matches || !matches.length) return\n  return matches[0]\n}\n\nfunction matchRegexProtocol(url: string, regex: string): boolean {\n  const protocol = getUrlProtocol(url)\n  if (typeof protocol === 'undefined') return false\n  return new RegExp(regex).test(protocol)\n}\n\nexport function isHttpUrl(url: string): boolean {\n  return matchRegexProtocol(url, HTTP_REGEX)\n}\n\nexport function isWsUrl(url: string): boolean {\n  return matchRegexProtocol(url, WS_REGEX)\n}\n\nexport function isLocalhostUrl(url: string): boolean {\n  return new RegExp('wss?://localhost(:d{2,5})?').test(url)\n}\n", "export const getDeepLink = (url: string, chainId = 1) => {\n  const base = 'bnc://app.binance.com/mp/app'\n  const appId = 'yFK5FCqYprrXDiVFbhyRx7'\n\n  const startPagePath = window.btoa('/pages/browser/index')\n  const startPageQuery = window.btoa(`url=${url}&defaultChainId=${chainId}`)\n  const deeplink = `${base}?appId=${appId}&startPagePath=${startPagePath}&startPageQuery=${startPageQuery}`\n  const dp = window.btoa(deeplink)\n  const http = `https://app.binance.com/en/download?_dp=${dp}`\n  return { http, bnc: deeplink }\n}\n", "export const infuraNetworks = {\n  1: 'mainnet',\n  3: 'ropsten',\n  4: 'rinkeby',\n  5: 'goerli',\n  42: 'kovan',\n}\n\nexport const signingMethods = [\n  'eth_requestAccounts',\n  'eth_accounts',\n  'eth_chainId',\n  'eth_signTransaction',\n  'eth_sendTransaction',\n  'eth_sign',\n  'personal_sign',\n  'eth_signTypedData',\n  'eth_signTypedData_v1',\n  'eth_signTypedData_v2',\n  'eth_signTypedData_v3',\n  'eth_signTypedData_v4',\n  'wallet_switchEthereumChain',\n  'wallet_watchAsset',\n]\n", "import { IRpcConfig } from '@binance/w3w-types'\n\nimport { infuraNetworks } from './constants'\n\nexport function getInfuraRpcUrl(\n  chainId: number,\n  infuraId?: string\n): string | undefined {\n  let rpcUrl: string | undefined\n  const network = infuraNetworks[chainId]\n  if (typeof network == 'string') {\n    rpcUrl = `https://${network}.infura.io/v3/${infuraId}`\n  }\n  return rpcUrl\n}\n\nexport function safeJsonParse<T = any>(value: string): T | string {\n  if (typeof value !== 'string') {\n    throw new Error(`Cannot safe json parse value of type ${typeof value}`)\n  }\n  try {\n    return JSON.parse(value)\n  } catch {\n    return value\n  }\n}\n\nexport function safeJsonStringify(value: any): string {\n  return typeof value === 'string' ? value : JSON.stringify(value)\n}\n\nexport function getRpcUrl(\n  chainId: number,\n  rpc: IRpcConfig\n): string | undefined {\n  let rpcUrl: string | undefined\n  const infuraUrl = getInfuraRpcUrl(chainId, rpc.infuraId)\n  if (rpc.custom && rpc.custom[chainId]) {\n    rpcUrl = rpc.custom[chainId]\n  } else if (infuraUrl) {\n    rpcUrl = infuraUrl\n  }\n  return rpcUrl\n}\n\nexport function isNode() {\n  return (\n    typeof process !== 'undefined' &&\n    typeof process.versions !== 'undefined' &&\n    typeof process.versions.node !== 'undefined'\n  )\n}\n\nexport function normalizeChainId(chainId: string | number | bigint) {\n  if (typeof chainId === 'string')\n    return Number.parseInt(\n      chainId,\n      chainId.trim().substring(0, 2) === '0x' ? 16 : 10\n    )\n  if (typeof chainId === 'bigint') return Number(chainId)\n  return chainId\n}\n", "// -- Constants ------------------------------------------ //\nconst ENC_HEX = 'hex'\nconst ENC_UTF8 = 'utf8'\n\nexport function removeHexPrefix(hex: string): string {\n  return hex.replace(/^0x/, '')\n}\n\nexport function hexToArray(hex: string): Uint8Array {\n  return bufferToArray(Buffer.from(removeHexPrefix(hex), ENC_HEX))\n}\n\nexport function arrayToHex(arr: Uint8Array, prefixed = false): string {\n  return bufferToHex(arrayToBuffer(arr), prefixed)\n}\n\n// -- Uint8Array ----------------------------------------- //\n\nexport function bufferToArray(buf: Buffer): Uint8Array {\n  return new Uint8Array(buf)\n}\n\nexport function bufferToHex(buf: Buffer, prefixed = false): string {\n  const hex = buf.toString(ENC_HEX)\n  return prefixed ? addHexPrefix(hex) : hex\n}\n\nexport function typedArrayToBuffer(arr: Uint8Array) {\n  return ArrayBuffer.isView(arr)\n    ? Buffer.from(arr.buffer, arr.byteOffset, arr.byteLength)\n    : Buffer.from(arr)\n}\n\nexport function arrayToBuffer(arr: Uint8Array): Buffer {\n  return typedArrayToBuffer(arr)\n}\n\nexport function addHexPrefix(hex: string): string {\n  return hex.startsWith('0x') ? hex : `0x${hex}`\n}\n\nexport function concatArrays(...args: Uint8Array[]): Uint8Array {\n  let result: number[] = []\n  args.forEach((arg) => (result = result.concat(Array.from(arg))))\n  return new Uint8Array([...result])\n}\n\nexport function utf8ToArray(utf8: string): Uint8Array {\n  return bufferToArray(Buffer.from(utf8, ENC_UTF8))\n}\nexport function utf8ToBuffer(utf8: string): Buffer {\n  return Buffer.from(utf8, ENC_UTF8)\n}\n\nexport function bufferToUtf8(buf: Buffer): string {\n  return buf.toString(ENC_UTF8)\n}\n\nexport function arrayToUtf8(arr: Uint8Array): string {\n  return bufferToUtf8(arrayToBuffer(arr))\n}\n\nexport function utf8ToHex(utf8: string, prefixed = false): string {\n  return bufferToHex(utf8ToBuffer(utf8), prefixed)\n}\n", "import {\n  hexToArray,\n  arrayToHex,\n  bufferToArray,\n  arrayToBuffer,\n} from './encoding'\n\nexport function convertHexToArrayBuffer(hex: string): ArrayBuffer {\n  return hexToArray(hex).buffer\n}\n\nexport function convertArrayBufferToHex(\n  arrBuf: ArrayBuffer,\n  noPrefix?: boolean\n): string {\n  return arrayToHex(new Uint8Array(arrBuf), !noPrefix)\n}\n\nexport function convertBufferToArrayBuffer(buf: Buffer): ArrayBuffer {\n  return bufferToArray(buf).buffer\n}\n\nexport function convertArrayBufferToBuffer(arrBuf: ArrayBuffer): Buffer {\n  return arrayToBuffer(new Uint8Array(arrBuf))\n}\n\nexport function convertNumberToHex(num: number | string): string {\n  let nextChainId = '0x0'\n  if (typeof num === 'number') {\n    nextChainId = `0x${num.toString(16)}`\n  }\n  if (typeof num === 'string') {\n    if (num.startsWith('0x')) {\n      nextChainId = num\n    } else {\n      nextChainId = '0x0'\n    }\n  }\n\n  return nextChainId\n}\n", "import { Any } from '@binance/w3w-types'\nimport * as hash from 'hash.js'\n\nimport { bufferToArray, hexToArray, arrayToBuffer } from '../encoding'\n\nimport { ModeOfOperationCBC } from './aes'\nimport { pkcs7 } from './pkcs7'\n\nconst SHA256_NODE_ALGO = 'sha256'\n\nexport function aesCbcEncrypt(\n  iv: Uint8Array,\n  key: Uint8Array,\n  data: Uint8Array\n): Uint8Array {\n  const aesCbc = new ModeOfOperationCBC(key, iv)\n  const padded = pkcs7.pad(data)\n  const encryptedBytes = aesCbc.encrypt(padded)\n\n  return new Uint8Array(encryptedBytes)\n}\n\nexport function aesCbcDecrypt(\n  iv: Uint8Array,\n  key: Uint8Array,\n  data: Uint8Array\n): Uint8Array {\n  const aesCbc = new ModeOfOperationCBC(key, iv)\n  const encryptedBytes = aesCbc.decrypt(data)\n  const padded = new Uint8Array(encryptedBytes)\n  const result = pkcs7.unpad(padded)\n  return result\n}\n\nexport function hmacSha256Sign(key: Uint8Array, data: Uint8Array): Uint8Array {\n  const result = hash\n    .hmac((hash as Any)[SHA256_NODE_ALGO], key)\n    .update(data)\n    .digest('hex')\n\n  return hexToArray(result)\n}\n\nfunction insecureRandomBytes(e: number): Buffer {\n  // eslint-disable-next-line no-var\n  for (var t = new Uint8Array(e), n = 0; n < e; ++n) {\n    t[n] = Math.floor(256 * Math.random())\n  }\n  return arrayToBuffer(t)\n}\n\nexport function randomBytes(length: number): Uint8Array {\n  const buf = insecureRandomBytes(length)\n  return bufferToArray(buf)\n}\n", "const numberOfRounds = { 16: 10, 24: 12, 32: 14 }\n\nconst rcon = [\n  0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80, 0x1b, 0x36, 0x6c, 0xd8, 0xab,\n  0x4d, 0x9a, 0x2f, 0x5e, 0xbc, 0x63, 0xc6, 0x97, 0x35, 0x6a, 0xd4, 0xb3, 0x7d,\n  0xfa, 0xef, 0xc5, 0x91,\n]\n\nconst S = [\n  0x63, 0x7c, 0x77, 0x7b, 0xf2, 0x6b, 0x6f, 0xc5, 0x30, 0x01, 0x67, 0x2b, 0xfe,\n  0xd7, 0xab, 0x76, 0xca, 0x82, 0xc9, 0x7d, 0xfa, 0x59, 0x47, 0xf0, 0xad, 0xd4,\n  0xa2, 0xaf, 0x9c, 0xa4, 0x72, 0xc0, 0xb7, 0xfd, 0x93, 0x26, 0x36, 0x3f, 0xf7,\n  0xcc, 0x34, 0xa5, 0xe5, 0xf1, 0x71, 0xd8, 0x31, 0x15, 0x04, 0xc7, 0x23, 0xc3,\n  0x18, 0x96, 0x05, 0x9a, 0x07, 0x12, 0x80, 0xe2, 0xeb, 0x27, 0xb2, 0x75, 0x09,\n  0x83, 0x2c, 0x1a, 0x1b, 0x6e, 0x5a, 0xa0, 0x52, 0x3b, 0xd6, 0xb3, 0x29, 0xe3,\n  0x2f, 0x84, 0x53, 0xd1, 0x00, 0xed, 0x20, 0xfc, 0xb1, 0x5b, 0x6a, 0xcb, 0xbe,\n  0x39, 0x4a, 0x4c, 0x58, 0xcf, 0xd0, 0xef, 0xaa, 0xfb, 0x43, 0x4d, 0x33, 0x85,\n  0x45, 0xf9, 0x02, 0x7f, 0x50, 0x3c, 0x9f, 0xa8, 0x51, 0xa3, 0x40, 0x8f, 0x92,\n  0x9d, 0x38, 0xf5, 0xbc, 0xb6, 0xda, 0x21, 0x10, 0xff, 0xf3, 0xd2, 0xcd, 0x0c,\n  0x13, 0xec, 0x5f, 0x97, 0x44, 0x17, 0xc4, 0xa7, 0x7e, 0x3d, 0x64, 0x5d, 0x19,\n  0x73, 0x60, 0x81, 0x4f, 0xdc, 0x22, 0x2a, 0x90, 0x88, 0x46, 0xee, 0xb8, 0x14,\n  0xde, 0x5e, 0x0b, 0xdb, 0xe0, 0x32, 0x3a, 0x0a, 0x49, 0x06, 0x24, 0x5c, 0xc2,\n  0xd3, 0xac, 0x62, 0x91, 0x95, 0xe4, 0x79, 0xe7, 0xc8, 0x37, 0x6d, 0x8d, 0xd5,\n  0x4e, 0xa9, 0x6c, 0x56, 0xf4, 0xea, 0x65, 0x7a, 0xae, 0x08, 0xba, 0x78, 0x25,\n  0x2e, 0x1c, 0xa6, 0xb4, 0xc6, 0xe8, 0xdd, 0x74, 0x1f, 0x4b, 0xbd, 0x8b, 0x8a,\n  0x70, 0x3e, 0xb5, 0x66, 0x48, 0x03, 0xf6, 0x0e, 0x61, 0x35, 0x57, 0xb9, 0x86,\n  0xc1, 0x1d, 0x9e, 0xe1, 0xf8, 0x98, 0x11, 0x69, 0xd9, 0x8e, 0x94, 0x9b, 0x1e,\n  0x87, 0xe9, 0xce, 0x55, 0x28, 0xdf, 0x8c, 0xa1, 0x89, 0x0d, 0xbf, 0xe6, 0x42,\n  0x68, 0x41, 0x99, 0x2d, 0x0f, 0xb0, 0x54, 0xbb, 0x16,\n]\nconst Si = [\n  0x52, 0x09, 0x6a, 0xd5, 0x30, 0x36, 0xa5, 0x38, 0xbf, 0x40, 0xa3, 0x9e, 0x81,\n  0xf3, 0xd7, 0xfb, 0x7c, 0xe3, 0x39, 0x82, 0x9b, 0x2f, 0xff, 0x87, 0x34, 0x8e,\n  0x43, 0x44, 0xc4, 0xde, 0xe9, 0xcb, 0x54, 0x7b, 0x94, 0x32, 0xa6, 0xc2, 0x23,\n  0x3d, 0xee, 0x4c, 0x95, 0x0b, 0x42, 0xfa, 0xc3, 0x4e, 0x08, 0x2e, 0xa1, 0x66,\n  0x28, 0xd9, 0x24, 0xb2, 0x76, 0x5b, 0xa2, 0x49, 0x6d, 0x8b, 0xd1, 0x25, 0x72,\n  0xf8, 0xf6, 0x64, 0x86, 0x68, 0x98, 0x16, 0xd4, 0xa4, 0x5c, 0xcc, 0x5d, 0x65,\n  0xb6, 0x92, 0x6c, 0x70, 0x48, 0x50, 0xfd, 0xed, 0xb9, 0xda, 0x5e, 0x15, 0x46,\n  0x57, 0xa7, 0x8d, 0x9d, 0x84, 0x90, 0xd8, 0xab, 0x00, 0x8c, 0xbc, 0xd3, 0x0a,\n  0xf7, 0xe4, 0x58, 0x05, 0xb8, 0xb3, 0x45, 0x06, 0xd0, 0x2c, 0x1e, 0x8f, 0xca,\n  0x3f, 0x0f, 0x02, 0xc1, 0xaf, 0xbd, 0x03, 0x01, 0x13, 0x8a, 0x6b, 0x3a, 0x91,\n  0x11, 0x41, 0x4f, 0x67, 0xdc, 0xea, 0x97, 0xf2, 0xcf, 0xce, 0xf0, 0xb4, 0xe6,\n  0x73, 0x96, 0xac, 0x74, 0x22, 0xe7, 0xad, 0x35, 0x85, 0xe2, 0xf9, 0x37, 0xe8,\n  0x1c, 0x75, 0xdf, 0x6e, 0x47, 0xf1, 0x1a, 0x71, 0x1d, 0x29, 0xc5, 0x89, 0x6f,\n  0xb7, 0x62, 0x0e, 0xaa, 0x18, 0xbe, 0x1b, 0xfc, 0x56, 0x3e, 0x4b, 0xc6, 0xd2,\n  0x79, 0x20, 0x9a, 0xdb, 0xc0, 0xfe, 0x78, 0xcd, 0x5a, 0xf4, 0x1f, 0xdd, 0xa8,\n  0x33, 0x88, 0x07, 0xc7, 0x31, 0xb1, 0x12, 0x10, 0x59, 0x27, 0x80, 0xec, 0x5f,\n  0x60, 0x51, 0x7f, 0xa9, 0x19, 0xb5, 0x4a, 0x0d, 0x2d, 0xe5, 0x7a, 0x9f, 0x93,\n  0xc9, 0x9c, 0xef, 0xa0, 0xe0, 0x3b, 0x4d, 0xae, 0x2a, 0xf5, 0xb0, 0xc8, 0xeb,\n  0xbb, 0x3c, 0x83, 0x53, 0x99, 0x61, 0x17, 0x2b, 0x04, 0x7e, 0xba, 0x77, 0xd6,\n  0x26, 0xe1, 0x69, 0x14, 0x63, 0x55, 0x21, 0x0c, 0x7d,\n]\n\n// Transformations for encryption\nconst T1 = [\n  0xc66363a5, 0xf87c7c84, 0xee777799, 0xf67b7b8d, 0xfff2f20d, 0xd66b6bbd,\n  0xde6f6fb1, 0x91c5c554, 0x60303050, 0x02010103, 0xce6767a9, 0x562b2b7d,\n  0xe7fefe19, 0xb5d7d762, 0x4dababe6, 0xec76769a, 0x8fcaca45, 0x1f82829d,\n  0x89c9c940, 0xfa7d7d87, 0xeffafa15, 0xb25959eb, 0x8e4747c9, 0xfbf0f00b,\n  0x41adadec, 0xb3d4d467, 0x5fa2a2fd, 0x45afafea, 0x239c9cbf, 0x53a4a4f7,\n  0xe4727296, 0x9bc0c05b, 0x75b7b7c2, 0xe1fdfd1c, 0x3d9393ae, 0x4c26266a,\n  0x6c36365a, 0x7e3f3f41, 0xf5f7f702, 0x83cccc4f, 0x6834345c, 0x51a5a5f4,\n  0xd1e5e534, 0xf9f1f108, 0xe2717193, 0xabd8d873, 0x62313153, 0x2a15153f,\n  0x0804040c, 0x95c7c752, 0x46232365, 0x9dc3c35e, 0x30181828, 0x379696a1,\n  0x0a05050f, 0x2f9a9ab5, 0x0e070709, 0x24121236, 0x1b80809b, 0xdfe2e23d,\n  0xcdebeb26, 0x4e272769, 0x7fb2b2cd, 0xea75759f, 0x1209091b, 0x1d83839e,\n  0x582c2c74, 0x341a1a2e, 0x361b1b2d, 0xdc6e6eb2, 0xb45a5aee, 0x5ba0a0fb,\n  0xa45252f6, 0x763b3b4d, 0xb7d6d661, 0x7db3b3ce, 0x5229297b, 0xdde3e33e,\n  0x5e2f2f71, 0x13848497, 0xa65353f5, 0xb9d1d168, 0x00000000, 0xc1eded2c,\n  0x40202060, 0xe3fcfc1f, 0x79b1b1c8, 0xb65b5bed, 0xd46a6abe, 0x8dcbcb46,\n  0x67bebed9, 0x7239394b, 0x944a4ade, 0x984c4cd4, 0xb05858e8, 0x85cfcf4a,\n  0xbbd0d06b, 0xc5efef2a, 0x4faaaae5, 0xedfbfb16, 0x864343c5, 0x9a4d4dd7,\n  0x66333355, 0x11858594, 0x8a4545cf, 0xe9f9f910, 0x04020206, 0xfe7f7f81,\n  0xa05050f0, 0x783c3c44, 0x259f9fba, 0x4ba8a8e3, 0xa25151f3, 0x5da3a3fe,\n  0x804040c0, 0x058f8f8a, 0x3f9292ad, 0x219d9dbc, 0x70383848, 0xf1f5f504,\n  0x63bcbcdf, 0x77b6b6c1, 0xafdada75, 0x42212163, 0x20101030, 0xe5ffff1a,\n  0xfdf3f30e, 0xbfd2d26d, 0x81cdcd4c, 0x180c0c14, 0x26131335, 0xc3ecec2f,\n  0xbe5f5fe1, 0x359797a2, 0x884444cc, 0x2e171739, 0x93c4c457, 0x55a7a7f2,\n  0xfc7e7e82, 0x7a3d3d47, 0xc86464ac, 0xba5d5de7, 0x3219192b, 0xe6737395,\n  0xc06060a0, 0x19818198, 0x9e4f4fd1, 0xa3dcdc7f, 0x44222266, 0x542a2a7e,\n  0x3b9090ab, 0x0b888883, 0x8c4646ca, 0xc7eeee29, 0x6bb8b8d3, 0x2814143c,\n  0xa7dede79, 0xbc5e5ee2, 0x160b0b1d, 0xaddbdb76, 0xdbe0e03b, 0x64323256,\n  0x743a3a4e, 0x140a0a1e, 0x924949db, 0x0c06060a, 0x4824246c, 0xb85c5ce4,\n  0x9fc2c25d, 0xbdd3d36e, 0x43acacef, 0xc46262a6, 0x399191a8, 0x319595a4,\n  0xd3e4e437, 0xf279798b, 0xd5e7e732, 0x8bc8c843, 0x6e373759, 0xda6d6db7,\n  0x018d8d8c, 0xb1d5d564, 0x9c4e4ed2, 0x49a9a9e0, 0xd86c6cb4, 0xac5656fa,\n  0xf3f4f407, 0xcfeaea25, 0xca6565af, 0xf47a7a8e, 0x47aeaee9, 0x10080818,\n  0x6fbabad5, 0xf0787888, 0x4a25256f, 0x5c2e2e72, 0x381c1c24, 0x57a6a6f1,\n  0x73b4b4c7, 0x97c6c651, 0xcbe8e823, 0xa1dddd7c, 0xe874749c, 0x3e1f1f21,\n  0x964b4bdd, 0x61bdbddc, 0x0d8b8b86, 0x0f8a8a85, 0xe0707090, 0x7c3e3e42,\n  0x71b5b5c4, 0xcc6666aa, 0x904848d8, 0x06030305, 0xf7f6f601, 0x1c0e0e12,\n  0xc26161a3, 0x6a35355f, 0xae5757f9, 0x69b9b9d0, 0x17868691, 0x99c1c158,\n  0x3a1d1d27, 0x279e9eb9, 0xd9e1e138, 0xebf8f813, 0x2b9898b3, 0x22111133,\n  0xd26969bb, 0xa9d9d970, 0x078e8e89, 0x339494a7, 0x2d9b9bb6, 0x3c1e1e22,\n  0x15878792, 0xc9e9e920, 0x87cece49, 0xaa5555ff, 0x50282878, 0xa5dfdf7a,\n  0x038c8c8f, 0x59a1a1f8, 0x09898980, 0x1a0d0d17, 0x65bfbfda, 0xd7e6e631,\n  0x844242c6, 0xd06868b8, 0x824141c3, 0x299999b0, 0x5a2d2d77, 0x1e0f0f11,\n  0x7bb0b0cb, 0xa85454fc, 0x6dbbbbd6, 0x2c16163a,\n]\nconst T2 = [\n  0xa5c66363, 0x84f87c7c, 0x99ee7777, 0x8df67b7b, 0x0dfff2f2, 0xbdd66b6b,\n  0xb1de6f6f, 0x5491c5c5, 0x50603030, 0x03020101, 0xa9ce6767, 0x7d562b2b,\n  0x19e7fefe, 0x62b5d7d7, 0xe64dabab, 0x9aec7676, 0x458fcaca, 0x9d1f8282,\n  0x4089c9c9, 0x87fa7d7d, 0x15effafa, 0xebb25959, 0xc98e4747, 0x0bfbf0f0,\n  0xec41adad, 0x67b3d4d4, 0xfd5fa2a2, 0xea45afaf, 0xbf239c9c, 0xf753a4a4,\n  0x96e47272, 0x5b9bc0c0, 0xc275b7b7, 0x1ce1fdfd, 0xae3d9393, 0x6a4c2626,\n  0x5a6c3636, 0x417e3f3f, 0x02f5f7f7, 0x4f83cccc, 0x5c683434, 0xf451a5a5,\n  0x34d1e5e5, 0x08f9f1f1, 0x93e27171, 0x73abd8d8, 0x53623131, 0x3f2a1515,\n  0x0c080404, 0x5295c7c7, 0x65462323, 0x5e9dc3c3, 0x28301818, 0xa1379696,\n  0x0f0a0505, 0xb52f9a9a, 0x090e0707, 0x36241212, 0x9b1b8080, 0x3ddfe2e2,\n  0x26cdebeb, 0x694e2727, 0xcd7fb2b2, 0x9fea7575, 0x1b120909, 0x9e1d8383,\n  0x74582c2c, 0x2e341a1a, 0x2d361b1b, 0xb2dc6e6e, 0xeeb45a5a, 0xfb5ba0a0,\n  0xf6a45252, 0x4d763b3b, 0x61b7d6d6, 0xce7db3b3, 0x7b522929, 0x3edde3e3,\n  0x715e2f2f, 0x97138484, 0xf5a65353, 0x68b9d1d1, 0x00000000, 0x2cc1eded,\n  0x60402020, 0x1fe3fcfc, 0xc879b1b1, 0xedb65b5b, 0xbed46a6a, 0x468dcbcb,\n  0xd967bebe, 0x4b723939, 0xde944a4a, 0xd4984c4c, 0xe8b05858, 0x4a85cfcf,\n  0x6bbbd0d0, 0x2ac5efef, 0xe54faaaa, 0x16edfbfb, 0xc5864343, 0xd79a4d4d,\n  0x55663333, 0x94118585, 0xcf8a4545, 0x10e9f9f9, 0x06040202, 0x81fe7f7f,\n  0xf0a05050, 0x44783c3c, 0xba259f9f, 0xe34ba8a8, 0xf3a25151, 0xfe5da3a3,\n  0xc0804040, 0x8a058f8f, 0xad3f9292, 0xbc219d9d, 0x48703838, 0x04f1f5f5,\n  0xdf63bcbc, 0xc177b6b6, 0x75afdada, 0x63422121, 0x30201010, 0x1ae5ffff,\n  0x0efdf3f3, 0x6dbfd2d2, 0x4c81cdcd, 0x14180c0c, 0x35261313, 0x2fc3ecec,\n  0xe1be5f5f, 0xa2359797, 0xcc884444, 0x392e1717, 0x5793c4c4, 0xf255a7a7,\n  0x82fc7e7e, 0x477a3d3d, 0xacc86464, 0xe7ba5d5d, 0x2b321919, 0x95e67373,\n  0xa0c06060, 0x98198181, 0xd19e4f4f, 0x7fa3dcdc, 0x66442222, 0x7e542a2a,\n  0xab3b9090, 0x830b8888, 0xca8c4646, 0x29c7eeee, 0xd36bb8b8, 0x3c281414,\n  0x79a7dede, 0xe2bc5e5e, 0x1d160b0b, 0x76addbdb, 0x3bdbe0e0, 0x56643232,\n  0x4e743a3a, 0x1e140a0a, 0xdb924949, 0x0a0c0606, 0x6c482424, 0xe4b85c5c,\n  0x5d9fc2c2, 0x6ebdd3d3, 0xef43acac, 0xa6c46262, 0xa8399191, 0xa4319595,\n  0x37d3e4e4, 0x8bf27979, 0x32d5e7e7, 0x438bc8c8, 0x596e3737, 0xb7da6d6d,\n  0x8c018d8d, 0x64b1d5d5, 0xd29c4e4e, 0xe049a9a9, 0xb4d86c6c, 0xfaac5656,\n  0x07f3f4f4, 0x25cfeaea, 0xafca6565, 0x8ef47a7a, 0xe947aeae, 0x18100808,\n  0xd56fbaba, 0x88f07878, 0x6f4a2525, 0x725c2e2e, 0x24381c1c, 0xf157a6a6,\n  0xc773b4b4, 0x5197c6c6, 0x23cbe8e8, 0x7ca1dddd, 0x9ce87474, 0x213e1f1f,\n  0xdd964b4b, 0xdc61bdbd, 0x860d8b8b, 0x850f8a8a, 0x90e07070, 0x427c3e3e,\n  0xc471b5b5, 0xaacc6666, 0xd8904848, 0x05060303, 0x01f7f6f6, 0x121c0e0e,\n  0xa3c26161, 0x5f6a3535, 0xf9ae5757, 0xd069b9b9, 0x91178686, 0x5899c1c1,\n  0x273a1d1d, 0xb9279e9e, 0x38d9e1e1, 0x13ebf8f8, 0xb32b9898, 0x33221111,\n  0xbbd26969, 0x70a9d9d9, 0x89078e8e, 0xa7339494, 0xb62d9b9b, 0x223c1e1e,\n  0x92158787, 0x20c9e9e9, 0x4987cece, 0xffaa5555, 0x78502828, 0x7aa5dfdf,\n  0x8f038c8c, 0xf859a1a1, 0x80098989, 0x171a0d0d, 0xda65bfbf, 0x31d7e6e6,\n  0xc6844242, 0xb8d06868, 0xc3824141, 0xb0299999, 0x775a2d2d, 0x111e0f0f,\n  0xcb7bb0b0, 0xfca85454, 0xd66dbbbb, 0x3a2c1616,\n]\nconst T3 = [\n  0x63a5c663, 0x7c84f87c, 0x7799ee77, 0x7b8df67b, 0xf20dfff2, 0x6bbdd66b,\n  0x6fb1de6f, 0xc55491c5, 0x30506030, 0x01030201, 0x67a9ce67, 0x2b7d562b,\n  0xfe19e7fe, 0xd762b5d7, 0xabe64dab, 0x769aec76, 0xca458fca, 0x829d1f82,\n  0xc94089c9, 0x7d87fa7d, 0xfa15effa, 0x59ebb259, 0x47c98e47, 0xf00bfbf0,\n  0xadec41ad, 0xd467b3d4, 0xa2fd5fa2, 0xafea45af, 0x9cbf239c, 0xa4f753a4,\n  0x7296e472, 0xc05b9bc0, 0xb7c275b7, 0xfd1ce1fd, 0x93ae3d93, 0x266a4c26,\n  0x365a6c36, 0x3f417e3f, 0xf702f5f7, 0xcc4f83cc, 0x345c6834, 0xa5f451a5,\n  0xe534d1e5, 0xf108f9f1, 0x7193e271, 0xd873abd8, 0x31536231, 0x153f2a15,\n  0x040c0804, 0xc75295c7, 0x23654623, 0xc35e9dc3, 0x18283018, 0x96a13796,\n  0x050f0a05, 0x9ab52f9a, 0x07090e07, 0x12362412, 0x809b1b80, 0xe23ddfe2,\n  0xeb26cdeb, 0x27694e27, 0xb2cd7fb2, 0x759fea75, 0x091b1209, 0x839e1d83,\n  0x2c74582c, 0x1a2e341a, 0x1b2d361b, 0x6eb2dc6e, 0x5aeeb45a, 0xa0fb5ba0,\n  0x52f6a452, 0x3b4d763b, 0xd661b7d6, 0xb3ce7db3, 0x297b5229, 0xe33edde3,\n  0x2f715e2f, 0x84971384, 0x53f5a653, 0xd168b9d1, 0x00000000, 0xed2cc1ed,\n  0x20604020, 0xfc1fe3fc, 0xb1c879b1, 0x5bedb65b, 0x6abed46a, 0xcb468dcb,\n  0xbed967be, 0x394b7239, 0x4ade944a, 0x4cd4984c, 0x58e8b058, 0xcf4a85cf,\n  0xd06bbbd0, 0xef2ac5ef, 0xaae54faa, 0xfb16edfb, 0x43c58643, 0x4dd79a4d,\n  0x33556633, 0x85941185, 0x45cf8a45, 0xf910e9f9, 0x02060402, 0x7f81fe7f,\n  0x50f0a050, 0x3c44783c, 0x9fba259f, 0xa8e34ba8, 0x51f3a251, 0xa3fe5da3,\n  0x40c08040, 0x8f8a058f, 0x92ad3f92, 0x9dbc219d, 0x38487038, 0xf504f1f5,\n  0xbcdf63bc, 0xb6c177b6, 0xda75afda, 0x21634221, 0x10302010, 0xff1ae5ff,\n  0xf30efdf3, 0xd26dbfd2, 0xcd4c81cd, 0x0c14180c, 0x13352613, 0xec2fc3ec,\n  0x5fe1be5f, 0x97a23597, 0x44cc8844, 0x17392e17, 0xc45793c4, 0xa7f255a7,\n  0x7e82fc7e, 0x3d477a3d, 0x64acc864, 0x5de7ba5d, 0x192b3219, 0x7395e673,\n  0x60a0c060, 0x81981981, 0x4fd19e4f, 0xdc7fa3dc, 0x22664422, 0x2a7e542a,\n  0x90ab3b90, 0x88830b88, 0x46ca8c46, 0xee29c7ee, 0xb8d36bb8, 0x143c2814,\n  0xde79a7de, 0x5ee2bc5e, 0x0b1d160b, 0xdb76addb, 0xe03bdbe0, 0x32566432,\n  0x3a4e743a, 0x0a1e140a, 0x49db9249, 0x060a0c06, 0x246c4824, 0x5ce4b85c,\n  0xc25d9fc2, 0xd36ebdd3, 0xacef43ac, 0x62a6c462, 0x91a83991, 0x95a43195,\n  0xe437d3e4, 0x798bf279, 0xe732d5e7, 0xc8438bc8, 0x37596e37, 0x6db7da6d,\n  0x8d8c018d, 0xd564b1d5, 0x4ed29c4e, 0xa9e049a9, 0x6cb4d86c, 0x56faac56,\n  0xf407f3f4, 0xea25cfea, 0x65afca65, 0x7a8ef47a, 0xaee947ae, 0x08181008,\n  0xbad56fba, 0x7888f078, 0x256f4a25, 0x2e725c2e, 0x1c24381c, 0xa6f157a6,\n  0xb4c773b4, 0xc65197c6, 0xe823cbe8, 0xdd7ca1dd, 0x749ce874, 0x1f213e1f,\n  0x4bdd964b, 0xbddc61bd, 0x8b860d8b, 0x8a850f8a, 0x7090e070, 0x3e427c3e,\n  0xb5c471b5, 0x66aacc66, 0x48d89048, 0x03050603, 0xf601f7f6, 0x0e121c0e,\n  0x61a3c261, 0x355f6a35, 0x57f9ae57, 0xb9d069b9, 0x86911786, 0xc15899c1,\n  0x1d273a1d, 0x9eb9279e, 0xe138d9e1, 0xf813ebf8, 0x98b32b98, 0x11332211,\n  0x69bbd269, 0xd970a9d9, 0x8e89078e, 0x94a73394, 0x9bb62d9b, 0x1e223c1e,\n  0x87921587, 0xe920c9e9, 0xce4987ce, 0x55ffaa55, 0x28785028, 0xdf7aa5df,\n  0x8c8f038c, 0xa1f859a1, 0x89800989, 0x0d171a0d, 0xbfda65bf, 0xe631d7e6,\n  0x42c68442, 0x68b8d068, 0x41c38241, 0x99b02999, 0x2d775a2d, 0x0f111e0f,\n  0xb0cb7bb0, 0x54fca854, 0xbbd66dbb, 0x163a2c16,\n]\nconst T4 = [\n  0x6363a5c6, 0x7c7c84f8, 0x777799ee, 0x7b7b8df6, 0xf2f20dff, 0x6b6bbdd6,\n  0x6f6fb1de, 0xc5c55491, 0x30305060, 0x01010302, 0x6767a9ce, 0x2b2b7d56,\n  0xfefe19e7, 0xd7d762b5, 0xababe64d, 0x76769aec, 0xcaca458f, 0x82829d1f,\n  0xc9c94089, 0x7d7d87fa, 0xfafa15ef, 0x5959ebb2, 0x4747c98e, 0xf0f00bfb,\n  0xadadec41, 0xd4d467b3, 0xa2a2fd5f, 0xafafea45, 0x9c9cbf23, 0xa4a4f753,\n  0x727296e4, 0xc0c05b9b, 0xb7b7c275, 0xfdfd1ce1, 0x9393ae3d, 0x26266a4c,\n  0x36365a6c, 0x3f3f417e, 0xf7f702f5, 0xcccc4f83, 0x34345c68, 0xa5a5f451,\n  0xe5e534d1, 0xf1f108f9, 0x717193e2, 0xd8d873ab, 0x31315362, 0x15153f2a,\n  0x04040c08, 0xc7c75295, 0x23236546, 0xc3c35e9d, 0x18182830, 0x9696a137,\n  0x05050f0a, 0x9a9ab52f, 0x0707090e, 0x12123624, 0x80809b1b, 0xe2e23ddf,\n  0xebeb26cd, 0x2727694e, 0xb2b2cd7f, 0x75759fea, 0x09091b12, 0x83839e1d,\n  0x2c2c7458, 0x1a1a2e34, 0x1b1b2d36, 0x6e6eb2dc, 0x5a5aeeb4, 0xa0a0fb5b,\n  0x5252f6a4, 0x3b3b4d76, 0xd6d661b7, 0xb3b3ce7d, 0x29297b52, 0xe3e33edd,\n  0x2f2f715e, 0x84849713, 0x5353f5a6, 0xd1d168b9, 0x00000000, 0xeded2cc1,\n  0x20206040, 0xfcfc1fe3, 0xb1b1c879, 0x5b5bedb6, 0x6a6abed4, 0xcbcb468d,\n  0xbebed967, 0x39394b72, 0x4a4ade94, 0x4c4cd498, 0x5858e8b0, 0xcfcf4a85,\n  0xd0d06bbb, 0xefef2ac5, 0xaaaae54f, 0xfbfb16ed, 0x4343c586, 0x4d4dd79a,\n  0x33335566, 0x85859411, 0x4545cf8a, 0xf9f910e9, 0x02020604, 0x7f7f81fe,\n  0x5050f0a0, 0x3c3c4478, 0x9f9fba25, 0xa8a8e34b, 0x5151f3a2, 0xa3a3fe5d,\n  0x4040c080, 0x8f8f8a05, 0x9292ad3f, 0x9d9dbc21, 0x38384870, 0xf5f504f1,\n  0xbcbcdf63, 0xb6b6c177, 0xdada75af, 0x21216342, 0x10103020, 0xffff1ae5,\n  0xf3f30efd, 0xd2d26dbf, 0xcdcd4c81, 0x0c0c1418, 0x13133526, 0xecec2fc3,\n  0x5f5fe1be, 0x9797a235, 0x4444cc88, 0x1717392e, 0xc4c45793, 0xa7a7f255,\n  0x7e7e82fc, 0x3d3d477a, 0x6464acc8, 0x5d5de7ba, 0x19192b32, 0x737395e6,\n  0x6060a0c0, 0x81819819, 0x4f4fd19e, 0xdcdc7fa3, 0x22226644, 0x2a2a7e54,\n  0x9090ab3b, 0x8888830b, 0x4646ca8c, 0xeeee29c7, 0xb8b8d36b, 0x14143c28,\n  0xdede79a7, 0x5e5ee2bc, 0x0b0b1d16, 0xdbdb76ad, 0xe0e03bdb, 0x32325664,\n  0x3a3a4e74, 0x0a0a1e14, 0x4949db92, 0x06060a0c, 0x24246c48, 0x5c5ce4b8,\n  0xc2c25d9f, 0xd3d36ebd, 0xacacef43, 0x6262a6c4, 0x9191a839, 0x9595a431,\n  0xe4e437d3, 0x79798bf2, 0xe7e732d5, 0xc8c8438b, 0x3737596e, 0x6d6db7da,\n  0x8d8d8c01, 0xd5d564b1, 0x4e4ed29c, 0xa9a9e049, 0x6c6cb4d8, 0x5656faac,\n  0xf4f407f3, 0xeaea25cf, 0x6565afca, 0x7a7a8ef4, 0xaeaee947, 0x08081810,\n  0xbabad56f, 0x787888f0, 0x25256f4a, 0x2e2e725c, 0x1c1c2438, 0xa6a6f157,\n  0xb4b4c773, 0xc6c65197, 0xe8e823cb, 0xdddd7ca1, 0x74749ce8, 0x1f1f213e,\n  0x4b4bdd96, 0xbdbddc61, 0x8b8b860d, 0x8a8a850f, 0x707090e0, 0x3e3e427c,\n  0xb5b5c471, 0x6666aacc, 0x4848d890, 0x03030506, 0xf6f601f7, 0x0e0e121c,\n  0x6161a3c2, 0x35355f6a, 0x5757f9ae, 0xb9b9d069, 0x86869117, 0xc1c15899,\n  0x1d1d273a, 0x9e9eb927, 0xe1e138d9, 0xf8f813eb, 0x9898b32b, 0x11113322,\n  0x6969bbd2, 0xd9d970a9, 0x8e8e8907, 0x9494a733, 0x9b9bb62d, 0x1e1e223c,\n  0x87879215, 0xe9e920c9, 0xcece4987, 0x5555ffaa, 0x28287850, 0xdfdf7aa5,\n  0x8c8c8f03, 0xa1a1f859, 0x89898009, 0x0d0d171a, 0xbfbfda65, 0xe6e631d7,\n  0x4242c684, 0x6868b8d0, 0x4141c382, 0x9999b029, 0x2d2d775a, 0x0f0f111e,\n  0xb0b0cb7b, 0x5454fca8, 0xbbbbd66d, 0x16163a2c,\n]\n\n// Transformations for decryption\nconst T5 = [\n  0x51f4a750, 0x7e416553, 0x1a17a4c3, 0x3a275e96, 0x3bab6bcb, 0x1f9d45f1,\n  0xacfa58ab, 0x4be30393, 0x2030fa55, 0xad766df6, 0x88cc7691, 0xf5024c25,\n  0x4fe5d7fc, 0xc52acbd7, 0x26354480, 0xb562a38f, 0xdeb15a49, 0x25ba1b67,\n  0x45ea0e98, 0x5dfec0e1, 0xc32f7502, 0x814cf012, 0x8d4697a3, 0x6bd3f9c6,\n  0x038f5fe7, 0x15929c95, 0xbf6d7aeb, 0x955259da, 0xd4be832d, 0x587421d3,\n  0x49e06929, 0x8ec9c844, 0x75c2896a, 0xf48e7978, 0x99583e6b, 0x27b971dd,\n  0xbee14fb6, 0xf088ad17, 0xc920ac66, 0x7dce3ab4, 0x63df4a18, 0xe51a3182,\n  0x97513360, 0x62537f45, 0xb16477e0, 0xbb6bae84, 0xfe81a01c, 0xf9082b94,\n  0x70486858, 0x8f45fd19, 0x94de6c87, 0x527bf8b7, 0xab73d323, 0x724b02e2,\n  0xe31f8f57, 0x6655ab2a, 0xb2eb2807, 0x2fb5c203, 0x86c57b9a, 0xd33708a5,\n  0x302887f2, 0x23bfa5b2, 0x02036aba, 0xed16825c, 0x8acf1c2b, 0xa779b492,\n  0xf307f2f0, 0x4e69e2a1, 0x65daf4cd, 0x0605bed5, 0xd134621f, 0xc4a6fe8a,\n  0x342e539d, 0xa2f355a0, 0x058ae132, 0xa4f6eb75, 0x0b83ec39, 0x4060efaa,\n  0x5e719f06, 0xbd6e1051, 0x3e218af9, 0x96dd063d, 0xdd3e05ae, 0x4de6bd46,\n  0x91548db5, 0x71c45d05, 0x0406d46f, 0x605015ff, 0x1998fb24, 0xd6bde997,\n  0x894043cc, 0x67d99e77, 0xb0e842bd, 0x07898b88, 0xe7195b38, 0x79c8eedb,\n  0xa17c0a47, 0x7c420fe9, 0xf8841ec9, 0x00000000, 0x09808683, 0x322bed48,\n  0x1e1170ac, 0x6c5a724e, 0xfd0efffb, 0x0f853856, 0x3daed51e, 0x362d3927,\n  0x0a0fd964, 0x685ca621, 0x9b5b54d1, 0x24362e3a, 0x0c0a67b1, 0x9357e70f,\n  0xb4ee96d2, 0x1b9b919e, 0x80c0c54f, 0x61dc20a2, 0x5a774b69, 0x1c121a16,\n  0xe293ba0a, 0xc0a02ae5, 0x3c22e043, 0x121b171d, 0x0e090d0b, 0xf28bc7ad,\n  0x2db6a8b9, 0x141ea9c8, 0x57f11985, 0xaf75074c, 0xee99ddbb, 0xa37f60fd,\n  0xf701269f, 0x5c72f5bc, 0x44663bc5, 0x5bfb7e34, 0x8b432976, 0xcb23c6dc,\n  0xb6edfc68, 0xb8e4f163, 0xd731dcca, 0x42638510, 0x13972240, 0x84c61120,\n  0x854a247d, 0xd2bb3df8, 0xaef93211, 0xc729a16d, 0x1d9e2f4b, 0xdcb230f3,\n  0x0d8652ec, 0x77c1e3d0, 0x2bb3166c, 0xa970b999, 0x119448fa, 0x47e96422,\n  0xa8fc8cc4, 0xa0f03f1a, 0x567d2cd8, 0x223390ef, 0x87494ec7, 0xd938d1c1,\n  0x8ccaa2fe, 0x98d40b36, 0xa6f581cf, 0xa57ade28, 0xdab78e26, 0x3fadbfa4,\n  0x2c3a9de4, 0x5078920d, 0x6a5fcc9b, 0x547e4662, 0xf68d13c2, 0x90d8b8e8,\n  0x2e39f75e, 0x82c3aff5, 0x9f5d80be, 0x69d0937c, 0x6fd52da9, 0xcf2512b3,\n  0xc8ac993b, 0x10187da7, 0xe89c636e, 0xdb3bbb7b, 0xcd267809, 0x6e5918f4,\n  0xec9ab701, 0x834f9aa8, 0xe6956e65, 0xaaffe67e, 0x21bccf08, 0xef15e8e6,\n  0xbae79bd9, 0x4a6f36ce, 0xea9f09d4, 0x29b07cd6, 0x31a4b2af, 0x2a3f2331,\n  0xc6a59430, 0x35a266c0, 0x744ebc37, 0xfc82caa6, 0xe090d0b0, 0x33a7d815,\n  0xf104984a, 0x41ecdaf7, 0x7fcd500e, 0x1791f62f, 0x764dd68d, 0x43efb04d,\n  0xccaa4d54, 0xe49604df, 0x9ed1b5e3, 0x4c6a881b, 0xc12c1fb8, 0x4665517f,\n  0x9d5eea04, 0x018c355d, 0xfa877473, 0xfb0b412e, 0xb3671d5a, 0x92dbd252,\n  0xe9105633, 0x6dd64713, 0x9ad7618c, 0x37a10c7a, 0x59f8148e, 0xeb133c89,\n  0xcea927ee, 0xb761c935, 0xe11ce5ed, 0x7a47b13c, 0x9cd2df59, 0x55f2733f,\n  0x1814ce79, 0x73c737bf, 0x53f7cdea, 0x5ffdaa5b, 0xdf3d6f14, 0x7844db86,\n  0xcaaff381, 0xb968c43e, 0x3824342c, 0xc2a3405f, 0x161dc372, 0xbce2250c,\n  0x283c498b, 0xff0d9541, 0x39a80171, 0x080cb3de, 0xd8b4e49c, 0x6456c190,\n  0x7bcb8461, 0xd532b670, 0x486c5c74, 0xd0b85742,\n]\nconst T6 = [\n  0x5051f4a7, 0x537e4165, 0xc31a17a4, 0x963a275e, 0xcb3bab6b, 0xf11f9d45,\n  0xabacfa58, 0x934be303, 0x552030fa, 0xf6ad766d, 0x9188cc76, 0x25f5024c,\n  0xfc4fe5d7, 0xd7c52acb, 0x80263544, 0x8fb562a3, 0x49deb15a, 0x6725ba1b,\n  0x9845ea0e, 0xe15dfec0, 0x02c32f75, 0x12814cf0, 0xa38d4697, 0xc66bd3f9,\n  0xe7038f5f, 0x9515929c, 0xebbf6d7a, 0xda955259, 0x2dd4be83, 0xd3587421,\n  0x2949e069, 0x448ec9c8, 0x6a75c289, 0x78f48e79, 0x6b99583e, 0xdd27b971,\n  0xb6bee14f, 0x17f088ad, 0x66c920ac, 0xb47dce3a, 0x1863df4a, 0x82e51a31,\n  0x60975133, 0x4562537f, 0xe0b16477, 0x84bb6bae, 0x1cfe81a0, 0x94f9082b,\n  0x58704868, 0x198f45fd, 0x8794de6c, 0xb7527bf8, 0x23ab73d3, 0xe2724b02,\n  0x57e31f8f, 0x2a6655ab, 0x07b2eb28, 0x032fb5c2, 0x9a86c57b, 0xa5d33708,\n  0xf2302887, 0xb223bfa5, 0xba02036a, 0x5ced1682, 0x2b8acf1c, 0x92a779b4,\n  0xf0f307f2, 0xa14e69e2, 0xcd65daf4, 0xd50605be, 0x1fd13462, 0x8ac4a6fe,\n  0x9d342e53, 0xa0a2f355, 0x32058ae1, 0x75a4f6eb, 0x390b83ec, 0xaa4060ef,\n  0x065e719f, 0x51bd6e10, 0xf93e218a, 0x3d96dd06, 0xaedd3e05, 0x464de6bd,\n  0xb591548d, 0x0571c45d, 0x6f0406d4, 0xff605015, 0x241998fb, 0x97d6bde9,\n  0xcc894043, 0x7767d99e, 0xbdb0e842, 0x8807898b, 0x38e7195b, 0xdb79c8ee,\n  0x47a17c0a, 0xe97c420f, 0xc9f8841e, 0x00000000, 0x83098086, 0x48322bed,\n  0xac1e1170, 0x4e6c5a72, 0xfbfd0eff, 0x560f8538, 0x1e3daed5, 0x27362d39,\n  0x640a0fd9, 0x21685ca6, 0xd19b5b54, 0x3a24362e, 0xb10c0a67, 0x0f9357e7,\n  0xd2b4ee96, 0x9e1b9b91, 0x4f80c0c5, 0xa261dc20, 0x695a774b, 0x161c121a,\n  0x0ae293ba, 0xe5c0a02a, 0x433c22e0, 0x1d121b17, 0x0b0e090d, 0xadf28bc7,\n  0xb92db6a8, 0xc8141ea9, 0x8557f119, 0x4caf7507, 0xbbee99dd, 0xfda37f60,\n  0x9ff70126, 0xbc5c72f5, 0xc544663b, 0x345bfb7e, 0x768b4329, 0xdccb23c6,\n  0x68b6edfc, 0x63b8e4f1, 0xcad731dc, 0x10426385, 0x40139722, 0x2084c611,\n  0x7d854a24, 0xf8d2bb3d, 0x11aef932, 0x6dc729a1, 0x4b1d9e2f, 0xf3dcb230,\n  0xec0d8652, 0xd077c1e3, 0x6c2bb316, 0x99a970b9, 0xfa119448, 0x2247e964,\n  0xc4a8fc8c, 0x1aa0f03f, 0xd8567d2c, 0xef223390, 0xc787494e, 0xc1d938d1,\n  0xfe8ccaa2, 0x3698d40b, 0xcfa6f581, 0x28a57ade, 0x26dab78e, 0xa43fadbf,\n  0xe42c3a9d, 0x0d507892, 0x9b6a5fcc, 0x62547e46, 0xc2f68d13, 0xe890d8b8,\n  0x5e2e39f7, 0xf582c3af, 0xbe9f5d80, 0x7c69d093, 0xa96fd52d, 0xb3cf2512,\n  0x3bc8ac99, 0xa710187d, 0x6ee89c63, 0x7bdb3bbb, 0x09cd2678, 0xf46e5918,\n  0x01ec9ab7, 0xa8834f9a, 0x65e6956e, 0x7eaaffe6, 0x0821bccf, 0xe6ef15e8,\n  0xd9bae79b, 0xce4a6f36, 0xd4ea9f09, 0xd629b07c, 0xaf31a4b2, 0x312a3f23,\n  0x30c6a594, 0xc035a266, 0x37744ebc, 0xa6fc82ca, 0xb0e090d0, 0x1533a7d8,\n  0x4af10498, 0xf741ecda, 0x0e7fcd50, 0x2f1791f6, 0x8d764dd6, 0x4d43efb0,\n  0x54ccaa4d, 0xdfe49604, 0xe39ed1b5, 0x1b4c6a88, 0xb8c12c1f, 0x7f466551,\n  0x049d5eea, 0x5d018c35, 0x73fa8774, 0x2efb0b41, 0x5ab3671d, 0x5292dbd2,\n  0x33e91056, 0x136dd647, 0x8c9ad761, 0x7a37a10c, 0x8e59f814, 0x89eb133c,\n  0xeecea927, 0x35b761c9, 0xede11ce5, 0x3c7a47b1, 0x599cd2df, 0x3f55f273,\n  0x791814ce, 0xbf73c737, 0xea53f7cd, 0x5b5ffdaa, 0x14df3d6f, 0x867844db,\n  0x81caaff3, 0x3eb968c4, 0x2c382434, 0x5fc2a340, 0x72161dc3, 0x0cbce225,\n  0x8b283c49, 0x41ff0d95, 0x7139a801, 0xde080cb3, 0x9cd8b4e4, 0x906456c1,\n  0x617bcb84, 0x70d532b6, 0x74486c5c, 0x42d0b857,\n]\nconst T7 = [\n  0xa75051f4, 0x65537e41, 0xa4c31a17, 0x5e963a27, 0x6bcb3bab, 0x45f11f9d,\n  0x58abacfa, 0x03934be3, 0xfa552030, 0x6df6ad76, 0x769188cc, 0x4c25f502,\n  0xd7fc4fe5, 0xcbd7c52a, 0x44802635, 0xa38fb562, 0x5a49deb1, 0x1b6725ba,\n  0x0e9845ea, 0xc0e15dfe, 0x7502c32f, 0xf012814c, 0x97a38d46, 0xf9c66bd3,\n  0x5fe7038f, 0x9c951592, 0x7aebbf6d, 0x59da9552, 0x832dd4be, 0x21d35874,\n  0x692949e0, 0xc8448ec9, 0x896a75c2, 0x7978f48e, 0x3e6b9958, 0x71dd27b9,\n  0x4fb6bee1, 0xad17f088, 0xac66c920, 0x3ab47dce, 0x4a1863df, 0x3182e51a,\n  0x33609751, 0x7f456253, 0x77e0b164, 0xae84bb6b, 0xa01cfe81, 0x2b94f908,\n  0x68587048, 0xfd198f45, 0x6c8794de, 0xf8b7527b, 0xd323ab73, 0x02e2724b,\n  0x8f57e31f, 0xab2a6655, 0x2807b2eb, 0xc2032fb5, 0x7b9a86c5, 0x08a5d337,\n  0x87f23028, 0xa5b223bf, 0x6aba0203, 0x825ced16, 0x1c2b8acf, 0xb492a779,\n  0xf2f0f307, 0xe2a14e69, 0xf4cd65da, 0xbed50605, 0x621fd134, 0xfe8ac4a6,\n  0x539d342e, 0x55a0a2f3, 0xe132058a, 0xeb75a4f6, 0xec390b83, 0xefaa4060,\n  0x9f065e71, 0x1051bd6e, 0x8af93e21, 0x063d96dd, 0x05aedd3e, 0xbd464de6,\n  0x8db59154, 0x5d0571c4, 0xd46f0406, 0x15ff6050, 0xfb241998, 0xe997d6bd,\n  0x43cc8940, 0x9e7767d9, 0x42bdb0e8, 0x8b880789, 0x5b38e719, 0xeedb79c8,\n  0x0a47a17c, 0x0fe97c42, 0x1ec9f884, 0x00000000, 0x86830980, 0xed48322b,\n  0x70ac1e11, 0x724e6c5a, 0xfffbfd0e, 0x38560f85, 0xd51e3dae, 0x3927362d,\n  0xd9640a0f, 0xa621685c, 0x54d19b5b, 0x2e3a2436, 0x67b10c0a, 0xe70f9357,\n  0x96d2b4ee, 0x919e1b9b, 0xc54f80c0, 0x20a261dc, 0x4b695a77, 0x1a161c12,\n  0xba0ae293, 0x2ae5c0a0, 0xe0433c22, 0x171d121b, 0x0d0b0e09, 0xc7adf28b,\n  0xa8b92db6, 0xa9c8141e, 0x198557f1, 0x074caf75, 0xddbbee99, 0x60fda37f,\n  0x269ff701, 0xf5bc5c72, 0x3bc54466, 0x7e345bfb, 0x29768b43, 0xc6dccb23,\n  0xfc68b6ed, 0xf163b8e4, 0xdccad731, 0x85104263, 0x22401397, 0x112084c6,\n  0x247d854a, 0x3df8d2bb, 0x3211aef9, 0xa16dc729, 0x2f4b1d9e, 0x30f3dcb2,\n  0x52ec0d86, 0xe3d077c1, 0x166c2bb3, 0xb999a970, 0x48fa1194, 0x642247e9,\n  0x8cc4a8fc, 0x3f1aa0f0, 0x2cd8567d, 0x90ef2233, 0x4ec78749, 0xd1c1d938,\n  0xa2fe8cca, 0x0b3698d4, 0x81cfa6f5, 0xde28a57a, 0x8e26dab7, 0xbfa43fad,\n  0x9de42c3a, 0x920d5078, 0xcc9b6a5f, 0x4662547e, 0x13c2f68d, 0xb8e890d8,\n  0xf75e2e39, 0xaff582c3, 0x80be9f5d, 0x937c69d0, 0x2da96fd5, 0x12b3cf25,\n  0x993bc8ac, 0x7da71018, 0x636ee89c, 0xbb7bdb3b, 0x7809cd26, 0x18f46e59,\n  0xb701ec9a, 0x9aa8834f, 0x6e65e695, 0xe67eaaff, 0xcf0821bc, 0xe8e6ef15,\n  0x9bd9bae7, 0x36ce4a6f, 0x09d4ea9f, 0x7cd629b0, 0xb2af31a4, 0x23312a3f,\n  0x9430c6a5, 0x66c035a2, 0xbc37744e, 0xcaa6fc82, 0xd0b0e090, 0xd81533a7,\n  0x984af104, 0xdaf741ec, 0x500e7fcd, 0xf62f1791, 0xd68d764d, 0xb04d43ef,\n  0x4d54ccaa, 0x04dfe496, 0xb5e39ed1, 0x881b4c6a, 0x1fb8c12c, 0x517f4665,\n  0xea049d5e, 0x355d018c, 0x7473fa87, 0x412efb0b, 0x1d5ab367, 0xd25292db,\n  0x5633e910, 0x47136dd6, 0x618c9ad7, 0x0c7a37a1, 0x148e59f8, 0x3c89eb13,\n  0x27eecea9, 0xc935b761, 0xe5ede11c, 0xb13c7a47, 0xdf599cd2, 0x733f55f2,\n  0xce791814, 0x37bf73c7, 0xcdea53f7, 0xaa5b5ffd, 0x6f14df3d, 0xdb867844,\n  0xf381caaf, 0xc43eb968, 0x342c3824, 0x405fc2a3, 0xc372161d, 0x250cbce2,\n  0x498b283c, 0x9541ff0d, 0x017139a8, 0xb3de080c, 0xe49cd8b4, 0xc1906456,\n  0x84617bcb, 0xb670d532, 0x5c74486c, 0x5742d0b8,\n]\nconst T8 = [\n  0xf4a75051, 0x4165537e, 0x17a4c31a, 0x275e963a, 0xab6bcb3b, 0x9d45f11f,\n  0xfa58abac, 0xe303934b, 0x30fa5520, 0x766df6ad, 0xcc769188, 0x024c25f5,\n  0xe5d7fc4f, 0x2acbd7c5, 0x35448026, 0x62a38fb5, 0xb15a49de, 0xba1b6725,\n  0xea0e9845, 0xfec0e15d, 0x2f7502c3, 0x4cf01281, 0x4697a38d, 0xd3f9c66b,\n  0x8f5fe703, 0x929c9515, 0x6d7aebbf, 0x5259da95, 0xbe832dd4, 0x7421d358,\n  0xe0692949, 0xc9c8448e, 0xc2896a75, 0x8e7978f4, 0x583e6b99, 0xb971dd27,\n  0xe14fb6be, 0x88ad17f0, 0x20ac66c9, 0xce3ab47d, 0xdf4a1863, 0x1a3182e5,\n  0x51336097, 0x537f4562, 0x6477e0b1, 0x6bae84bb, 0x81a01cfe, 0x082b94f9,\n  0x48685870, 0x45fd198f, 0xde6c8794, 0x7bf8b752, 0x73d323ab, 0x4b02e272,\n  0x1f8f57e3, 0x55ab2a66, 0xeb2807b2, 0xb5c2032f, 0xc57b9a86, 0x3708a5d3,\n  0x2887f230, 0xbfa5b223, 0x036aba02, 0x16825ced, 0xcf1c2b8a, 0x79b492a7,\n  0x07f2f0f3, 0x69e2a14e, 0xdaf4cd65, 0x05bed506, 0x34621fd1, 0xa6fe8ac4,\n  0x2e539d34, 0xf355a0a2, 0x8ae13205, 0xf6eb75a4, 0x83ec390b, 0x60efaa40,\n  0x719f065e, 0x6e1051bd, 0x218af93e, 0xdd063d96, 0x3e05aedd, 0xe6bd464d,\n  0x548db591, 0xc45d0571, 0x06d46f04, 0x5015ff60, 0x98fb2419, 0xbde997d6,\n  0x4043cc89, 0xd99e7767, 0xe842bdb0, 0x898b8807, 0x195b38e7, 0xc8eedb79,\n  0x7c0a47a1, 0x420fe97c, 0x841ec9f8, 0x00000000, 0x80868309, 0x2bed4832,\n  0x1170ac1e, 0x5a724e6c, 0x0efffbfd, 0x8538560f, 0xaed51e3d, 0x2d392736,\n  0x0fd9640a, 0x5ca62168, 0x5b54d19b, 0x362e3a24, 0x0a67b10c, 0x57e70f93,\n  0xee96d2b4, 0x9b919e1b, 0xc0c54f80, 0xdc20a261, 0x774b695a, 0x121a161c,\n  0x93ba0ae2, 0xa02ae5c0, 0x22e0433c, 0x1b171d12, 0x090d0b0e, 0x8bc7adf2,\n  0xb6a8b92d, 0x1ea9c814, 0xf1198557, 0x75074caf, 0x99ddbbee, 0x7f60fda3,\n  0x01269ff7, 0x72f5bc5c, 0x663bc544, 0xfb7e345b, 0x4329768b, 0x23c6dccb,\n  0xedfc68b6, 0xe4f163b8, 0x31dccad7, 0x63851042, 0x97224013, 0xc6112084,\n  0x4a247d85, 0xbb3df8d2, 0xf93211ae, 0x29a16dc7, 0x9e2f4b1d, 0xb230f3dc,\n  0x8652ec0d, 0xc1e3d077, 0xb3166c2b, 0x70b999a9, 0x9448fa11, 0xe9642247,\n  0xfc8cc4a8, 0xf03f1aa0, 0x7d2cd856, 0x3390ef22, 0x494ec787, 0x38d1c1d9,\n  0xcaa2fe8c, 0xd40b3698, 0xf581cfa6, 0x7ade28a5, 0xb78e26da, 0xadbfa43f,\n  0x3a9de42c, 0x78920d50, 0x5fcc9b6a, 0x7e466254, 0x8d13c2f6, 0xd8b8e890,\n  0x39f75e2e, 0xc3aff582, 0x5d80be9f, 0xd0937c69, 0xd52da96f, 0x2512b3cf,\n  0xac993bc8, 0x187da710, 0x9c636ee8, 0x3bbb7bdb, 0x267809cd, 0x5918f46e,\n  0x9ab701ec, 0x4f9aa883, 0x956e65e6, 0xffe67eaa, 0xbccf0821, 0x15e8e6ef,\n  0xe79bd9ba, 0x6f36ce4a, 0x9f09d4ea, 0xb07cd629, 0xa4b2af31, 0x3f23312a,\n  0xa59430c6, 0xa266c035, 0x4ebc3774, 0x82caa6fc, 0x90d0b0e0, 0xa7d81533,\n  0x04984af1, 0xecdaf741, 0xcd500e7f, 0x91f62f17, 0x4dd68d76, 0xefb04d43,\n  0xaa4d54cc, 0x9604dfe4, 0xd1b5e39e, 0x6a881b4c, 0x2c1fb8c1, 0x65517f46,\n  0x5eea049d, 0x8c355d01, 0x877473fa, 0x0b412efb, 0x671d5ab3, 0xdbd25292,\n  0x105633e9, 0xd647136d, 0xd7618c9a, 0xa10c7a37, 0xf8148e59, 0x133c89eb,\n  0xa927eece, 0x61c935b7, 0x1ce5ede1, 0x47b13c7a, 0xd2df599c, 0xf2733f55,\n  0x14ce7918, 0xc737bf73, 0xf7cdea53, 0xfdaa5b5f, 0x3d6f14df, 0x44db8678,\n  0xaff381ca, 0x68c43eb9, 0x24342c38, 0xa3405fc2, 0x1dc37216, 0xe2250cbc,\n  0x3c498b28, 0x0d9541ff, 0xa8017139, 0x0cb3de08, 0xb4e49cd8, 0x56c19064,\n  0xcb84617b, 0x32b670d5, 0x6c5c7448, 0xb85742d0,\n]\n\n// Transformations for decryption key expansion\nconst U1 = [\n  0x00000000, 0x0e090d0b, 0x1c121a16, 0x121b171d, 0x3824342c, 0x362d3927,\n  0x24362e3a, 0x2a3f2331, 0x70486858, 0x7e416553, 0x6c5a724e, 0x62537f45,\n  0x486c5c74, 0x4665517f, 0x547e4662, 0x5a774b69, 0xe090d0b0, 0xee99ddbb,\n  0xfc82caa6, 0xf28bc7ad, 0xd8b4e49c, 0xd6bde997, 0xc4a6fe8a, 0xcaaff381,\n  0x90d8b8e8, 0x9ed1b5e3, 0x8ccaa2fe, 0x82c3aff5, 0xa8fc8cc4, 0xa6f581cf,\n  0xb4ee96d2, 0xbae79bd9, 0xdb3bbb7b, 0xd532b670, 0xc729a16d, 0xc920ac66,\n  0xe31f8f57, 0xed16825c, 0xff0d9541, 0xf104984a, 0xab73d323, 0xa57ade28,\n  0xb761c935, 0xb968c43e, 0x9357e70f, 0x9d5eea04, 0x8f45fd19, 0x814cf012,\n  0x3bab6bcb, 0x35a266c0, 0x27b971dd, 0x29b07cd6, 0x038f5fe7, 0x0d8652ec,\n  0x1f9d45f1, 0x119448fa, 0x4be30393, 0x45ea0e98, 0x57f11985, 0x59f8148e,\n  0x73c737bf, 0x7dce3ab4, 0x6fd52da9, 0x61dc20a2, 0xad766df6, 0xa37f60fd,\n  0xb16477e0, 0xbf6d7aeb, 0x955259da, 0x9b5b54d1, 0x894043cc, 0x87494ec7,\n  0xdd3e05ae, 0xd33708a5, 0xc12c1fb8, 0xcf2512b3, 0xe51a3182, 0xeb133c89,\n  0xf9082b94, 0xf701269f, 0x4de6bd46, 0x43efb04d, 0x51f4a750, 0x5ffdaa5b,\n  0x75c2896a, 0x7bcb8461, 0x69d0937c, 0x67d99e77, 0x3daed51e, 0x33a7d815,\n  0x21bccf08, 0x2fb5c203, 0x058ae132, 0x0b83ec39, 0x1998fb24, 0x1791f62f,\n  0x764dd68d, 0x7844db86, 0x6a5fcc9b, 0x6456c190, 0x4e69e2a1, 0x4060efaa,\n  0x527bf8b7, 0x5c72f5bc, 0x0605bed5, 0x080cb3de, 0x1a17a4c3, 0x141ea9c8,\n  0x3e218af9, 0x302887f2, 0x223390ef, 0x2c3a9de4, 0x96dd063d, 0x98d40b36,\n  0x8acf1c2b, 0x84c61120, 0xaef93211, 0xa0f03f1a, 0xb2eb2807, 0xbce2250c,\n  0xe6956e65, 0xe89c636e, 0xfa877473, 0xf48e7978, 0xdeb15a49, 0xd0b85742,\n  0xc2a3405f, 0xccaa4d54, 0x41ecdaf7, 0x4fe5d7fc, 0x5dfec0e1, 0x53f7cdea,\n  0x79c8eedb, 0x77c1e3d0, 0x65daf4cd, 0x6bd3f9c6, 0x31a4b2af, 0x3fadbfa4,\n  0x2db6a8b9, 0x23bfa5b2, 0x09808683, 0x07898b88, 0x15929c95, 0x1b9b919e,\n  0xa17c0a47, 0xaf75074c, 0xbd6e1051, 0xb3671d5a, 0x99583e6b, 0x97513360,\n  0x854a247d, 0x8b432976, 0xd134621f, 0xdf3d6f14, 0xcd267809, 0xc32f7502,\n  0xe9105633, 0xe7195b38, 0xf5024c25, 0xfb0b412e, 0x9ad7618c, 0x94de6c87,\n  0x86c57b9a, 0x88cc7691, 0xa2f355a0, 0xacfa58ab, 0xbee14fb6, 0xb0e842bd,\n  0xea9f09d4, 0xe49604df, 0xf68d13c2, 0xf8841ec9, 0xd2bb3df8, 0xdcb230f3,\n  0xcea927ee, 0xc0a02ae5, 0x7a47b13c, 0x744ebc37, 0x6655ab2a, 0x685ca621,\n  0x42638510, 0x4c6a881b, 0x5e719f06, 0x5078920d, 0x0a0fd964, 0x0406d46f,\n  0x161dc372, 0x1814ce79, 0x322bed48, 0x3c22e043, 0x2e39f75e, 0x2030fa55,\n  0xec9ab701, 0xe293ba0a, 0xf088ad17, 0xfe81a01c, 0xd4be832d, 0xdab78e26,\n  0xc8ac993b, 0xc6a59430, 0x9cd2df59, 0x92dbd252, 0x80c0c54f, 0x8ec9c844,\n  0xa4f6eb75, 0xaaffe67e, 0xb8e4f163, 0xb6edfc68, 0x0c0a67b1, 0x02036aba,\n  0x10187da7, 0x1e1170ac, 0x342e539d, 0x3a275e96, 0x283c498b, 0x26354480,\n  0x7c420fe9, 0x724b02e2, 0x605015ff, 0x6e5918f4, 0x44663bc5, 0x4a6f36ce,\n  0x587421d3, 0x567d2cd8, 0x37a10c7a, 0x39a80171, 0x2bb3166c, 0x25ba1b67,\n  0x0f853856, 0x018c355d, 0x13972240, 0x1d9e2f4b, 0x47e96422, 0x49e06929,\n  0x5bfb7e34, 0x55f2733f, 0x7fcd500e, 0x71c45d05, 0x63df4a18, 0x6dd64713,\n  0xd731dcca, 0xd938d1c1, 0xcb23c6dc, 0xc52acbd7, 0xef15e8e6, 0xe11ce5ed,\n  0xf307f2f0, 0xfd0efffb, 0xa779b492, 0xa970b999, 0xbb6bae84, 0xb562a38f,\n  0x9f5d80be, 0x91548db5, 0x834f9aa8, 0x8d4697a3,\n]\nconst U2 = [\n  0x00000000, 0x0b0e090d, 0x161c121a, 0x1d121b17, 0x2c382434, 0x27362d39,\n  0x3a24362e, 0x312a3f23, 0x58704868, 0x537e4165, 0x4e6c5a72, 0x4562537f,\n  0x74486c5c, 0x7f466551, 0x62547e46, 0x695a774b, 0xb0e090d0, 0xbbee99dd,\n  0xa6fc82ca, 0xadf28bc7, 0x9cd8b4e4, 0x97d6bde9, 0x8ac4a6fe, 0x81caaff3,\n  0xe890d8b8, 0xe39ed1b5, 0xfe8ccaa2, 0xf582c3af, 0xc4a8fc8c, 0xcfa6f581,\n  0xd2b4ee96, 0xd9bae79b, 0x7bdb3bbb, 0x70d532b6, 0x6dc729a1, 0x66c920ac,\n  0x57e31f8f, 0x5ced1682, 0x41ff0d95, 0x4af10498, 0x23ab73d3, 0x28a57ade,\n  0x35b761c9, 0x3eb968c4, 0x0f9357e7, 0x049d5eea, 0x198f45fd, 0x12814cf0,\n  0xcb3bab6b, 0xc035a266, 0xdd27b971, 0xd629b07c, 0xe7038f5f, 0xec0d8652,\n  0xf11f9d45, 0xfa119448, 0x934be303, 0x9845ea0e, 0x8557f119, 0x8e59f814,\n  0xbf73c737, 0xb47dce3a, 0xa96fd52d, 0xa261dc20, 0xf6ad766d, 0xfda37f60,\n  0xe0b16477, 0xebbf6d7a, 0xda955259, 0xd19b5b54, 0xcc894043, 0xc787494e,\n  0xaedd3e05, 0xa5d33708, 0xb8c12c1f, 0xb3cf2512, 0x82e51a31, 0x89eb133c,\n  0x94f9082b, 0x9ff70126, 0x464de6bd, 0x4d43efb0, 0x5051f4a7, 0x5b5ffdaa,\n  0x6a75c289, 0x617bcb84, 0x7c69d093, 0x7767d99e, 0x1e3daed5, 0x1533a7d8,\n  0x0821bccf, 0x032fb5c2, 0x32058ae1, 0x390b83ec, 0x241998fb, 0x2f1791f6,\n  0x8d764dd6, 0x867844db, 0x9b6a5fcc, 0x906456c1, 0xa14e69e2, 0xaa4060ef,\n  0xb7527bf8, 0xbc5c72f5, 0xd50605be, 0xde080cb3, 0xc31a17a4, 0xc8141ea9,\n  0xf93e218a, 0xf2302887, 0xef223390, 0xe42c3a9d, 0x3d96dd06, 0x3698d40b,\n  0x2b8acf1c, 0x2084c611, 0x11aef932, 0x1aa0f03f, 0x07b2eb28, 0x0cbce225,\n  0x65e6956e, 0x6ee89c63, 0x73fa8774, 0x78f48e79, 0x49deb15a, 0x42d0b857,\n  0x5fc2a340, 0x54ccaa4d, 0xf741ecda, 0xfc4fe5d7, 0xe15dfec0, 0xea53f7cd,\n  0xdb79c8ee, 0xd077c1e3, 0xcd65daf4, 0xc66bd3f9, 0xaf31a4b2, 0xa43fadbf,\n  0xb92db6a8, 0xb223bfa5, 0x83098086, 0x8807898b, 0x9515929c, 0x9e1b9b91,\n  0x47a17c0a, 0x4caf7507, 0x51bd6e10, 0x5ab3671d, 0x6b99583e, 0x60975133,\n  0x7d854a24, 0x768b4329, 0x1fd13462, 0x14df3d6f, 0x09cd2678, 0x02c32f75,\n  0x33e91056, 0x38e7195b, 0x25f5024c, 0x2efb0b41, 0x8c9ad761, 0x8794de6c,\n  0x9a86c57b, 0x9188cc76, 0xa0a2f355, 0xabacfa58, 0xb6bee14f, 0xbdb0e842,\n  0xd4ea9f09, 0xdfe49604, 0xc2f68d13, 0xc9f8841e, 0xf8d2bb3d, 0xf3dcb230,\n  0xeecea927, 0xe5c0a02a, 0x3c7a47b1, 0x37744ebc, 0x2a6655ab, 0x21685ca6,\n  0x10426385, 0x1b4c6a88, 0x065e719f, 0x0d507892, 0x640a0fd9, 0x6f0406d4,\n  0x72161dc3, 0x791814ce, 0x48322bed, 0x433c22e0, 0x5e2e39f7, 0x552030fa,\n  0x01ec9ab7, 0x0ae293ba, 0x17f088ad, 0x1cfe81a0, 0x2dd4be83, 0x26dab78e,\n  0x3bc8ac99, 0x30c6a594, 0x599cd2df, 0x5292dbd2, 0x4f80c0c5, 0x448ec9c8,\n  0x75a4f6eb, 0x7eaaffe6, 0x63b8e4f1, 0x68b6edfc, 0xb10c0a67, 0xba02036a,\n  0xa710187d, 0xac1e1170, 0x9d342e53, 0x963a275e, 0x8b283c49, 0x80263544,\n  0xe97c420f, 0xe2724b02, 0xff605015, 0xf46e5918, 0xc544663b, 0xce4a6f36,\n  0xd3587421, 0xd8567d2c, 0x7a37a10c, 0x7139a801, 0x6c2bb316, 0x6725ba1b,\n  0x560f8538, 0x5d018c35, 0x40139722, 0x4b1d9e2f, 0x2247e964, 0x2949e069,\n  0x345bfb7e, 0x3f55f273, 0x0e7fcd50, 0x0571c45d, 0x1863df4a, 0x136dd647,\n  0xcad731dc, 0xc1d938d1, 0xdccb23c6, 0xd7c52acb, 0xe6ef15e8, 0xede11ce5,\n  0xf0f307f2, 0xfbfd0eff, 0x92a779b4, 0x99a970b9, 0x84bb6bae, 0x8fb562a3,\n  0xbe9f5d80, 0xb591548d, 0xa8834f9a, 0xa38d4697,\n]\nconst U3 = [\n  0x00000000, 0x0d0b0e09, 0x1a161c12, 0x171d121b, 0x342c3824, 0x3927362d,\n  0x2e3a2436, 0x23312a3f, 0x68587048, 0x65537e41, 0x724e6c5a, 0x7f456253,\n  0x5c74486c, 0x517f4665, 0x4662547e, 0x4b695a77, 0xd0b0e090, 0xddbbee99,\n  0xcaa6fc82, 0xc7adf28b, 0xe49cd8b4, 0xe997d6bd, 0xfe8ac4a6, 0xf381caaf,\n  0xb8e890d8, 0xb5e39ed1, 0xa2fe8cca, 0xaff582c3, 0x8cc4a8fc, 0x81cfa6f5,\n  0x96d2b4ee, 0x9bd9bae7, 0xbb7bdb3b, 0xb670d532, 0xa16dc729, 0xac66c920,\n  0x8f57e31f, 0x825ced16, 0x9541ff0d, 0x984af104, 0xd323ab73, 0xde28a57a,\n  0xc935b761, 0xc43eb968, 0xe70f9357, 0xea049d5e, 0xfd198f45, 0xf012814c,\n  0x6bcb3bab, 0x66c035a2, 0x71dd27b9, 0x7cd629b0, 0x5fe7038f, 0x52ec0d86,\n  0x45f11f9d, 0x48fa1194, 0x03934be3, 0x0e9845ea, 0x198557f1, 0x148e59f8,\n  0x37bf73c7, 0x3ab47dce, 0x2da96fd5, 0x20a261dc, 0x6df6ad76, 0x60fda37f,\n  0x77e0b164, 0x7aebbf6d, 0x59da9552, 0x54d19b5b, 0x43cc8940, 0x4ec78749,\n  0x05aedd3e, 0x08a5d337, 0x1fb8c12c, 0x12b3cf25, 0x3182e51a, 0x3c89eb13,\n  0x2b94f908, 0x269ff701, 0xbd464de6, 0xb04d43ef, 0xa75051f4, 0xaa5b5ffd,\n  0x896a75c2, 0x84617bcb, 0x937c69d0, 0x9e7767d9, 0xd51e3dae, 0xd81533a7,\n  0xcf0821bc, 0xc2032fb5, 0xe132058a, 0xec390b83, 0xfb241998, 0xf62f1791,\n  0xd68d764d, 0xdb867844, 0xcc9b6a5f, 0xc1906456, 0xe2a14e69, 0xefaa4060,\n  0xf8b7527b, 0xf5bc5c72, 0xbed50605, 0xb3de080c, 0xa4c31a17, 0xa9c8141e,\n  0x8af93e21, 0x87f23028, 0x90ef2233, 0x9de42c3a, 0x063d96dd, 0x0b3698d4,\n  0x1c2b8acf, 0x112084c6, 0x3211aef9, 0x3f1aa0f0, 0x2807b2eb, 0x250cbce2,\n  0x6e65e695, 0x636ee89c, 0x7473fa87, 0x7978f48e, 0x5a49deb1, 0x5742d0b8,\n  0x405fc2a3, 0x4d54ccaa, 0xdaf741ec, 0xd7fc4fe5, 0xc0e15dfe, 0xcdea53f7,\n  0xeedb79c8, 0xe3d077c1, 0xf4cd65da, 0xf9c66bd3, 0xb2af31a4, 0xbfa43fad,\n  0xa8b92db6, 0xa5b223bf, 0x86830980, 0x8b880789, 0x9c951592, 0x919e1b9b,\n  0x0a47a17c, 0x074caf75, 0x1051bd6e, 0x1d5ab367, 0x3e6b9958, 0x33609751,\n  0x247d854a, 0x29768b43, 0x621fd134, 0x6f14df3d, 0x7809cd26, 0x7502c32f,\n  0x5633e910, 0x5b38e719, 0x4c25f502, 0x412efb0b, 0x618c9ad7, 0x6c8794de,\n  0x7b9a86c5, 0x769188cc, 0x55a0a2f3, 0x58abacfa, 0x4fb6bee1, 0x42bdb0e8,\n  0x09d4ea9f, 0x04dfe496, 0x13c2f68d, 0x1ec9f884, 0x3df8d2bb, 0x30f3dcb2,\n  0x27eecea9, 0x2ae5c0a0, 0xb13c7a47, 0xbc37744e, 0xab2a6655, 0xa621685c,\n  0x85104263, 0x881b4c6a, 0x9f065e71, 0x920d5078, 0xd9640a0f, 0xd46f0406,\n  0xc372161d, 0xce791814, 0xed48322b, 0xe0433c22, 0xf75e2e39, 0xfa552030,\n  0xb701ec9a, 0xba0ae293, 0xad17f088, 0xa01cfe81, 0x832dd4be, 0x8e26dab7,\n  0x993bc8ac, 0x9430c6a5, 0xdf599cd2, 0xd25292db, 0xc54f80c0, 0xc8448ec9,\n  0xeb75a4f6, 0xe67eaaff, 0xf163b8e4, 0xfc68b6ed, 0x67b10c0a, 0x6aba0203,\n  0x7da71018, 0x70ac1e11, 0x539d342e, 0x5e963a27, 0x498b283c, 0x44802635,\n  0x0fe97c42, 0x02e2724b, 0x15ff6050, 0x18f46e59, 0x3bc54466, 0x36ce4a6f,\n  0x21d35874, 0x2cd8567d, 0x0c7a37a1, 0x017139a8, 0x166c2bb3, 0x1b6725ba,\n  0x38560f85, 0x355d018c, 0x22401397, 0x2f4b1d9e, 0x642247e9, 0x692949e0,\n  0x7e345bfb, 0x733f55f2, 0x500e7fcd, 0x5d0571c4, 0x4a1863df, 0x47136dd6,\n  0xdccad731, 0xd1c1d938, 0xc6dccb23, 0xcbd7c52a, 0xe8e6ef15, 0xe5ede11c,\n  0xf2f0f307, 0xfffbfd0e, 0xb492a779, 0xb999a970, 0xae84bb6b, 0xa38fb562,\n  0x80be9f5d, 0x8db59154, 0x9aa8834f, 0x97a38d46,\n]\nconst U4 = [\n  0x00000000, 0x090d0b0e, 0x121a161c, 0x1b171d12, 0x24342c38, 0x2d392736,\n  0x362e3a24, 0x3f23312a, 0x48685870, 0x4165537e, 0x5a724e6c, 0x537f4562,\n  0x6c5c7448, 0x65517f46, 0x7e466254, 0x774b695a, 0x90d0b0e0, 0x99ddbbee,\n  0x82caa6fc, 0x8bc7adf2, 0xb4e49cd8, 0xbde997d6, 0xa6fe8ac4, 0xaff381ca,\n  0xd8b8e890, 0xd1b5e39e, 0xcaa2fe8c, 0xc3aff582, 0xfc8cc4a8, 0xf581cfa6,\n  0xee96d2b4, 0xe79bd9ba, 0x3bbb7bdb, 0x32b670d5, 0x29a16dc7, 0x20ac66c9,\n  0x1f8f57e3, 0x16825ced, 0x0d9541ff, 0x04984af1, 0x73d323ab, 0x7ade28a5,\n  0x61c935b7, 0x68c43eb9, 0x57e70f93, 0x5eea049d, 0x45fd198f, 0x4cf01281,\n  0xab6bcb3b, 0xa266c035, 0xb971dd27, 0xb07cd629, 0x8f5fe703, 0x8652ec0d,\n  0x9d45f11f, 0x9448fa11, 0xe303934b, 0xea0e9845, 0xf1198557, 0xf8148e59,\n  0xc737bf73, 0xce3ab47d, 0xd52da96f, 0xdc20a261, 0x766df6ad, 0x7f60fda3,\n  0x6477e0b1, 0x6d7aebbf, 0x5259da95, 0x5b54d19b, 0x4043cc89, 0x494ec787,\n  0x3e05aedd, 0x3708a5d3, 0x2c1fb8c1, 0x2512b3cf, 0x1a3182e5, 0x133c89eb,\n  0x082b94f9, 0x01269ff7, 0xe6bd464d, 0xefb04d43, 0xf4a75051, 0xfdaa5b5f,\n  0xc2896a75, 0xcb84617b, 0xd0937c69, 0xd99e7767, 0xaed51e3d, 0xa7d81533,\n  0xbccf0821, 0xb5c2032f, 0x8ae13205, 0x83ec390b, 0x98fb2419, 0x91f62f17,\n  0x4dd68d76, 0x44db8678, 0x5fcc9b6a, 0x56c19064, 0x69e2a14e, 0x60efaa40,\n  0x7bf8b752, 0x72f5bc5c, 0x05bed506, 0x0cb3de08, 0x17a4c31a, 0x1ea9c814,\n  0x218af93e, 0x2887f230, 0x3390ef22, 0x3a9de42c, 0xdd063d96, 0xd40b3698,\n  0xcf1c2b8a, 0xc6112084, 0xf93211ae, 0xf03f1aa0, 0xeb2807b2, 0xe2250cbc,\n  0x956e65e6, 0x9c636ee8, 0x877473fa, 0x8e7978f4, 0xb15a49de, 0xb85742d0,\n  0xa3405fc2, 0xaa4d54cc, 0xecdaf741, 0xe5d7fc4f, 0xfec0e15d, 0xf7cdea53,\n  0xc8eedb79, 0xc1e3d077, 0xdaf4cd65, 0xd3f9c66b, 0xa4b2af31, 0xadbfa43f,\n  0xb6a8b92d, 0xbfa5b223, 0x80868309, 0x898b8807, 0x929c9515, 0x9b919e1b,\n  0x7c0a47a1, 0x75074caf, 0x6e1051bd, 0x671d5ab3, 0x583e6b99, 0x51336097,\n  0x4a247d85, 0x4329768b, 0x34621fd1, 0x3d6f14df, 0x267809cd, 0x2f7502c3,\n  0x105633e9, 0x195b38e7, 0x024c25f5, 0x0b412efb, 0xd7618c9a, 0xde6c8794,\n  0xc57b9a86, 0xcc769188, 0xf355a0a2, 0xfa58abac, 0xe14fb6be, 0xe842bdb0,\n  0x9f09d4ea, 0x9604dfe4, 0x8d13c2f6, 0x841ec9f8, 0xbb3df8d2, 0xb230f3dc,\n  0xa927eece, 0xa02ae5c0, 0x47b13c7a, 0x4ebc3774, 0x55ab2a66, 0x5ca62168,\n  0x63851042, 0x6a881b4c, 0x719f065e, 0x78920d50, 0x0fd9640a, 0x06d46f04,\n  0x1dc37216, 0x14ce7918, 0x2bed4832, 0x22e0433c, 0x39f75e2e, 0x30fa5520,\n  0x9ab701ec, 0x93ba0ae2, 0x88ad17f0, 0x81a01cfe, 0xbe832dd4, 0xb78e26da,\n  0xac993bc8, 0xa59430c6, 0xd2df599c, 0xdbd25292, 0xc0c54f80, 0xc9c8448e,\n  0xf6eb75a4, 0xffe67eaa, 0xe4f163b8, 0xedfc68b6, 0x0a67b10c, 0x036aba02,\n  0x187da710, 0x1170ac1e, 0x2e539d34, 0x275e963a, 0x3c498b28, 0x35448026,\n  0x420fe97c, 0x4b02e272, 0x5015ff60, 0x5918f46e, 0x663bc544, 0x6f36ce4a,\n  0x7421d358, 0x7d2cd856, 0xa10c7a37, 0xa8017139, 0xb3166c2b, 0xba1b6725,\n  0x8538560f, 0x8c355d01, 0x97224013, 0x9e2f4b1d, 0xe9642247, 0xe0692949,\n  0xfb7e345b, 0xf2733f55, 0xcd500e7f, 0xc45d0571, 0xdf4a1863, 0xd647136d,\n  0x31dccad7, 0x38d1c1d9, 0x23c6dccb, 0x2acbd7c5, 0x15e8e6ef, 0x1ce5ede1,\n  0x07f2f0f3, 0x0efffbfd, 0x79b492a7, 0x70b999a9, 0x6bae84bb, 0x62a38fb5,\n  0x5d80be9f, 0x548db591, 0x4f9aa883, 0x4697a38d,\n]\n\nfunction checkInt(value: number | string) {\n  return parseInt(`${value}`) === value\n}\n\nfunction checkInts(arrayish: Uint8Array) {\n  if (!checkInt(arrayish.length)) {\n    return false\n  }\n\n  for (let i = 0; i < arrayish.length; i++) {\n    if (!checkInt(arrayish[i]) || arrayish[i] < 0 || arrayish[i] > 255) {\n      return false\n    }\n  }\n\n  return true\n}\n\nfunction createArray(length: number) {\n  return new Uint8Array(length)\n}\n\nfunction convertToInt32(bytes: Uint8Array) {\n  const result = []\n  for (let i = 0; i < bytes.length; i += 4) {\n    result.push(\n      (bytes[i] << 24) |\n        (bytes[i + 1] << 16) |\n        (bytes[i + 2] << 8) |\n        bytes[i + 3]\n    )\n  }\n  return result\n}\n\nfunction coerceArray(arg: Uint8Array, copy?: boolean): Uint8Array {\n  // ArrayBuffer view\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore copy from https://github.com/ricmoo/aes-js/blob/master/index.js#L24\n  if (arg.buffer && arg.name === 'Uint8Array') {\n    if (copy) {\n      if (arg.slice) {\n        arg = arg.slice()\n      } else {\n        arg = Array.prototype.slice.call(arg)\n      }\n    }\n\n    return arg\n  }\n\n  // It's an array; check it is a valid representation of a byte\n  if (Array.isArray(arg)) {\n    if (!checkInts(arg)) {\n      throw new Error(`Array contains invalid value`)\n    }\n\n    return new Uint8Array(arg)\n  }\n\n  // Something else, but behaves like an array (maybe a Buffer? Arguments?)\n  if (checkInt(arg.length) && checkInts(arg)) {\n    return new Uint8Array(arg)\n  }\n\n  throw new Error('unsupported array-like object')\n}\n\n// eslint-disable-next-line max-params\nfunction copyArray(\n  sourceArray: Uint8Array,\n  targetArray: Uint8Array,\n  targetStart: number,\n  sourceStart?: number,\n  sourceEnd?: number\n) {\n  if (sourceStart != null || sourceEnd != null) {\n    if (sourceArray.slice) {\n      sourceArray = sourceArray.slice(sourceStart, sourceEnd)\n    } else {\n      sourceArray = Array.prototype.slice.call(\n        sourceArray,\n        sourceStart,\n        sourceEnd\n      )\n    }\n  }\n  targetArray.set(sourceArray, targetStart)\n}\n\nclass AES {\n  private key: Uint8Array\n  private _Ke: number[][]\n  private _Kd: number[][]\n\n  constructor(key: Uint8Array) {\n    this.key = coerceArray(key, true)\n    this._prepare()\n  }\n\n  private _prepare() {\n    const rounds: number = numberOfRounds[this.key.length]\n    if (rounds == null) {\n      throw new Error('invalid key size (must be 16, 24 or 32 bytes)')\n    }\n\n    // encryption round keys\n    this._Ke = []\n\n    // decryption round keys\n    this._Kd = []\n\n    for (let i = 0; i <= rounds; i++) {\n      this._Ke.push([0, 0, 0, 0])\n      this._Kd.push([0, 0, 0, 0])\n    }\n\n    const roundKeyCount = (rounds + 1) * 4\n    const KC = this.key.length / 4\n\n    // convert the key into ints\n    const tk = convertToInt32(this.key)\n\n    // copy values into round key arrays\n    let index\n    for (let i = 0; i < KC; i++) {\n      index = i >> 2\n      this._Ke[index][i % 4] = tk[i]\n      this._Kd[rounds - index][i % 4] = tk[i]\n    }\n\n    // key expansion (fips-197 section 5.2)\n    let rconpointer = 0\n    let t = KC\n    let tt\n    while (t < roundKeyCount) {\n      tt = tk[KC - 1]\n      tk[0] ^=\n        (S[(tt >> 16) & 0xff] << 24) ^\n        (S[(tt >> 8) & 0xff] << 16) ^\n        (S[tt & 0xff] << 8) ^\n        S[(tt >> 24) & 0xff] ^\n        (rcon[rconpointer] << 24)\n      rconpointer += 1\n\n      // key expansion (for non-256 bit)\n      if (KC != 8) {\n        for (let i = 1; i < KC; i++) {\n          tk[i] ^= tk[i - 1]\n        }\n\n        // key expansion for 256-bit keys is \"slightly different\" (fips-197)\n      } else {\n        for (let i = 1; i < KC / 2; i++) {\n          tk[i] ^= tk[i - 1]\n        }\n        tt = tk[KC / 2 - 1]\n\n        tk[KC / 2] ^=\n          S[tt & 0xff] ^\n          (S[(tt >> 8) & 0xff] << 8) ^\n          (S[(tt >> 16) & 0xff] << 16) ^\n          (S[(tt >> 24) & 0xff] << 24)\n\n        for (let i = KC / 2 + 1; i < KC; i++) {\n          tk[i] ^= tk[i - 1]\n        }\n      }\n\n      // copy values into round key arrays\n      let i = 0,\n        r,\n        c\n      while (i < KC && t < roundKeyCount) {\n        r = t >> 2\n        c = t % 4\n        this._Ke[r][c] = tk[i]\n        this._Kd[rounds - r][c] = tk[i++]\n        t++\n      }\n    }\n\n    // inverse-cipher-ify the decryption round key (fips-197 section 5.3)\n    for (let r = 1; r < rounds; r++) {\n      for (let c = 0; c < 4; c++) {\n        tt = this._Kd[r][c]\n        this._Kd[r][c] =\n          U1[(tt >> 24) & 0xff] ^\n          U2[(tt >> 16) & 0xff] ^\n          U3[(tt >> 8) & 0xff] ^\n          U4[tt & 0xff]\n      }\n    }\n  }\n\n  public encrypt(plaintext: Uint8Array) {\n    if (plaintext.length != 16) {\n      throw new Error('invalid plaintext size (must be 16 bytes)')\n    }\n\n    const rounds = this._Ke.length - 1\n    const a = [0, 0, 0, 0]\n\n    // convert plaintext to (ints ^ key)\n    let t = convertToInt32(plaintext)\n    for (let i = 0; i < 4; i++) {\n      t[i] ^= this._Ke[0][i]\n    }\n\n    // apply round transforms\n    for (let r = 1; r < rounds; r++) {\n      for (let i = 0; i < 4; i++) {\n        a[i] =\n          T1[(t[i] >> 24) & 0xff] ^\n          T2[(t[(i + 1) % 4] >> 16) & 0xff] ^\n          T3[(t[(i + 2) % 4] >> 8) & 0xff] ^\n          T4[t[(i + 3) % 4] & 0xff] ^\n          this._Ke[r][i]\n      }\n      t = a.slice()\n    }\n\n    // the last round is special\n    const result = createArray(16)\n    let tt\n    for (let i = 0; i < 4; i++) {\n      tt = this._Ke[rounds][i]\n      result[4 * i] = (S[(t[i] >> 24) & 0xff] ^ (tt >> 24)) & 0xff\n      result[4 * i + 1] = (S[(t[(i + 1) % 4] >> 16) & 0xff] ^ (tt >> 16)) & 0xff\n      result[4 * i + 2] = (S[(t[(i + 2) % 4] >> 8) & 0xff] ^ (tt >> 8)) & 0xff\n      result[4 * i + 3] = (S[t[(i + 3) % 4] & 0xff] ^ tt) & 0xff\n    }\n\n    return result\n  }\n\n  public decrypt(ciphertext: Uint8Array) {\n    if (ciphertext.length != 16) {\n      throw new Error('invalid ciphertext size (must be 16 bytes)')\n    }\n\n    const rounds = this._Kd.length - 1\n    const a = [0, 0, 0, 0]\n\n    // convert plaintext to (ints ^ key)\n    let t = convertToInt32(ciphertext)\n    for (let i = 0; i < 4; i++) {\n      t[i] ^= this._Kd[0][i]\n    }\n\n    // apply round transforms\n    for (let r = 1; r < rounds; r++) {\n      for (let i = 0; i < 4; i++) {\n        a[i] =\n          T5[(t[i] >> 24) & 0xff] ^\n          T6[(t[(i + 3) % 4] >> 16) & 0xff] ^\n          T7[(t[(i + 2) % 4] >> 8) & 0xff] ^\n          T8[t[(i + 1) % 4] & 0xff] ^\n          this._Kd[r][i]\n      }\n      t = a.slice()\n    }\n\n    // the last round is special\n    const result = createArray(16)\n    let tt\n    for (let i = 0; i < 4; i++) {\n      tt = this._Kd[rounds][i]\n      result[4 * i] = (Si[(t[i] >> 24) & 0xff] ^ (tt >> 24)) & 0xff\n      result[4 * i + 1] =\n        (Si[(t[(i + 3) % 4] >> 16) & 0xff] ^ (tt >> 16)) & 0xff\n      result[4 * i + 2] = (Si[(t[(i + 2) % 4] >> 8) & 0xff] ^ (tt >> 8)) & 0xff\n      result[4 * i + 3] = (Si[t[(i + 1) % 4] & 0xff] ^ tt) & 0xff\n    }\n\n    return result\n  }\n}\n\nexport class ModeOfOperationCBC {\n  private _aes: AES\n  private _lastCipherblock: Uint8Array\n\n  constructor(key: Uint8Array, iv: Uint8Array) {\n    if (!iv) {\n      iv = new Uint8Array(16)\n    } else if (iv.length != 16) {\n      throw new Error('invalid initialation vector size (must be 16 bytes)')\n    }\n\n    this._lastCipherblock = coerceArray(iv, true)\n    this._aes = new AES(key)\n  }\n\n  public encrypt(plaintext: Uint8Array) {\n    plaintext = coerceArray(plaintext)\n\n    if (plaintext.length % 16 !== 0) {\n      throw new Error('invalid plaintext size (must be multiple of 16 bytes)')\n    }\n\n    const ciphertext = createArray(plaintext.length)\n    const block = createArray(16)\n\n    for (let i = 0; i < plaintext.length; i += 16) {\n      copyArray(plaintext, block, 0, i, i + 16)\n\n      for (let j = 0; j < 16; j++) {\n        block[j] ^= this._lastCipherblock[j]\n      }\n\n      this._lastCipherblock = this._aes.encrypt(block)\n      copyArray(this._lastCipherblock, ciphertext, i)\n    }\n\n    return ciphertext\n  }\n\n  public decrypt(ciphertext: Uint8Array) {\n    ciphertext = coerceArray(ciphertext)\n\n    if (ciphertext.length % 16 !== 0) {\n      throw new Error('invalid ciphertext size (must be multiple of 16 bytes)')\n    }\n\n    const plaintext = createArray(ciphertext.length)\n    let block = createArray(16)\n\n    for (let i = 0; i < ciphertext.length; i += 16) {\n      copyArray(ciphertext, block, 0, i, i + 16)\n      block = this._aes.decrypt(block)\n\n      for (let j = 0; j < 16; j++) {\n        plaintext[i + j] = block[j] ^ this._lastCipherblock[j]\n      }\n\n      copyArray(ciphertext, this._lastCipherblock, 0, i, i + 16)\n    }\n\n    return plaintext\n  }\n}\n", "/*\n * pkcs7\n * https://github.com/brightcove/pkcs7\n *\n * Copyright (c) 2014 Brightcove\n * Licensed under the apache2 license.\n */\n\nconst PADDING: number[][] = [\n  [16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16],\n  [15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15],\n  [14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14],\n  [13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13],\n  [12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12],\n  [11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11],\n  [10, 10, 10, 10, 10, 10, 10, 10, 10, 10],\n  [9, 9, 9, 9, 9, 9, 9, 9, 9],\n  [8, 8, 8, 8, 8, 8, 8, 8],\n  [7, 7, 7, 7, 7, 7, 7],\n  [6, 6, 6, 6, 6, 6],\n  [5, 5, 5, 5, 5],\n  [4, 4, 4, 4],\n  [3, 3, 3],\n  [2, 2],\n  [1],\n]\n\nexport const pkcs7 = {\n  /**\n   * Returns a new Uint8Array that is padded with PKCS#7 padding.\n   *\n   * @param plaintext {Uint8Array} the input bytes before encryption\n   * @return {Uint8Array} the padded bytes\n   * @see http://tools.ietf.org/html/rfc5652\n   */\n  pad(plaintext: Uint8Array): Uint8Array {\n    const padding = PADDING[plaintext.byteLength % 16 || 0]\n    const result = new Uint8Array(plaintext.byteLength + padding.length)\n\n    result.set(plaintext)\n    result.set(padding, plaintext.byteLength)\n\n    return result\n  },\n  /**\n   * Returns the subarray of a Uint8Array without PKCS#7 padding.\n   *\n   * @param padded {Uint8Array} unencrypted bytes that have been padded\n   * @return {Uint8Array} the unpadded bytes\n   * @see http://tools.ietf.org/html/rfc5652\n   */\n  unpad(padded: Uint8Array): Uint8Array {\n    return padded.subarray(0, padded.byteLength - padded[padded.byteLength - 1])\n  },\n}\n", "import {\n  EncryptionPayload,\n  JsonRpcRequest,\n  JsonRpcSuccess,\n  JsonRpcFailure,\n} from '@binance/w3w-types'\n\nimport {\n  arrayToBuffer,\n  hexToArray,\n  arrayToHex,\n  bufferToArray,\n  concatArrays,\n  utf8ToArray,\n  arrayToUtf8,\n  removeHexPrefix,\n  convertArrayBufferToBuffer,\n  convertBufferToArrayBuffer,\n} from '../encoding'\n\nimport * as lib from './lib'\n\nexport function generateKey(length?: number): ArrayBuffer {\n  const _length = (length || 256) / 8\n  const bytes = lib.randomBytes(_length)\n  const result = convertBufferToArrayBuffer(arrayToBuffer(bytes))\n\n  return result\n}\n\nfunction verifyHmac(payload: EncryptionPayload, key: Uint8Array): boolean {\n  const cipherText = hexToArray(payload.data)\n  const iv = hexToArray(payload.iv)\n  const hmac = hexToArray(payload.hmac)\n  const hmacHex: string = arrayToHex(hmac, false)\n  const unsigned = concatArrays(cipherText, iv)\n  const chmac = lib.hmacSha256Sign(key, unsigned)\n  const chmacHex: string = arrayToHex(chmac, false)\n\n  if (removeHexPrefix(hmacHex) === removeHexPrefix(chmacHex)) {\n    return true\n  }\n\n  return false\n}\n\nexport function encrypt(\n  data: JsonRpcRequest,\n  key: ArrayBuffer,\n  providedIv?: ArrayBuffer\n): EncryptionPayload {\n  const _key = bufferToArray(convertArrayBufferToBuffer(key))\n\n  const ivArrayBuffer: ArrayBuffer = providedIv || generateKey(128)\n  const iv = bufferToArray(convertArrayBufferToBuffer(ivArrayBuffer))\n  const ivHex: string = arrayToHex(iv, false)\n\n  const contentString: string = JSON.stringify(data)\n  const content = utf8ToArray(contentString)\n\n  const cipherText = lib.aesCbcEncrypt(iv, _key, content)\n  const cipherTextHex: string = arrayToHex(cipherText, false)\n\n  const unsigned = concatArrays(cipherText, iv)\n  const hmac = lib.hmacSha256Sign(_key, unsigned)\n  const hmacHex: string = arrayToHex(hmac, false)\n\n  return {\n    data: cipherTextHex,\n    hmac: hmacHex,\n    iv: ivHex,\n  }\n}\n\nexport function decrypt(\n  payload: EncryptionPayload,\n  key: ArrayBuffer\n): JsonRpcRequest | JsonRpcSuccess | JsonRpcFailure | null {\n  const _key = bufferToArray(convertArrayBufferToBuffer(key))\n\n  if (!_key) {\n    throw new Error('Missing key: required for decryption')\n  }\n\n  const verified: boolean = verifyHmac(payload, _key)\n  if (!verified) {\n    return null\n  }\n\n  const cipherText = hexToArray(payload.data)\n  const iv = hexToArray(payload.iv)\n  const buffer = lib.aesCbcDecrypt(iv, _key, cipherText)\n  const utf8: string = arrayToUtf8(buffer)\n  let data\n  try {\n    data = JSON.parse(utf8)\n  } catch (error) {\n    return null\n  }\n\n  return data\n}\n", "export function getStorage<T>(key: string): T | null {\n  let data: T | null = null\n  try {\n    const rawData = window.localStorage.getItem(key)\n    if (rawData) {\n      data = JSON.parse(rawData)\n    }\n  } catch (error) {\n    data = null\n  }\n  return data\n}\n\nexport function removeStorage(key: string) {\n  try {\n    window.localStorage.removeItem(key)\n  } catch (error) {\n    // ignore error\n  }\n}\n\nexport function setStorage<T>(key: string, data: T) {\n  try {\n    window.localStorage.setItem(key, JSON.stringify(data))\n  } catch (error) {\n    // ignore error\n  }\n}\n", "import { IEvents, Any } from '@binance/w3w-types'\nimport EventEmitter from 'eventemitter3'\n\nexport class Events implements IEvents {\n  public events: EventEmitter = new EventEmitter()\n\n  public on = (name: string, listener: (...args: Any[]) => void) => {\n    return this.events.on(name, listener)\n  }\n\n  public once = (name: string, listener: (...args: Any[]) => void) => {\n    return this.events.once(name, listener)\n  }\n\n  public off = (name: string, listener: (...args: Any[]) => void) => {\n    return this.events.off(name, listener)\n  }\n\n  public removeListener = (\n    name: string,\n    listener?: (...args: Any[]) => void\n  ) => {\n    return this.events.removeListener(name, listener)\n  }\n  public removeAllListeners = () => {\n    return this.events.removeAllListeners()\n  }\n}\n", "import { ILog, LogData } from '@binance/w3w-types'\n\nconst logLevels = {\n  ERROR: 0,\n  WARN: 1,\n  INFO: 2,\n  DEBUG: 3,\n}\n\nconst currentLogLevel = logLevels.DEBUG // Set the desired log level here\n\nexport const log: ILog = {\n  error: function (...args: LogData) {\n    if (currentLogLevel >= logLevels.ERROR) {\n      console.error('[ERROR]', ...args)\n    }\n  },\n  warn: function (...args: LogData) {\n    if (currentLogLevel >= logLevels.WARN) {\n      console.warn('[WARN]', ...args)\n    }\n  },\n  info: function (...args: LogData) {\n    if (currentLogLevel >= logLevels.INFO) {\n      console.info('[INFO]', ...args)\n    }\n  },\n  debug: function (...args: LogData) {\n    if (currentLogLevel >= logLevels.DEBUG) {\n      console.log('[DEBUG]', ...args)\n    }\n  },\n}\n", "import { ClientMetadata } from '@binance/w3w-types'\n\nconst isInBrowser: boolean = typeof window !== 'undefined'\n\nfunction getIcons(): string[] {\n  const links: HTMLCollectionOf<HTMLLinkElement> =\n    document.getElementsByTagName('link')\n  const icons: string[] = []\n\n  for (let i = 0; i < links.length; i++) {\n    const link: HTMLLinkElement = links[i]\n\n    const rel: string | null = link.getAttribute('rel')\n    if (rel) {\n      if (rel.toLowerCase().indexOf('icon') > -1) {\n        const href: string | null = link.getAttribute('href')\n\n        if (href) {\n          if (\n            href.toLowerCase().indexOf('https:') === -1 &&\n            href.toLowerCase().indexOf('http:') === -1 &&\n            href.indexOf('//') !== 0\n          ) {\n            let absoluteHref: string = location.protocol + '//' + location.host\n\n            if (href.indexOf('/') === 0) {\n              absoluteHref += href\n            } else {\n              const path: string[] = location.pathname.split('/')\n              path.pop()\n              const finalPath: string = path.join('/')\n              absoluteHref += finalPath + '/' + href\n            }\n\n            icons.push(absoluteHref)\n          } else if (href.indexOf('//') === 0) {\n            const absoluteUrl: string = location.protocol + href\n\n            icons.push(absoluteUrl)\n          } else {\n            icons.push(href)\n          }\n        }\n      }\n    }\n  }\n\n  return icons\n}\n\nfunction getWindowMetadataOfAny(...args: string[]): string {\n  const metaTags: HTMLCollectionOf<HTMLMetaElement> =\n    document.getElementsByTagName('meta')\n\n  for (let i = 0; i < metaTags.length; i++) {\n    const tag: HTMLMetaElement = metaTags[i]\n    const attributes: Array<string | null> = ['itemprop', 'property', 'name']\n      .map((target: string) => tag.getAttribute(target))\n      .filter((attr: string | null) => {\n        if (attr) {\n          return args.includes(attr)\n        }\n        return false\n      })\n\n    if (attributes.length && attributes) {\n      const content: string | null = tag.getAttribute('content')\n      if (content) {\n        return content\n      }\n    }\n  }\n\n  return ''\n}\n\nfunction getName(): string {\n  let name: string = getWindowMetadataOfAny(\n    'name',\n    'og:site_name',\n    'og:title',\n    'twitter:title'\n  )\n\n  if (!name) {\n    name = document.title\n  }\n\n  return name\n}\n\nfunction getDescription(): string {\n  const description: string = getWindowMetadataOfAny(\n    'description',\n    'og:description',\n    'twitter:description',\n    'keywords'\n  )\n\n  return description\n}\n\nexport function getClientMetadata(): ClientMetadata | null {\n  if (!isInBrowser) return\n\n  const name: string = getName()\n  const description: string = getDescription()\n  const url: string = location.origin\n  const icons: string[] = getIcons()\n\n  const meta: ClientMetadata = {\n    description,\n    url,\n    icons,\n    name,\n  }\n\n  return meta\n}\n", "export class ProviderRpcError extends Error {\n  code: number // https://eips.ethereum.org/EIPS/eip-1193#provider-errors\n\n  constructor(code: number, message: string) {\n    super(message) // 'Error' breaks prototype chain here\n    this.code = code\n\n    /**\n     * ref:\n     * https://github.com/Microsoft/TypeScript-wiki/blob/main/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\n     * https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-2.html#support-for-newtarget\n     */\n    Object.setPrototypeOf(this, new.target.prototype) // restore prototype chain\n  }\n\n  public toString(): string {\n    return `${this.message} (${this.code})`\n  }\n}\n", "export const CONNECTION_ERR = {\n  CLOSE_MODAL: {\n    code: 100001,\n    message: '[binance-w3w] User closed modal',\n  },\n  REJECT_SESSION: {\n    code: 100002,\n    message: '[binance-w3w] User rejected connection',\n  },\n  PROVIDER_NOT_READY: {\n    code: 100003,\n    message: '[binance-w3w] Provider is not ready',\n  },\n  CONNECTING: {\n    code: 100004,\n    message: '[binance-w3w] Already processing session request. Please wait',\n  },\n  CONNECTED: {\n    code: 100005,\n    message: '[binance-w3w] Already connected',\n  },\n}\n\nexport const RPC_ERROR = {\n  REJECT_ERR: {\n    code: 200001,\n    message: '[binance-w3w] User rejected the operation',\n  },\n  METHOD_NOT_SUPPORT: {\n    code: 200002,\n    message: '[binance-w3w] Does not support calling method',\n  },\n  MISSING_RESPONSE: {\n    code: 200003,\n    message: '[binance-w3w] Missing JSON RPC response',\n  },\n  INVALID_PARAM: {\n    code: 200004,\n    message: '[binance-w3w] Invalid request param',\n  },\n}\n\nexport const MISC_ERR = {\n  INTERNAL_ERR: {\n    code: 300001,\n    message: '[binance-w3w] Internal error',\n  },\n}\n", "import { encodeURI } from 'js-base64'\n\nimport { getStorage, setStorage } from '../storage'\n\nexport const getIsMobile = () => {\n  const ua = typeof window.navigator === 'undefined' ? '' : navigator.userAgent\n  const mobile = Boolean(\n    ua.match(\n      /Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop/i\n    )\n  )\n  return mobile\n}\n\nexport const getIsAndroid = () => {\n  const ua = navigator.userAgent\n  const android = Boolean(ua.match(/Android/i))\n  return android\n}\n\nexport const getHref = (isAndroid: boolean, wc?: string) => {\n  const appID = 'xoqXxUSMRccLCrZNRebmzj'\n  const startPagePath = 'L3BhZ2VzL2Rhc2hib2FyZC1uZXcvaW5kZXg='\n\n  let qs = `appId=${appID}&startPagePath=${startPagePath}`\n  if (wc) {\n    const startPageQuery = encodeURI(\n      `wc=${encodeURIComponent(wc)}&isDeepLink=true&id=${+new Date()}`\n    )\n    qs = `${qs}&startPageQuery=${startPageQuery}`\n  }\n  const host = '//app.binance.com'\n  if (isAndroid) {\n    return `bnc:${host}/mp/app?${qs}`\n  }\n  return `https:${host}/?_dp=${encodeURI(`/mp/app?${qs}`)}`\n}\n\nexport const openBinanceDeepLink = (wc?: string) => {\n  const isMobile = getIsMobile()\n  const href = getHref(true, wc)\n  if (!isMobile) return\n\n  const a = document.createElement('a')\n  a.href = href\n  document.body.appendChild(a)\n  a.click()\n  document.body.removeChild(a)\n}\n", "export const isInBinance = () => {\n  try {\n    return (window as any)?.ethereum?.isBinance === true\n  } catch (error) {\n    return false\n  }\n}\n", "import { isInBinance } from './env'\n\ndeclare global {\n  interface Window {\n    ethereum: any\n  }\n}\n\nexport const bnTransport = ({ custom, http }) => {\n  if (isInBinance()) {\n    return custom({\n      async request({ method, params }) {\n        console.log('🚀 ~~ request ~~ method:', method)\n        try {\n          const response = await window.ethereum.request({ method, params })\n          console.log('🚀 ~~ custom ~~ response:', response)\n          return response\n        } catch (error) {\n          console.log('🚀 ~~ request ~~ error:', error)\n        }\n      },\n    })\n  }\n  return http()\n}\n", "/**\n *  base64.ts\n *\n *  Licensed under the BSD 3-Clause License.\n *    http://opensource.org/licenses/BSD-3-Clause\n *\n *  References:\n *    http://en.wikipedia.org/wiki/Base64\n *\n * @author Dan Kogai (https://github.com/dankogai)\n */\nconst version = '3.7.8';\n/**\n * @deprecated use lowercase `version`.\n */\nconst VERSION = version;\nconst _hasBuffer = typeof Buffer === 'function';\nconst _TD = typeof TextDecoder === 'function' ? new TextDecoder() : undefined;\nconst _TE = typeof TextEncoder === 'function' ? new TextEncoder() : undefined;\nconst b64ch = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\nconst b64chs = Array.prototype.slice.call(b64ch);\nconst b64tab = ((a) => {\n    let tab = {};\n    a.forEach((c, i) => tab[c] = i);\n    return tab;\n})(b64chs);\nconst b64re = /^(?:[A-Za-z\\d+\\/]{4})*?(?:[A-Za-z\\d+\\/]{2}(?:==)?|[A-Za-z\\d+\\/]{3}=?)?$/;\nconst _fromCC = String.fromCharCode.bind(String);\nconst _U8Afrom = typeof Uint8Array.from === 'function'\n    ? Uint8Array.from.bind(Uint8Array)\n    : (it) => new Uint8Array(Array.prototype.slice.call(it, 0));\nconst _mkUriSafe = (src) => src\n    .replace(/=/g, '').replace(/[+\\/]/g, (m0) => m0 == '+' ? '-' : '_');\nconst _tidyB64 = (s) => s.replace(/[^A-Za-z0-9\\+\\/]/g, '');\n/**\n * polyfill version of `btoa`\n */\nconst btoaPolyfill = (bin) => {\n    // console.log('polyfilled');\n    let u32, c0, c1, c2, asc = '';\n    const pad = bin.length % 3;\n    for (let i = 0; i < bin.length;) {\n        if ((c0 = bin.charCodeAt(i++)) > 255 ||\n            (c1 = bin.charCodeAt(i++)) > 255 ||\n            (c2 = bin.charCodeAt(i++)) > 255)\n            throw new TypeError('invalid character found');\n        u32 = (c0 << 16) | (c1 << 8) | c2;\n        asc += b64chs[u32 >> 18 & 63]\n            + b64chs[u32 >> 12 & 63]\n            + b64chs[u32 >> 6 & 63]\n            + b64chs[u32 & 63];\n    }\n    return pad ? asc.slice(0, pad - 3) + \"===\".substring(pad) : asc;\n};\n/**\n * does what `window.btoa` of web browsers do.\n * @param {String} bin binary string\n * @returns {string} Base64-encoded string\n */\nconst _btoa = typeof btoa === 'function' ? (bin) => btoa(bin)\n    : _hasBuffer ? (bin) => Buffer.from(bin, 'binary').toString('base64')\n        : btoaPolyfill;\nconst _fromUint8Array = _hasBuffer\n    ? (u8a) => Buffer.from(u8a).toString('base64')\n    : (u8a) => {\n        // cf. https://stackoverflow.com/questions/12710001/how-to-convert-uint8-array-to-base64-encoded-string/12713326#12713326\n        const maxargs = 0x1000;\n        let strs = [];\n        for (let i = 0, l = u8a.length; i < l; i += maxargs) {\n            strs.push(_fromCC.apply(null, u8a.subarray(i, i + maxargs)));\n        }\n        return _btoa(strs.join(''));\n    };\n/**\n * converts a Uint8Array to a Base64 string.\n * @param {boolean} [urlsafe] URL-and-filename-safe a la RFC4648 §5\n * @returns {string} Base64 string\n */\nconst fromUint8Array = (u8a, urlsafe = false) => urlsafe ? _mkUriSafe(_fromUint8Array(u8a)) : _fromUint8Array(u8a);\n// This trick is found broken https://github.com/dankogai/js-base64/issues/130\n// const utob = (src: string) => unescape(encodeURIComponent(src));\n// reverting good old fationed regexp\nconst cb_utob = (c) => {\n    if (c.length < 2) {\n        var cc = c.charCodeAt(0);\n        return cc < 0x80 ? c\n            : cc < 0x800 ? (_fromCC(0xc0 | (cc >>> 6))\n                + _fromCC(0x80 | (cc & 0x3f)))\n                : (_fromCC(0xe0 | ((cc >>> 12) & 0x0f))\n                    + _fromCC(0x80 | ((cc >>> 6) & 0x3f))\n                    + _fromCC(0x80 | (cc & 0x3f)));\n    }\n    else {\n        var cc = 0x10000\n            + (c.charCodeAt(0) - 0xD800) * 0x400\n            + (c.charCodeAt(1) - 0xDC00);\n        return (_fromCC(0xf0 | ((cc >>> 18) & 0x07))\n            + _fromCC(0x80 | ((cc >>> 12) & 0x3f))\n            + _fromCC(0x80 | ((cc >>> 6) & 0x3f))\n            + _fromCC(0x80 | (cc & 0x3f)));\n    }\n};\nconst re_utob = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFFF]|[^\\x00-\\x7F]/g;\n/**\n * @deprecated should have been internal use only.\n * @param {string} src UTF-8 string\n * @returns {string} UTF-16 string\n */\nconst utob = (u) => u.replace(re_utob, cb_utob);\n//\nconst _encode = _hasBuffer\n    ? (s) => Buffer.from(s, 'utf8').toString('base64')\n    : _TE\n        ? (s) => _fromUint8Array(_TE.encode(s))\n        : (s) => _btoa(utob(s));\n/**\n * converts a UTF-8-encoded string to a Base64 string.\n * @param {boolean} [urlsafe] if `true` make the result URL-safe\n * @returns {string} Base64 string\n */\nconst encode = (src, urlsafe = false) => urlsafe\n    ? _mkUriSafe(_encode(src))\n    : _encode(src);\n/**\n * converts a UTF-8-encoded string to URL-safe Base64 RFC4648 §5.\n * @returns {string} Base64 string\n */\nconst encodeURI = (src) => encode(src, true);\n// This trick is found broken https://github.com/dankogai/js-base64/issues/130\n// const btou = (src: string) => decodeURIComponent(escape(src));\n// reverting good old fationed regexp\nconst re_btou = /[\\xC0-\\xDF][\\x80-\\xBF]|[\\xE0-\\xEF][\\x80-\\xBF]{2}|[\\xF0-\\xF7][\\x80-\\xBF]{3}/g;\nconst cb_btou = (cccc) => {\n    switch (cccc.length) {\n        case 4:\n            var cp = ((0x07 & cccc.charCodeAt(0)) << 18)\n                | ((0x3f & cccc.charCodeAt(1)) << 12)\n                | ((0x3f & cccc.charCodeAt(2)) << 6)\n                | (0x3f & cccc.charCodeAt(3)), offset = cp - 0x10000;\n            return (_fromCC((offset >>> 10) + 0xD800)\n                + _fromCC((offset & 0x3FF) + 0xDC00));\n        case 3:\n            return _fromCC(((0x0f & cccc.charCodeAt(0)) << 12)\n                | ((0x3f & cccc.charCodeAt(1)) << 6)\n                | (0x3f & cccc.charCodeAt(2)));\n        default:\n            return _fromCC(((0x1f & cccc.charCodeAt(0)) << 6)\n                | (0x3f & cccc.charCodeAt(1)));\n    }\n};\n/**\n * @deprecated should have been internal use only.\n * @param {string} src UTF-16 string\n * @returns {string} UTF-8 string\n */\nconst btou = (b) => b.replace(re_btou, cb_btou);\n/**\n * polyfill version of `atob`\n */\nconst atobPolyfill = (asc) => {\n    // console.log('polyfilled');\n    asc = asc.replace(/\\s+/g, '');\n    if (!b64re.test(asc))\n        throw new TypeError('malformed base64.');\n    asc += '=='.slice(2 - (asc.length & 3));\n    let u24, r1, r2;\n    let binArray = []; // use array to avoid minor gc in loop\n    for (let i = 0; i < asc.length;) {\n        u24 = b64tab[asc.charAt(i++)] << 18\n            | b64tab[asc.charAt(i++)] << 12\n            | (r1 = b64tab[asc.charAt(i++)]) << 6\n            | (r2 = b64tab[asc.charAt(i++)]);\n        if (r1 === 64) {\n            binArray.push(_fromCC(u24 >> 16 & 255));\n        }\n        else if (r2 === 64) {\n            binArray.push(_fromCC(u24 >> 16 & 255, u24 >> 8 & 255));\n        }\n        else {\n            binArray.push(_fromCC(u24 >> 16 & 255, u24 >> 8 & 255, u24 & 255));\n        }\n    }\n    return binArray.join('');\n};\n/**\n * does what `window.atob` of web browsers do.\n * @param {String} asc Base64-encoded string\n * @returns {string} binary string\n */\nconst _atob = typeof atob === 'function' ? (asc) => atob(_tidyB64(asc))\n    : _hasBuffer ? (asc) => Buffer.from(asc, 'base64').toString('binary')\n        : atobPolyfill;\n//\nconst _toUint8Array = _hasBuffer\n    ? (a) => _U8Afrom(Buffer.from(a, 'base64'))\n    : (a) => _U8Afrom(_atob(a).split('').map(c => c.charCodeAt(0)));\n/**\n * converts a Base64 string to a Uint8Array.\n */\nconst toUint8Array = (a) => _toUint8Array(_unURI(a));\n//\nconst _decode = _hasBuffer\n    ? (a) => Buffer.from(a, 'base64').toString('utf8')\n    : _TD\n        ? (a) => _TD.decode(_toUint8Array(a))\n        : (a) => btou(_atob(a));\nconst _unURI = (a) => _tidyB64(a.replace(/[-_]/g, (m0) => m0 == '-' ? '+' : '/'));\n/**\n * converts a Base64 string to a UTF-8 string.\n * @param {String} src Base64 string.  Both normal and URL-safe are supported\n * @returns {string} UTF-8 string\n */\nconst decode = (src) => _decode(_unURI(src));\n/**\n * check if a value is a valid Base64 string\n * @param {String} src a value to check\n  */\nconst isValid = (src) => {\n    if (typeof src !== 'string')\n        return false;\n    const s = src.replace(/\\s+/g, '').replace(/={0,2}$/, '');\n    return !/[^\\s0-9a-zA-Z\\+/]/.test(s) || !/[^\\s0-9a-zA-Z\\-_]/.test(s);\n};\n//\nconst _noEnum = (v) => {\n    return {\n        value: v, enumerable: false, writable: true, configurable: true\n    };\n};\n/**\n * extend String.prototype with relevant methods\n */\nconst extendString = function () {\n    const _add = (name, body) => Object.defineProperty(String.prototype, name, _noEnum(body));\n    _add('fromBase64', function () { return decode(this); });\n    _add('toBase64', function (urlsafe) { return encode(this, urlsafe); });\n    _add('toBase64URI', function () { return encode(this, true); });\n    _add('toBase64URL', function () { return encode(this, true); });\n    _add('toUint8Array', function () { return toUint8Array(this); });\n};\n/**\n * extend Uint8Array.prototype with relevant methods\n */\nconst extendUint8Array = function () {\n    const _add = (name, body) => Object.defineProperty(Uint8Array.prototype, name, _noEnum(body));\n    _add('toBase64', function (urlsafe) { return fromUint8Array(this, urlsafe); });\n    _add('toBase64URI', function () { return fromUint8Array(this, true); });\n    _add('toBase64URL', function () { return fromUint8Array(this, true); });\n};\n/**\n * extend Builtin prototypes with relevant methods\n */\nconst extendBuiltins = () => {\n    extendString();\n    extendUint8Array();\n};\nconst gBase64 = {\n    version: version,\n    VERSION: VERSION,\n    atob: _atob,\n    atobPolyfill: atobPolyfill,\n    btoa: _btoa,\n    btoaPolyfill: btoaPolyfill,\n    fromBase64: decode,\n    toBase64: encode,\n    encode: encode,\n    encodeURI: encodeURI,\n    encodeURL: encodeURI,\n    utob: utob,\n    btou: btou,\n    decode: decode,\n    isValid: isValid,\n    fromUint8Array: fromUint8Array,\n    toUint8Array: toUint8Array,\n    extendString: extendString,\n    extendUint8Array: extendUint8Array,\n    extendBuiltins: extendBuiltins\n};\n// makecjs:CUT //\nexport { version };\nexport { VERSION };\nexport { _atob as atob };\nexport { atobPolyfill };\nexport { _btoa as btoa };\nexport { btoaPolyfill };\nexport { decode as fromBase64 };\nexport { encode as toBase64 };\nexport { utob };\nexport { encode };\nexport { encodeURI };\nexport { encodeURI as encodeURL };\nexport { btou };\nexport { decode };\nexport { isValid };\nexport { fromUint8Array };\nexport { toUint8Array };\nexport { extendString };\nexport { extendUint8Array };\nexport { extendBuiltins };\n// and finally,\nexport { gBase64 as Base64 };\n", "import { getDeepLink } from '@binance/w3w-utils';\nimport { isInBrowser, isInMobileBrowser } from '@tronweb3/tronwallet-abstract-adapter';\n\nexport function supportBinanceWallet() {\n    return isInBrowser() && Boolean(window.isBinance);\n}\n\nexport function openBinanceWallet() {\n    if (isInMobileBrowser() && !supportBinanceWallet()) {\n        window.location.href = getDeepLink(window.location.href).bnc;\n        return true;\n    }\n    return false;\n}\n"],
  "mappings": "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",
  "names": ["b", "i", "_a", "b", "e", "CLA", "i", "data", "Transport", "EventEmitter", "p2", "_a", "s", "f", "r", "_this", "e", "DeviceModelId", "semver", "_a", "d", "i", "_a", "devices", "d", "TransportWebHID", "e", "__awaiter", "_this", "hidFraming", "i", "b", "__read", "slice", "options", "vnodeId", "isValidElement", "rerenderQueue", "prevDebounce", "defer", "depthSort", "CAPTURE_REGEX", "eventClock", "eventProxy", "eventProxyCapture", "i", "EMPTY_OBJ", "EMPTY_ARR", "IS_NON_DIMENSIONAL", "isArray", "Array", "assign", "obj", "props", "removeNode", "node", "parentNode", "removeChild", "createElement", "type", "children", "key", "ref", "normalizedProps", "arguments", "length", "call", "defaultProps", "createVNode", "original", "vnode", "__k", "__", "__b", "__e", "__c", "constructor", "__v", "__i", "__u", "Fragment", "props", "children", "BaseComponent", "context", "this", "getDomSibling", "vnode", "childIndex", "__", "__i", "sibling", "__k", "length", "__e", "type", "updateParentDomPointers", "i", "child", "__c", "base", "enqueueRender", "c", "__d", "rerenderQueue", "push", "process", "__r", "prevDebounce", "options", "debounceRendering", "defer", "component", "newVNode", "oldVNode", "oldDom", "commitQueue", "refQueue", "l", "sort", "depthSort", "shift", "__v", "__P", "assign", "diff", "__n", "namespaceURI", "__u", "commitRoot", "diffChildren", "parentDom", "renderResult", "newParentVNode", "oldParentVNode", "globalContext", "namespace", "excessDomChildren", "isHydrating", "childVNode", "newDom", "firstChildDom", "result", "shouldPlace", "oldChildren", "EMPTY_ARR", "newChildrenLength", "constructNewChildrenArray", "EMPTY_OBJ", "ref", "applyRef", "insert", "nextSibling", "skewedIndex", "matchingIndex", "oldChildrenLength", "remainingOldChildren", "skew", "Array", "constructor", "String", "createVNode", "isArray", "undefined", "__b", "key", "findMatchingIndex", "unmount", "parentVNode", "parentNode", "insertBefore", "nodeType", "toChildArray", "out", "some", "x", "y", "matched", "setStyle", "style", "value", "setProperty", "IS_NON_DIMENSIONAL", "test", "dom", "name", "oldValue", "useCapture", "lowerCaseName", "o", "cssText", "replace", "CAPTURE_REGEX", "toLowerCase", "slice", "_attached", "eventClock", "addEventListener", "eventProxyCapture", "eventProxy", "removeEventListener", "e", "removeAttribute", "setAttribute", "createEventProxy", "eventHandler", "_dispatched", "event", "tmp", "isNew", "oldProps", "oldState", "snapshot", "clearProcessingException", "newProps", "isClassComponent", "provider", "componentContext", "renderHook", "count", "newType", "outer", "prototype", "render", "contextType", "__E", "doRender", "sub", "state", "__h", "_sb", "__s", "getDerivedStateFromProps", "componentWillMount", "componentDidMount", "componentWillReceiveProps", "shouldComponentUpdate", "componentWillUpdate", "componentDidUpdate", "getChildContext", "getSnapshotBeforeUpdate", "cloneNode", "then", "MODE_HYDRATE", "indexOf", "removeNode", "markAsForce", "diffElementNodes", "diffed", "forEach", "root", "cb", "call", "node", "map", "newHtml", "oldHtml", "newChildren", "inputValue", "checked", "localName", "document", "createTextNode", "createElementNS", "is", "__m", "data", "childNodes", "attributes", "__html", "innerHTML", "content", "hasRefUnmount", "current", "skipRemove", "r", "componentWillUnmount", "replaceNode", "documentElement", "createElement", "firstChild", "slice", "EMPTY_ARR", "options", "__e", "error", "vnode", "oldVNode", "errorInfo", "component", "ctor", "handled", "__", "__c", "constructor", "getDerivedStateFromError", "setState", "__d", "componentDidCatch", "__E", "e", "vnodeId", "isValidElement", "undefined", "BaseComponent", "prototype", "update", "callback", "s", "this", "__s", "state", "assign", "props", "__v", "_sb", "push", "enqueueRender", "forceUpdate", "__h", "render", "Fragment", "rerenderQueue", "defer", "Promise", "then", "bind", "resolve", "setTimeout", "depthSort", "a", "b", "__b", "process", "__r", "CAPTURE_REGEX", "eventClock", "eventProxy", "createEventProxy", "eventProxyCapture", "i", "vnodeId", "createVNode", "type", "props", "key", "isStaticChildren", "__source", "__self", "ref", "i", "normalizedProps", "vnode", "__k", "__", "__b", "__e", "__c", "constructor", "__v", "vnodeId", "__i", "__u", "defaultProps", "options", "currentIndex", "currentComponent", "previousComponent", "prevRaf", "currentHook", "afterPaintEffects", "options", "_options", "oldBeforeDiff", "__b", "oldBeforeRender", "__r", "oldAfterDiff", "diffed", "oldCommit", "__c", "oldBeforeUnmount", "unmount", "oldRoot", "__", "getHookState", "index", "type", "__h", "hooks", "__H", "length", "push", "useState", "initialState", "useReducer", "invokeOrReturn", "reducer", "init", "hookState", "_reducer", "action", "currentValue", "__N", "nextValue", "setState", "__f", "updateHookState", "p", "s", "c", "stateHooks", "filter", "x", "every", "prevScu", "call", "this", "shouldUpdate", "props", "forEach", "hookItem", "shouldComponentUpdate", "prevCWU", "componentWillUpdate", "__e", "tmp", "useEffect", "callback", "args", "state", "__s", "argsChanged", "_pendingArgs", "useLayoutEffect", "useRef", "initialValue", "useMemo", "current", "useMemo", "factory", "args", "state", "getHookState", "currentIndex", "argsChanged", "__H", "__", "__h", "flushAfterPaintEffects", "component", "afterPaintEffects", "shift", "__P", "__H", "__h", "forEach", "invokeCleanup", "invokeEffect", "e", "options", "__e", "__v", "__b", "vnode", "currentComponent", "oldBeforeDiff", "__", "parentDom", "__k", "__m", "oldRoot", "__r", "oldBeforeRender", "currentIndex", "hooks", "__c", "previousComponent", "hookItem", "__N", "_pendingArgs", "diffed", "oldAfterDiff", "c", "length", "push", "prevRaf", "requestAnimationFrame", "afterNextFrame", "commitQueue", "some", "filter", "cb", "oldCommit", "unmount", "oldBeforeUnmount", "hasErrored", "s", "HAS_RAF", "callback", "raf", "done", "clearTimeout", "timeout", "cancelAnimationFrame", "setTimeout", "hook", "comp", "cleanup", "argsChanged", "oldArgs", "newArgs", "arg", "index", "invokeOrReturn", "f", "assign", "obj", "props", "i", "shallowDiffers", "a", "b", "useLayoutEffect", "PureComponent", "p", "c", "this", "props", "context", "PureComponent", "prototype", "Component", "isPureReactComponent", "shouldComponentUpdate", "props", "state", "shallowDiffers", "this", "oldDiffHook", "options", "__b", "vnode", "type", "__f", "ref", "REACT_FORWARD_SYMBOL", "Symbol", "for", "oldCatchError", "options", "__e", "error", "newVNode", "oldVNode", "errorInfo", "then", "component", "vnode", "__", "__c", "__k", "oldUnmount", "unmount", "detachedClone", "detachedParent", "parentDom", "__H", "forEach", "effect", "assign", "__P", "map", "child", "removeOriginal", "originalParent", "__v", "appendChild", "Suspense", "this", "__u", "_suspenders", "__b", "suspended", "__a", "SuspenseList", "this", "_next", "_map", "options", "unmount", "vnode", "component", "__c", "__R", "__u", "type", "oldUnmount", "Suspense", "prototype", "Component", "promise", "suspendingVNode", "suspendingComponent", "c", "_suspenders", "push", "resolve", "suspended", "__v", "resolved", "onResolved", "onSuspensionComplete", "state", "__a", "suspendedVNode", "__k", "removeOriginal", "__P", "__O", "setState", "__b", "pop", "forceUpdate", "then", "componentWillUnmount", "render", "props", "detachedParent", "document", "createElement", "detachedComponent", "detachedClone", "fallback", "Fragment", "children", "list", "child", "node", "delete", "revealOrder", "size", "length", "SuspenseList", "prototype", "Component", "__a", "child", "list", "this", "delegated", "suspended", "__v", "node", "_map", "get", "unsuspend", "wrappedUnsuspend", "props", "revealOrder", "push", "resolve", "render", "_next", "Map", "children", "toChildArray", "reverse", "i", "length", "set", "componentDidUpdate", "componentDidMount", "_this", "forEach", "REACT_ELEMENT_TYPE", "Symbol", "for", "CAMEL_PROPS", "ON_ANI", "CAMEL_REPLACE", "IS_DOM", "document", "onChangeInputType", "type", "test", "vnode", "parent", "callback", "__k", "textContent", "preactRender", "__c", "Component", "prototype", "isReactComponent", "forEach", "key", "Object", "defineProperty", "configurable", "get", "this", "set", "v", "writable", "value", "oldEventHook", "options", "event", "empty", "isPropagationStopped", "cancelBubble", "isDefaultPrevented", "defaultPrevented", "e", "persist", "nativeEvent", "currentComponent", "classNameDescriptorNonEnumberable", "enumerable", "class", "oldVNodeHook", "vnode", "type", "props", "normalizedProps", "isNonDashedType", "indexOf", "i", "IS_DOM", "lowerCased", "toLowerCase", "onChangeInputType", "ON_ANI", "test", "CAMEL_PROPS", "replace", "CAMEL_REPLACE", "multiple", "Array", "isArray", "toChildArray", "children", "child", "selected", "defaultValue", "className", "$$typeof", "REACT_ELEMENT_TYPE", "oldBeforeRender", "__r", "__c", "oldDiffed", "diffed", "dom", "__e", "u", "u", "T", "u", "T", "u", "u", "d", "A", "T", "y", "e", "accounts", "_", "_a", "u", "u", "fn", "_a", "__awaiter", "i", "e", "e", "_a", "e", "timer", "__awaiter", "_a", "e", "e", "_a", "address", "address", "_a", "e", "__awaiter", "_a", "e", "_a", "e", "__awaiter", "e", "_a", "address", "_a", "_a", "e", "e", "_a", "address", "chainIdNetworkMap", "_a", "e", "a", "c", "i", "PARSE_ERROR", "e", "a", "DEFAULT_ERROR", "SERVER_ERROR", "e", "r", "code", "i", "t", "A", "type", "n", "STANDARD_ERROR_MAP", "getErrorByCode", "o", "w", "match", "validateJsonRpcError", "response", "s", "u", "c", "isReservedErrorCode", "error", "f", "parseConnectionError", "l", "uuid", "b", "params", "id", "d", "method", "m", "signingMethods", "r", "E", "t", "e", "w", "E", "e", "infuraNetworks", "rpc", "e", "r", "infuraUrl", "_", "d", "chainId", "t", "ENC_HEX", "f", "hex", "removeHexPrefix", "arr", "bufferToArray", "w", "buf", "A", "bufferToHex", "prefixed", "typedArrayToBuffer", "addHexPrefix", "concatArrays", "args", "result", "x", "arg", "n", "o", "utf8ToArray", "utf8", "m", "N", "P", "e", "r", "t", "I", "E", "T", "C", "j", "D", "k", "U", "B", "J", "T", "c", "C", "j", "D", "k", "U", "B", "e", "r", "t", "n", "o", "a", "i", "T3", "T5", "U1", "e2", "value", "arrayish", "i", "bytes", "arg", "copyArray", "sourceEnd", "targetArray", "__publicField", "rounds", "KC", "index", "tk", "tt", "S", "t", "r", "U3", "U4", "T1", "result", "T6", "Si", "iv", "plaintext", "j", "block", "ciphertext", "padding", "SHA256_NODE_ALGO", "aesCbc", "key", "padded", "data", "e", "randomBytes", "buf", "convertBufferToArrayBuffer", "payload", "hexToArray", "hmacHex", "unsigned", "chmac", "arrayToHex", "_key", "providedIv", "ivHex", "contentString", "content", "hmac", "cipherTextHex", "rawData", "removeStorage", "EventEmitter", "Events", "listener", "currentLogLevel", "log", "icons", "rel", "href", "absoluteHref", "path", "finalPath", "getWindowMetadataOfAny", "tag", "metaTags", "attributes", "target", "attr", "getName", "n", "o", "name", "getDescription", "isInBrowser", "description", "a", "url", "I", "getIcons", "ProviderRpcError", "u", "s", "c", "f", "l", "RPC_ERROR", "p", "d", "h", "v", "y", "g", "MISC_ERR", "getHref", "isAndroid", "wc", "qs", "encodeURI", "startPageQuery", "host", "openBinanceDeepLink", "getIsMobile", "isMobile", "isInBinance", "bnTransport", "custom", "method", "params", "response", "error", "http", "E", "e", "l", "n", "r", "x", "o", "a", "i", "I", "t", "p", "u", "_"]
}

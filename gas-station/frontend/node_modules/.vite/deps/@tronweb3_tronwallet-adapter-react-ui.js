import {
  useWallet
} from "./chunk-BC6V7QIY.js";
import "./chunk-JFDTCSIU.js";
import {
  AdapterState
} from "./chunk-MXXBAQAJ.js";
import {
  require_react_dom
} from "./chunk-CLGY2TDU.js";
import {
  require_react
} from "./chunk-SF63QKDS.js";
import {
  __toESM
} from "./chunk-256EKJAK.js";

// ../node_modules/@tronweb3/tronwallet-adapter-react-ui/lib/esm/Collapse.js
var import_react = __toESM(require_react(), 1);
var Collapse = function({ children, className, transition = "height 250ms ease-out", isOpen, onMouseEnter, onMouseLeave }) {
  const initialState = { height: "0px", transition };
  const wrapRef = (0, import_react.useRef)(null);
  const [style, setStyle] = (0, import_react.useState)(initialState);
  (0, import_react.useEffect)(function() {
    setStyle((style2) => Object.assign(Object.assign({}, style2), { transition }));
  }, [transition]);
  function open() {
    if (!wrapRef.current) {
      return;
    }
    setStyle((style2) => {
      var _a;
      return Object.assign(Object.assign({}, style2), { height: ((_a = wrapRef.current) === null || _a === void 0 ? void 0 : _a.scrollHeight) + "px" });
    });
  }
  function close() {
    if (!wrapRef.current) {
      return;
    }
    setStyle((style2) => Object.assign(Object.assign({}, style2), { height: "0px" }));
  }
  (0, import_react.useLayoutEffect)(() => {
    if (isOpen) {
      open();
    } else {
      close();
    }
  }, [isOpen]);
  return import_react.default.createElement("div", { ref: wrapRef, className: "react-collapse " + className, style: Object.assign({ overflow: "hidden" }, style), onMouseEnter, onMouseLeave }, children);
};

// ../node_modules/@tronweb3/tronwallet-adapter-react-ui/lib/esm/Button.js
var import_react2 = __toESM(require_react(), 1);
var __rest = function(s, e) {
  var t = {};
  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
    t[p] = s[p];
  if (s != null && typeof Object.getOwnPropertySymbols === "function")
    for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
      if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
        t[p[i]] = s[p[i]];
    }
  return t;
};
var Button = (_a) => {
  var { children, onClick, className = "", tabIndex = 0, icon } = _a, rest = __rest(_a, ["children", "onClick", "className", "tabIndex", "icon"]);
  const ref = (0, import_react2.useRef)(null);
  function handleClick(event) {
    onClick === null || onClick === void 0 ? void 0 : onClick(event);
    setTimeout(() => {
      var _a2;
      (_a2 = ref.current) === null || _a2 === void 0 ? void 0 : _a2.blur();
    }, 300);
  }
  return import_react2.default.createElement(
    "button",
    Object.assign({ ref, onClick: handleClick, className: `adapter-react-button ${className}`, tabIndex }, rest),
    icon && import_react2.default.createElement(
      "i",
      { className: "button-icon" },
      import_react2.default.createElement("img", { src: icon })
    ),
    children
  );
};

// ../node_modules/@tronweb3/tronwallet-adapter-react-ui/lib/esm/Modal/WalletSelectModal.js
var import_react5 = __toESM(require_react(), 1);

// ../node_modules/@tronweb3/tronwallet-adapter-react-ui/lib/esm/Modal/ReactPortal.js
var import_react3 = __toESM(require_react(), 1);
var import_react_dom = __toESM(require_react_dom(), 1);
function createWrapperAndAppendToBody(wrapperId) {
  const wrapperElement = document.createElement("div");
  wrapperElement.setAttribute("id", wrapperId);
  wrapperElement.style.position = "relative";
  document.body.appendChild(wrapperElement);
  return wrapperElement;
}
var ReactPortal = function({ children, wrapperId = "react-portal-wrapper" }) {
  const [wrapperElement, setWrapperElement] = (0, import_react3.useState)(null);
  (0, import_react3.useLayoutEffect)(() => {
    let element = document.getElementById(wrapperId);
    let systemCreated = false;
    if (!element) {
      systemCreated = true;
      element = createWrapperAndAppendToBody(wrapperId);
    }
    setWrapperElement(element);
    return () => {
      if (systemCreated && (element === null || element === void 0 ? void 0 : element.parentNode)) {
        element.parentNode.removeChild(element);
      }
    };
  }, [wrapperId]);
  if (wrapperElement === null)
    return null;
  return (0, import_react_dom.createPortal)(children, wrapperElement);
};

// ../node_modules/@tronweb3/tronwallet-adapter-react-ui/lib/esm/WalletItem.js
var import_react4 = __toESM(require_react(), 1);
var WalletItem = ({ onClick, wallet }) => {
  return import_react4.default.createElement(
    "div",
    { className: "adapter-wallet-item" },
    import_react4.default.createElement(
      Button,
      { onClick, icon: wallet.adapter.icon, tabIndex: 0 },
      wallet.adapter.name,
      import_react4.default.createElement("span", { className: "status-text" }, wallet.state !== AdapterState.NotFound ? "Detected" : "NotFound")
    )
  );
};

// ../node_modules/@tronweb3/tronwallet-adapter-react-ui/lib/esm/Modal/WalletSelectModal.js
var WalletSelectModal = function({ visible, onClose }) {
  const nodeRef = (0, import_react5.useRef)(null);
  const { wallets, select } = useWallet();
  const [fadeIn, setFadeIn] = (0, import_react5.useState)(false);
  const [render, setRender] = (0, import_react5.useState)(false);
  const walletsList = (0, import_react5.useMemo)(() => [
    ...wallets.filter((a) => a.state !== AdapterState.NotFound),
    ...wallets.filter((a) => a.state === AdapterState.NotFound)
  ], [wallets]);
  const onWalletClick = (0, import_react5.useCallback)((wallet) => {
    select(wallet.adapter.name);
    onClose();
  }, [select, onClose]);
  function show() {
    setRender(true);
    setFadeIn(true);
  }
  function close() {
    setFadeIn(false);
    setTimeout(() => setRender(false), 200);
  }
  (0, import_react5.useEffect)(function() {
    if (visible) {
      show();
    } else {
      close();
    }
  }, [visible]);
  (0, import_react5.useEffect)(() => {
    const closeOnEscapeKey = (e) => e.key === "Escape" ? onClose() : null;
    document.body.addEventListener("keydown", closeOnEscapeKey);
    return () => {
      document.body.removeEventListener("keydown", closeOnEscapeKey);
    };
  }, [onClose]);
  return render ? import_react5.default.createElement(
    ReactPortal,
    { wrapperId: "react-portal-modal-container" },
    import_react5.default.createElement(
      "div",
      { "data-testid": "wallet-select-modal", ref: nodeRef, className: `adapter-modal ${fadeIn && "adapter-modal-fade-in"}` },
      import_react5.default.createElement(
        "div",
        { className: "adapter-modal-wrapper" },
        import_react5.default.createElement(
          "div",
          { className: "adapter-modal-header" },
          import_react5.default.createElement("button", { onClick: onClose, className: "close-button", tabIndex: 0 }),
          import_react5.default.createElement(
            "div",
            { className: "adapter-modal-title" },
            "Connect a wallet on",
            import_react5.default.createElement("br", null),
            "Tron to continue"
          )
        ),
        import_react5.default.createElement("div", { className: "adapter-list" }, walletsList.map((wallet) => import_react5.default.createElement(WalletItem, { key: wallet.adapter.name, wallet, onClick: () => onWalletClick(wallet) })))
      )
    )
  ) : null;
};

// ../node_modules/@tronweb3/tronwallet-adapter-react-ui/lib/esm/WalletConnectButton.js
var import_react6 = __toESM(require_react(), 1);
var __awaiter = function(thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function(resolve) {
      resolve(value);
    });
  }
  return new (P || (P = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
var __rest2 = function(s, e) {
  var t = {};
  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
    t[p] = s[p];
  if (s != null && typeof Object.getOwnPropertySymbols === "function")
    for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
      if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
        t[p[i]] = s[p[i]];
    }
  return t;
};
var WalletConnectButton = (_a) => {
  var { children, disabled, onClick } = _a, props = __rest2(_a, ["children", "disabled", "onClick"]);
  const { wallet, connect, connecting, connected } = useWallet();
  const handleClick = (0, import_react6.useCallback)((event) => __awaiter(void 0, void 0, void 0, function* () {
    if (onClick)
      onClick(event);
    if (!event.defaultPrevented) {
      yield connect();
    }
  }), [onClick, connect]);
  const content = (0, import_react6.useMemo)(() => {
    if (children)
      return children;
    if (connecting)
      return "Connecting ...";
    if (connected)
      return "Connected";
    if (wallet)
      return "Connect";
    return "Connect Wallet";
  }, [children, connecting, connected, wallet]);
  return import_react6.default.createElement(Button, Object.assign({ "data-testid": "wallet-connect-button", className: "wallet-button", disabled: disabled || !wallet || connecting || connected, onClick: handleClick, icon: wallet ? wallet.adapter.icon : "" }, props), content);
};

// ../node_modules/@tronweb3/tronwallet-adapter-react-ui/lib/esm/WalletDisconnectButton.js
var import_react7 = __toESM(require_react(), 1);
var __rest3 = function(s, e) {
  var t = {};
  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
    t[p] = s[p];
  if (s != null && typeof Object.getOwnPropertySymbols === "function")
    for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
      if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
        t[p[i]] = s[p[i]];
    }
  return t;
};
var WalletDisconnectButton = (_a) => {
  var { children, disabled, onClick } = _a, props = __rest3(_a, ["children", "disabled", "onClick"]);
  const { wallet, disconnect, disconnecting, connected } = useWallet();
  const handleClick = (0, import_react7.useCallback)((event) => {
    if (onClick)
      onClick(event);
    if (!event.defaultPrevented)
      disconnect().catch(() => {
      });
  }, [onClick, disconnect]);
  const content = (0, import_react7.useMemo)(() => {
    if (children)
      return children;
    if (disconnecting)
      return "Disconnecting ...";
    if (wallet)
      return "Disconnect";
    return "Disconnect Wallet";
  }, [children, disconnecting, wallet]);
  return import_react7.default.createElement(Button, Object.assign({ "data-testid": "wallet-disconnect-button", disabled: disabled || !wallet || !connected, icon: wallet ? wallet.adapter.icon : "", onClick: handleClick }, props), content);
};

// ../node_modules/@tronweb3/tronwallet-adapter-react-ui/lib/esm/WalletActionButton.js
var import_react10 = __toESM(require_react(), 1);
var import_react11 = __toESM(require_react(), 1);

// ../node_modules/@tronweb3/tronwallet-adapter-react-ui/lib/esm/WalletSelectButton.js
var import_react9 = __toESM(require_react(), 1);

// ../node_modules/@tronweb3/tronwallet-adapter-react-ui/lib/esm/useWalletModal.js
var import_react8 = __toESM(require_react(), 1);
var DEFAULT_VALUE = {
  // eslint-disable-next-line @typescript-eslint/no-unused-vars
  setVisible(_open) {
    printError();
  },
  visible: false
};
Object.defineProperty(DEFAULT_VALUE, "visible", {
  get() {
    printError();
    return false;
  }
});
function printError() {
  console.error("WalletModalProvider is not provided.Please wrap your components with WalletModalProvider.");
}
var WalletModalContext = (0, import_react8.createContext)(DEFAULT_VALUE);
function useWalletModal() {
  return (0, import_react8.useContext)(WalletModalContext);
}

// ../node_modules/@tronweb3/tronwallet-adapter-react-ui/lib/esm/WalletSelectButton.js
var __rest4 = function(s, e) {
  var t = {};
  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
    t[p] = s[p];
  if (s != null && typeof Object.getOwnPropertySymbols === "function")
    for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
      if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
        t[p[i]] = s[p[i]];
    }
  return t;
};
var WalletSelectButton = function(_a) {
  var { children = "Select Wallet", onClick } = _a, props = __rest4(_a, ["children", "onClick"]);
  const { visible, setVisible } = useWalletModal();
  const handleClick = (0, import_react9.useCallback)((event) => {
    if (onClick)
      onClick(event);
    if (!event.defaultPrevented)
      setVisible(!visible);
  }, [onClick, setVisible, visible]);
  return import_react9.default.createElement(Button, Object.assign({ "data-testid": "wallet-select-button", onClick: handleClick }, props), children);
};

// ../node_modules/@tronweb3/tronwallet-adapter-react-ui/lib/esm/utils.js
function copyData(copyText) {
  const textArea = document.createElement("textarea");
  textArea.value = copyText;
  document.body.appendChild(textArea);
  textArea.select();
  textArea.style.position = "fixed";
  textArea.style.top = "-9999px";
  textArea.style.left = "-9999px";
  document.execCommand("copy");
  textArea.blur();
}

// ../node_modules/@tronweb3/tronwallet-adapter-react-ui/lib/esm/WalletActionButton.js
var __awaiter2 = function(thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function(resolve) {
      resolve(value);
    });
  }
  return new (P || (P = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
var __rest5 = function(s, e) {
  var t = {};
  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
    t[p] = s[p];
  if (s != null && typeof Object.getOwnPropertySymbols === "function")
    for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
      if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
        t[p[i]] = s[p[i]];
    }
  return t;
};
var WalletActionButton = (_a) => {
  var { children } = _a, props = __rest5(_a, ["children"]);
  const { address, wallet, disconnect } = useWallet();
  const { setVisible } = useWalletModal();
  const [dropdownVisible, setDropdownVisible] = (0, import_react10.useState)(false);
  const [copied, setCopied] = (0, import_react10.useState)(false);
  const ref = (0, import_react10.useRef)(null);
  const content = (0, import_react11.useMemo)(() => {
    if (children)
      return children;
    if (!wallet || !address)
      return null;
    return address.slice(0, 4) + "..." + address.slice(-4);
  }, [children, wallet, address]);
  const copyAddress = () => {
    if (address) {
      copyData(address);
      setCopied(true);
      setTimeout(() => {
        setCopied(false);
        hideDropdown();
      }, 400);
    }
  };
  function changeWallet() {
    setVisible(true);
    hideDropdown();
  }
  const openDropdown = (0, import_react11.useCallback)(function() {
    setDropdownVisible(true);
  }, []);
  const hideDropdown = (0, import_react11.useCallback)(function() {
    setDropdownVisible(false);
  }, []);
  const handleDisconnect = (0, import_react11.useCallback)(function() {
    return __awaiter2(this, void 0, void 0, function* () {
      yield disconnect();
      hideDropdown();
    });
  }, [disconnect, hideDropdown]);
  (0, import_react10.useEffect)(() => {
    const listener = (event) => {
      const node = ref.current;
      if (!node || node.contains(event.target))
        return;
      hideDropdown();
    };
    document.addEventListener("mousedown", listener);
    document.addEventListener("touchstart", listener);
    return () => {
      document.removeEventListener("mousedown", listener);
      document.removeEventListener("touchstart", listener);
    };
  }, [ref, hideDropdown]);
  if (!wallet)
    return import_react11.default.createElement(WalletSelectButton, Object.assign({ onClick: hideDropdown }, props), children);
  return import_react11.default.createElement(
    "div",
    { "data-testid": "wallet-action-button", className: "adapter-dropdown" },
    !address ? import_react11.default.createElement(
      "div",
      { onMouseEnter: openDropdown, onMouseLeave: hideDropdown },
      import_react11.default.createElement(WalletConnectButton, Object.assign({}, props), children)
    ) : import_react11.default.createElement(Button, Object.assign({ onClick: openDropdown, style: Object.assign({ pointerEvents: dropdownVisible ? "none" : "auto" }, props.style), icon: wallet ? wallet.adapter.icon : "" }, props), content),
    import_react11.default.createElement(
      Collapse,
      Object.assign({ className: "adapter-dropdown-collapse", isOpen: dropdownVisible }, !address ? { onMouseEnter: openDropdown, onMouseLeave: hideDropdown } : {}),
      import_react11.default.createElement(
        "ul",
        { ref, className: "adapter-dropdown-list", role: "menu" },
        address && import_react11.default.createElement("li", { onClick: copyAddress, className: "adapter-dropdown-list-item", role: "menuitem" }, copied ? "Copied" : "Copy address"),
        import_react11.default.createElement("li", { onClick: changeWallet, className: "adapter-dropdown-list-item", role: "menuitem" }, "Change wallet"),
        address && import_react11.default.createElement("li", { onClick: handleDisconnect, className: "adapter-dropdown-list-item", role: "menuitem" }, "Disconnect")
      )
    )
  );
};

// ../node_modules/@tronweb3/tronwallet-adapter-react-ui/lib/esm/WalletModalProvider.js
var import_react12 = __toESM(require_react(), 1);
var __rest6 = function(s, e) {
  var t = {};
  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
    t[p] = s[p];
  if (s != null && typeof Object.getOwnPropertySymbols === "function")
    for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
      if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
        t[p[i]] = s[p[i]];
    }
  return t;
};
function WalletModalProvider(_a) {
  var { children } = _a, props = __rest6(_a, ["children"]);
  const [visible, setVisible] = (0, import_react12.useState)(false);
  return import_react12.default.createElement(
    WalletModalContext.Provider,
    { value: {
      visible,
      setVisible
    } },
    children,
    import_react12.default.createElement(WalletSelectModal, Object.assign({ visible, onClose: () => setVisible(false) }, props))
  );
}
export {
  Button,
  Collapse,
  WalletActionButton,
  WalletConnectButton,
  WalletDisconnectButton,
  WalletItem,
  WalletModalContext,
  WalletModalProvider,
  WalletSelectButton,
  WalletSelectModal,
  useWalletModal
};
//# sourceMappingURL=@tronweb3_tronwallet-adapter-react-ui.js.map
